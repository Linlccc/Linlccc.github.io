<!DOCTYPE html>
<!-- 创建一个 css 引用空数组 -->
{{ .Store.Set "css" slice }}
<!-- 创建 css 引用字典 -->
<!-- home -->
{{ $cssDict := dict "classic" "sass/partials/home/classic.scss" }}
{{ $cssDict = merge $cssDict (dict "profile" "sass/partials/home/profile.scss") }}
<!-- list -->
{{ $cssDict = merge $cssDict (dict "list" "sass/partials/list.scss") }}
<!-- 搜索 -->
{{ $cssDict = merge $cssDict (dict "search" "sass/partials/search.scss") }}
<!-- 分类 -->
{{ $cssDict = merge $cssDict (dict "terms" "sass/partials/terms.scss") }}
<!-- 档案 -->
{{ $cssDict = merge $cssDict (dict "archive" "sass/partials/archive.scss") }}
<!-- 404 -->
{{ $cssDict = merge $cssDict (dict "404" "sass/partials/404.scss") }}
<!-- 文章 -->
{{ $cssDict = merge $cssDict (dict "single" "sass/partials/single/single.scss") }}

<html lang="{{ site.Language }}" dir="{{ .Language.LanguageDirection | default "auto" }}" class="{{ site.Params.defaultTheme | default "auto" }}">
  {{- partial "head/index.html" . -}}

<body id="top">
  {{ partial "body/header/index.html" . }}

  <main class="main">{{ block "main" . }}{{ end }}</main>

  {{ partialCached "body/footer/index.html" . .Kind .Layout }}
</body>

 <!-- 遍历引用 css -->
{{ range .Store.Get "css" }}
  {{ $file := index $cssDict . }}
  {{ if $file }}
    {{ $outfile := printf "assets/css/%s.css" . }}
    {{ $style := resources.Get $file | toCSS (dict "targetPath" $outfile "enableSourceMap" true) | minify | fingerprint }}
    <link crossorigin="anonymous" rel="preload stylesheet" as="style" href="{{ $style.RelPermalink }}" integrity="{{ $style.Data.Integrity }}" />
  {{ end }}
{{ end }}
</html>
