<?xml version="1.0" encoding="utf-8" standalone="yes"?><rss version="2.0" xmlns:atom="http://www.w3.org/2005/Atom" xmlns:content="http://purl.org/rss/1.0/modules/content/"><channel><title>Javascript on Linlccc's Blog</title><link>https://linlccc.com/tags/javascript/</link><description>Recent content in Javascript on Linlccc's Blog</description><image><title>Linlccc's Blog</title><url>https://linlccc.com/favicon/dark/favicon-192x192.png</url><link>https://linlccc.com/favicon/dark/favicon-192x192.png</link></image><generator>Hugo</generator><language>zh-CN</language><managingEditor>linlccc@163.com (Linlccc)</managingEditor><webMaster>linlccc@163.com (Linlccc)</webMaster><lastBuildDate>Mon, 17 Jun 2024 22:02:20 +0800</lastBuildDate><atom:link href="https://linlccc.com/tags/javascript/index.xml" rel="self" type="application/rss+xml"/><item><title>手写js高级知识点</title><link>https://linlccc.com/pending/adv-js-knowledge/</link><pubDate>Sun, 16 Jun 2024 22:28:46 +0800</pubDate><author>[Linlccc]</author><guid>https://linlccc.com/pending/adv-js-knowledge/</guid><description>&lt;h2 id="实现原生的-ajax-请求" >实现原生的 AJAX 请求
&lt;a hidden class="anchor" aria-hidden="true" href="#%e5%ae%9e%e7%8e%b0%e5%8e%9f%e7%94%9f%e7%9a%84-ajax-%e8%af%b7%e6%b1%82">#&lt;/a>
&lt;/h2>
&lt;div class="codeBlock">
&lt;details open>
&lt;summary>
&lt;div class="oper">&lt;div class="status">&lt;/div>&lt;/div>
&lt;div class="title">js&lt;/div>
&lt;div class="oper">&lt;button class="codeCopy">复制&lt;/button>&lt;/div>
&lt;/summary>
&lt;/details>
&lt;div class="codeBlockContent">
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt" id="hl-0-1">&lt;a class="lnlinks" href="#hl-0-1"> 1&lt;/a>
&lt;/span>&lt;span class="lnt" id="hl-0-2">&lt;a class="lnlinks" href="#hl-0-2"> 2&lt;/a>
&lt;/span>&lt;span class="lnt" id="hl-0-3">&lt;a class="lnlinks" href="#hl-0-3"> 3&lt;/a>
&lt;/span>&lt;span class="lnt" id="hl-0-4">&lt;a class="lnlinks" href="#hl-0-4"> 4&lt;/a>
&lt;/span>&lt;span class="lnt" id="hl-0-5">&lt;a class="lnlinks" href="#hl-0-5"> 5&lt;/a>
&lt;/span>&lt;span class="lnt" id="hl-0-6">&lt;a class="lnlinks" href="#hl-0-6"> 6&lt;/a>
&lt;/span>&lt;span class="lnt" id="hl-0-7">&lt;a class="lnlinks" href="#hl-0-7"> 7&lt;/a>
&lt;/span>&lt;span class="lnt" id="hl-0-8">&lt;a class="lnlinks" href="#hl-0-8"> 8&lt;/a>
&lt;/span>&lt;span class="lnt" id="hl-0-9">&lt;a class="lnlinks" href="#hl-0-9"> 9&lt;/a>
&lt;/span>&lt;span class="lnt" id="hl-0-10">&lt;a class="lnlinks" href="#hl-0-10">10&lt;/a>
&lt;/span>&lt;span class="lnt" id="hl-0-11">&lt;a class="lnlinks" href="#hl-0-11">11&lt;/a>
&lt;/span>&lt;span class="lnt" id="hl-0-12">&lt;a class="lnlinks" href="#hl-0-12">12&lt;/a>
&lt;/span>&lt;span class="lnt" id="hl-0-13">&lt;a class="lnlinks" href="#hl-0-13">13&lt;/a>
&lt;/span>&lt;span class="lnt" id="hl-0-14">&lt;a class="lnlinks" href="#hl-0-14">14&lt;/a>
&lt;/span>&lt;span class="lnt" id="hl-0-15">&lt;a class="lnlinks" href="#hl-0-15">15&lt;/a>
&lt;/span>&lt;span class="lnt" id="hl-0-16">&lt;a class="lnlinks" href="#hl-0-16">16&lt;/a>
&lt;/span>&lt;span class="lnt" id="hl-0-17">&lt;a class="lnlinks" href="#hl-0-17">17&lt;/a>
&lt;/span>&lt;span class="lnt" id="hl-0-18">&lt;a class="lnlinks" href="#hl-0-18">18&lt;/a>
&lt;/span>&lt;span class="lnt" id="hl-0-19">&lt;a class="lnlinks" href="#hl-0-19">19&lt;/a>
&lt;/span>&lt;span class="lnt" id="hl-0-20">&lt;a class="lnlinks" href="#hl-0-20">20&lt;/a>
&lt;/span>&lt;span class="lnt" id="hl-0-21">&lt;a class="lnlinks" href="#hl-0-21">21&lt;/a>
&lt;/span>&lt;span class="lnt" id="hl-0-22">&lt;a class="lnlinks" href="#hl-0-22">22&lt;/a>
&lt;/span>&lt;span class="lnt" id="hl-0-23">&lt;a class="lnlinks" href="#hl-0-23">23&lt;/a>
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-js" data-lang="js">&lt;span class="line">&lt;span class="cl">&lt;span class="kr">const&lt;/span> &lt;span class="nx">ajax&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">get&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="nx">url&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="nx">fn&lt;/span>&lt;span class="p">)&lt;/span> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="kr">const&lt;/span> &lt;span class="nx">xhr&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="k">new&lt;/span> &lt;span class="nx">XMLHttpRequest&lt;/span>&lt;span class="p">();&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">xhr&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">open&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s2">&amp;#34;GET&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="nx">url&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="kc">true&lt;/span>&lt;span class="p">);&lt;/span> &lt;span class="c1">// 第三个参数异步与否
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">&lt;/span> &lt;span class="nx">xhr&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">onreadystatechange&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="kd">function&lt;/span> &lt;span class="p">()&lt;/span> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">if&lt;/span> &lt;span class="p">(&lt;/span>&lt;span class="nx">xhr&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">readyState&lt;/span> &lt;span class="o">===&lt;/span> &lt;span class="mi">4&lt;/span>&lt;span class="p">)&lt;/span> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">fn&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="nx">xhr&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">responeText&lt;/span>&lt;span class="p">);&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">};&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">xhr&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">send&lt;/span>&lt;span class="p">();&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">},&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">post&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="nx">url&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="nx">data&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="nx">fn&lt;/span>&lt;span class="p">)&lt;/span> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="kr">const&lt;/span> &lt;span class="nx">xhr&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="k">new&lt;/span> &lt;span class="nx">XMLHttpRequest&lt;/span>&lt;span class="p">();&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">xhr&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">open&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s2">&amp;#34;POST&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="nx">url&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="kc">true&lt;/span>&lt;span class="p">);&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">xhr&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">setRequestHeader&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s2">&amp;#34;Content-type&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="s2">&amp;#34;application/x-www-form-urlencoded&amp;#34;&lt;/span>&lt;span class="p">);&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">xhr&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">onreadystatechange&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="kd">function&lt;/span> &lt;span class="p">()&lt;/span> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">if&lt;/span> &lt;span class="p">(&lt;/span>&lt;span class="nx">xhr&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">readyState&lt;/span> &lt;span class="o">===&lt;/span> &lt;span class="mi">4&lt;/span>&lt;span class="p">)&lt;/span> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">fn&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="nx">xhr&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">responeText&lt;/span>&lt;span class="p">);&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">};&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">xhr&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">send&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="nx">data&lt;/span>&lt;span class="p">);&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">},&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="p">};&lt;/span>&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>
&lt;/div>
&lt;/div>
&lt;h2 id="手写-new-的过程" >手写 new 的过程
&lt;a hidden class="anchor" aria-hidden="true" href="#%e6%89%8b%e5%86%99-new-%e7%9a%84%e8%bf%87%e7%a8%8b">#&lt;/a>
&lt;/h2>
&lt;div class="codeBlock">
&lt;details open>
&lt;summary>
&lt;div class="oper">&lt;div class="status">&lt;/div>&lt;/div>
&lt;div class="title">js&lt;/div>
&lt;div class="oper">&lt;button class="codeCopy">复制&lt;/button>&lt;/div>
&lt;/summary>
&lt;/details>
&lt;div class="codeBlockContent">
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt" id="hl-1-1">&lt;a class="lnlinks" href="#hl-1-1">1&lt;/a>
&lt;/span>&lt;span class="lnt" id="hl-1-2">&lt;a class="lnlinks" href="#hl-1-2">2&lt;/a>
&lt;/span>&lt;span class="lnt" id="hl-1-3">&lt;a class="lnlinks" href="#hl-1-3">3&lt;/a>
&lt;/span>&lt;span class="lnt" id="hl-1-4">&lt;a class="lnlinks" href="#hl-1-4">4&lt;/a>
&lt;/span>&lt;span class="lnt" id="hl-1-5">&lt;a class="lnlinks" href="#hl-1-5">5&lt;/a>
&lt;/span>&lt;span class="lnt" id="hl-1-6">&lt;a class="lnlinks" href="#hl-1-6">6&lt;/a>
&lt;/span>&lt;span class="lnt" id="hl-1-7">&lt;a class="lnlinks" href="#hl-1-7">7&lt;/a>
&lt;/span>&lt;span class="lnt" id="hl-1-8">&lt;a class="lnlinks" href="#hl-1-8">8&lt;/a>
&lt;/span>&lt;span class="lnt" id="hl-1-9">&lt;a class="lnlinks" href="#hl-1-9">9&lt;/a>
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-js" data-lang="js">&lt;span class="line">&lt;span class="cl">&lt;span class="kd">function&lt;/span> &lt;span class="nx">myNew&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="nx">fn&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="p">...&lt;/span>&lt;span class="nx">args&lt;/span>&lt;span class="p">)&lt;/span> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="kr">const&lt;/span> &lt;span class="nx">obj&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="p">{};&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">obj&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">__proto__&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="nx">fn&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">prototype&lt;/span>&lt;span class="p">;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">fn&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">apply&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="nx">obj&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="nx">args&lt;/span>&lt;span class="p">);&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">return&lt;/span> &lt;span class="nx">obj&lt;/span>&lt;span class="p">;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="p">}&lt;/span>&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>
&lt;/div>
&lt;/div>
&lt;h2 id="instanceof-关键字" >instanceof 关键字
&lt;a hidden class="anchor" aria-hidden="true" href="#instanceof-%e5%85%b3%e9%94%ae%e5%ad%97">#&lt;/a>
&lt;/h2>
&lt;div class="codeBlock">
&lt;details open>
&lt;summary>
&lt;div class="oper">&lt;div class="status">&lt;/div>&lt;/div>
&lt;div class="title">js&lt;/div>
&lt;div class="oper">&lt;button class="codeCopy">复制&lt;/button>&lt;/div>
&lt;/summary>
&lt;/details>
&lt;div class="codeBlockContent">
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt" id="hl-2-1">&lt;a class="lnlinks" href="#hl-2-1"> 1&lt;/a>
&lt;/span>&lt;span class="lnt" id="hl-2-2">&lt;a class="lnlinks" href="#hl-2-2"> 2&lt;/a>
&lt;/span>&lt;span class="lnt" id="hl-2-3">&lt;a class="lnlinks" href="#hl-2-3"> 3&lt;/a>
&lt;/span>&lt;span class="lnt" id="hl-2-4">&lt;a class="lnlinks" href="#hl-2-4"> 4&lt;/a>
&lt;/span>&lt;span class="lnt" id="hl-2-5">&lt;a class="lnlinks" href="#hl-2-5"> 5&lt;/a>
&lt;/span>&lt;span class="lnt" id="hl-2-6">&lt;a class="lnlinks" href="#hl-2-6"> 6&lt;/a>
&lt;/span>&lt;span class="lnt" id="hl-2-7">&lt;a class="lnlinks" href="#hl-2-7"> 7&lt;/a>
&lt;/span>&lt;span class="lnt" id="hl-2-8">&lt;a class="lnlinks" href="#hl-2-8"> 8&lt;/a>
&lt;/span>&lt;span class="lnt" id="hl-2-9">&lt;a class="lnlinks" href="#hl-2-9"> 9&lt;/a>
&lt;/span>&lt;span class="lnt" id="hl-2-10">&lt;a class="lnlinks" href="#hl-2-10">10&lt;/a>
&lt;/span>&lt;span class="lnt" id="hl-2-11">&lt;a class="lnlinks" href="#hl-2-11">11&lt;/a>
&lt;/span>&lt;span class="lnt" id="hl-2-12">&lt;a class="lnlinks" href="#hl-2-12">12&lt;/a>
&lt;/span>&lt;span class="lnt" id="hl-2-13">&lt;a class="lnlinks" href="#hl-2-13">13&lt;/a>
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-js" data-lang="js">&lt;span class="line">&lt;span class="cl">&lt;span class="kd">function&lt;/span> &lt;span class="nx">instanceOf&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="nx">father&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="nx">child&lt;/span>&lt;span class="p">)&lt;/span> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="kr">const&lt;/span> &lt;span class="nx">fp&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="nx">father&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">prototype&lt;/span>&lt;span class="p">;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="kd">var&lt;/span> &lt;span class="nx">cp&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="nx">child&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">__proto__&lt;/span>&lt;span class="p">;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">while&lt;/span> &lt;span class="p">(&lt;/span>&lt;span class="nx">cp&lt;/span>&lt;span class="p">)&lt;/span> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">if&lt;/span> &lt;span class="p">(&lt;/span>&lt;span class="nx">cp&lt;/span> &lt;span class="o">===&lt;/span> &lt;span class="nx">fp&lt;/span>&lt;span class="p">)&lt;/span> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">return&lt;/span> &lt;span class="kc">true&lt;/span>&lt;span class="p">;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">cp&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="nx">cp&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">__proto__&lt;/span>&lt;span class="p">;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">return&lt;/span> &lt;span class="kc">false&lt;/span>&lt;span class="p">;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="p">}&lt;/span>&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>
&lt;/div>
&lt;/div>
&lt;h2 id="实现防抖函数" >实现防抖函数
&lt;a hidden class="anchor" aria-hidden="true" href="#%e5%ae%9e%e7%8e%b0%e9%98%b2%e6%8a%96%e5%87%bd%e6%95%b0">#&lt;/a>
&lt;/h2>
&lt;div class="codeBlock">
&lt;details open>
&lt;summary>
&lt;div class="oper">&lt;div class="status">&lt;/div>&lt;/div>
&lt;div class="title">js&lt;/div>
&lt;div class="oper">&lt;button class="codeCopy">复制&lt;/button>&lt;/div>
&lt;/summary>
&lt;/details>
&lt;div class="codeBlockContent">
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt" id="hl-3-1">&lt;a class="lnlinks" href="#hl-3-1"> 1&lt;/a>
&lt;/span>&lt;span class="lnt" id="hl-3-2">&lt;a class="lnlinks" href="#hl-3-2"> 2&lt;/a>
&lt;/span>&lt;span class="lnt" id="hl-3-3">&lt;a class="lnlinks" href="#hl-3-3"> 3&lt;/a>
&lt;/span>&lt;span class="lnt" id="hl-3-4">&lt;a class="lnlinks" href="#hl-3-4"> 4&lt;/a>
&lt;/span>&lt;span class="lnt" id="hl-3-5">&lt;a class="lnlinks" href="#hl-3-5"> 5&lt;/a>
&lt;/span>&lt;span class="lnt" id="hl-3-6">&lt;a class="lnlinks" href="#hl-3-6"> 6&lt;/a>
&lt;/span>&lt;span class="lnt" id="hl-3-7">&lt;a class="lnlinks" href="#hl-3-7"> 7&lt;/a>
&lt;/span>&lt;span class="lnt" id="hl-3-8">&lt;a class="lnlinks" href="#hl-3-8"> 8&lt;/a>
&lt;/span>&lt;span class="lnt" id="hl-3-9">&lt;a class="lnlinks" href="#hl-3-9"> 9&lt;/a>
&lt;/span>&lt;span class="lnt" id="hl-3-10">&lt;a class="lnlinks" href="#hl-3-10">10&lt;/a>
&lt;/span>&lt;span class="lnt" id="hl-3-11">&lt;a class="lnlinks" href="#hl-3-11">11&lt;/a>
&lt;/span>&lt;span class="lnt" id="hl-3-12">&lt;a class="lnlinks" href="#hl-3-12">12&lt;/a>
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-js" data-lang="js">&lt;span class="line">&lt;span class="cl">&lt;span class="kd">function&lt;/span> &lt;span class="nx">debounce&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="nx">fn&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="nx">delay&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="mi">500&lt;/span>&lt;span class="p">)&lt;/span> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="kd">let&lt;/span> &lt;span class="nx">timer&lt;/span>&lt;span class="p">;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">return&lt;/span> &lt;span class="kd">function&lt;/span> &lt;span class="p">()&lt;/span> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">if&lt;/span> &lt;span class="p">(&lt;/span>&lt;span class="nx">timer&lt;/span>&lt;span class="p">)&lt;/span> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">clearTimeout&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="nx">timer&lt;/span>&lt;span class="p">);&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="kr">const&lt;/span> &lt;span class="nx">args&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="nx">arguments&lt;/span>&lt;span class="p">;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">timer&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="nx">setTimeout&lt;/span>&lt;span class="p">(()&lt;/span> &lt;span class="p">=&amp;gt;&lt;/span> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">fn&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">apply&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="k">this&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="nx">args&lt;/span>&lt;span class="p">);&lt;/span> &lt;span class="c1">// 改变this指向为调用debounce所指的对象
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">&lt;/span> &lt;span class="p">},&lt;/span> &lt;span class="nx">delay&lt;/span>&lt;span class="p">);&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">};&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="p">}&lt;/span>&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>
&lt;/div>
&lt;/div>
&lt;h2 id="实现节流函数" >实现节流函数
&lt;a hidden class="anchor" aria-hidden="true" href="#%e5%ae%9e%e7%8e%b0%e8%8a%82%e6%b5%81%e5%87%bd%e6%95%b0">#&lt;/a>
&lt;/h2>
&lt;div class="codeBlock">
&lt;details open>
&lt;summary>
&lt;div class="oper">&lt;div class="status">&lt;/div>&lt;/div>
&lt;div class="title">js&lt;/div>
&lt;div class="oper">&lt;button class="codeCopy">复制&lt;/button>&lt;/div>
&lt;/summary>
&lt;/details>
&lt;div class="codeBlockContent">
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt" id="hl-4-1">&lt;a class="lnlinks" href="#hl-4-1"> 1&lt;/a>
&lt;/span>&lt;span class="lnt" id="hl-4-2">&lt;a class="lnlinks" href="#hl-4-2"> 2&lt;/a>
&lt;/span>&lt;span class="lnt" id="hl-4-3">&lt;a class="lnlinks" href="#hl-4-3"> 3&lt;/a>
&lt;/span>&lt;span class="lnt" id="hl-4-4">&lt;a class="lnlinks" href="#hl-4-4"> 4&lt;/a>
&lt;/span>&lt;span class="lnt" id="hl-4-5">&lt;a class="lnlinks" href="#hl-4-5"> 5&lt;/a>
&lt;/span>&lt;span class="lnt" id="hl-4-6">&lt;a class="lnlinks" href="#hl-4-6"> 6&lt;/a>
&lt;/span>&lt;span class="lnt" id="hl-4-7">&lt;a class="lnlinks" href="#hl-4-7"> 7&lt;/a>
&lt;/span>&lt;span class="lnt" id="hl-4-8">&lt;a class="lnlinks" href="#hl-4-8"> 8&lt;/a>
&lt;/span>&lt;span class="lnt" id="hl-4-9">&lt;a class="lnlinks" href="#hl-4-9"> 9&lt;/a>
&lt;/span>&lt;span class="lnt" id="hl-4-10">&lt;a class="lnlinks" href="#hl-4-10">10&lt;/a>
&lt;/span>&lt;span class="lnt" id="hl-4-11">&lt;a class="lnlinks" href="#hl-4-11">11&lt;/a>
&lt;/span>&lt;span class="lnt" id="hl-4-12">&lt;a class="lnlinks" href="#hl-4-12">12&lt;/a>
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-js" data-lang="js">&lt;span class="line">&lt;span class="cl">&lt;span class="kd">function&lt;/span> &lt;span class="nx">throttle&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="nx">fn&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="nx">delay&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="mi">200&lt;/span>&lt;span class="p">)&lt;/span> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="kd">let&lt;/span> &lt;span class="nx">flag&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="kc">true&lt;/span>&lt;span class="p">;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">return&lt;/span> &lt;span class="kd">function&lt;/span> &lt;span class="p">()&lt;/span> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">if&lt;/span> &lt;span class="p">(&lt;/span>&lt;span class="o">!&lt;/span>&lt;span class="nx">flag&lt;/span>&lt;span class="p">)&lt;/span> &lt;span class="k">return&lt;/span>&lt;span class="p">;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">flag&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="kc">false&lt;/span>&lt;span class="p">;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="kr">const&lt;/span> &lt;span class="nx">args&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="nx">arguments&lt;/span>&lt;span class="p">;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">setTimeout&lt;/span>&lt;span class="p">(()&lt;/span> &lt;span class="p">=&amp;gt;&lt;/span> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">fn&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">apply&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="k">this&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="nx">args&lt;/span>&lt;span class="p">);&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">flag&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="kc">true&lt;/span>&lt;span class="p">;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">},&lt;/span> &lt;span class="nx">delay&lt;/span>&lt;span class="p">);&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">};&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="p">}&lt;/span>&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>
&lt;/div>
&lt;/div>
&lt;h2 id="实现数组去重" >实现数组去重
&lt;a hidden class="anchor" aria-hidden="true" href="#%e5%ae%9e%e7%8e%b0%e6%95%b0%e7%bb%84%e5%8e%bb%e9%87%8d">#&lt;/a>
&lt;/h2>
&lt;div class="codeBlock">
&lt;details open>
&lt;summary>
&lt;div class="oper">&lt;div class="status">&lt;/div>&lt;/div>
&lt;div class="title">js&lt;/div>
&lt;div class="oper">&lt;button class="codeCopy">复制&lt;/button>&lt;/div>
&lt;/summary>
&lt;/details>
&lt;div class="codeBlockContent">
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt" id="hl-5-1">&lt;a class="lnlinks" href="#hl-5-1"> 1&lt;/a>
&lt;/span>&lt;span class="lnt" id="hl-5-2">&lt;a class="lnlinks" href="#hl-5-2"> 2&lt;/a>
&lt;/span>&lt;span class="lnt" id="hl-5-3">&lt;a class="lnlinks" href="#hl-5-3"> 3&lt;/a>
&lt;/span>&lt;span class="lnt" id="hl-5-4">&lt;a class="lnlinks" href="#hl-5-4"> 4&lt;/a>
&lt;/span>&lt;span class="lnt" id="hl-5-5">&lt;a class="lnlinks" href="#hl-5-5"> 5&lt;/a>
&lt;/span>&lt;span class="lnt" id="hl-5-6">&lt;a class="lnlinks" href="#hl-5-6"> 6&lt;/a>
&lt;/span>&lt;span class="lnt" id="hl-5-7">&lt;a class="lnlinks" href="#hl-5-7"> 7&lt;/a>
&lt;/span>&lt;span class="lnt" id="hl-5-8">&lt;a class="lnlinks" href="#hl-5-8"> 8&lt;/a>
&lt;/span>&lt;span class="lnt" id="hl-5-9">&lt;a class="lnlinks" href="#hl-5-9"> 9&lt;/a>
&lt;/span>&lt;span class="lnt" id="hl-5-10">&lt;a class="lnlinks" href="#hl-5-10">10&lt;/a>
&lt;/span>&lt;span class="lnt" id="hl-5-11">&lt;a class="lnlinks" href="#hl-5-11">11&lt;/a>
&lt;/span>&lt;span class="lnt" id="hl-5-12">&lt;a class="lnlinks" href="#hl-5-12">12&lt;/a>
&lt;/span>&lt;span class="lnt" id="hl-5-13">&lt;a class="lnlinks" href="#hl-5-13">13&lt;/a>
&lt;/span>&lt;span class="lnt" id="hl-5-14">&lt;a class="lnlinks" href="#hl-5-14">14&lt;/a>
&lt;/span>&lt;span class="lnt" id="hl-5-15">&lt;a class="lnlinks" href="#hl-5-15">15&lt;/a>
&lt;/span>&lt;span class="lnt" id="hl-5-16">&lt;a class="lnlinks" href="#hl-5-16">16&lt;/a>
&lt;/span>&lt;span class="lnt" id="hl-5-17">&lt;a class="lnlinks" href="#hl-5-17">17&lt;/a>
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-js" data-lang="js">&lt;span class="line">&lt;span class="cl">&lt;span class="c1">// 第一种：Map记录
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">&lt;/span>&lt;span class="kd">function&lt;/span> &lt;span class="nx">quchong1&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="nx">arr&lt;/span>&lt;span class="p">)&lt;/span> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="kr">const&lt;/span> &lt;span class="nx">newArr&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="p">[];&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">arr&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">reduce&lt;/span>&lt;span class="p">((&lt;/span>&lt;span class="nx">pre&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="nx">next&lt;/span>&lt;span class="p">)&lt;/span> &lt;span class="p">=&amp;gt;&lt;/span> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">if&lt;/span> &lt;span class="p">(&lt;/span>&lt;span class="o">!&lt;/span>&lt;span class="nx">pre&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">has&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="nx">next&lt;/span>&lt;span class="p">))&lt;/span> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">pre&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">set&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="nx">next&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="mi">1&lt;/span>&lt;span class="p">);&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">newArr&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">push&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="nx">next&lt;/span>&lt;span class="p">);&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">return&lt;/span> &lt;span class="nx">pre&lt;/span>&lt;span class="p">;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">},&lt;/span> &lt;span class="k">new&lt;/span> &lt;span class="nx">Map&lt;/span>&lt;span class="p">());&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">return&lt;/span> &lt;span class="nx">newArr&lt;/span>&lt;span class="p">;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">// 第二种：Set去重
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">&lt;/span>&lt;span class="kd">function&lt;/span> &lt;span class="nx">quchong2&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="nx">arr&lt;/span>&lt;span class="p">)&lt;/span> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">return&lt;/span> &lt;span class="p">[...&lt;/span>&lt;span class="k">new&lt;/span> &lt;span class="nx">Set&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="nx">arr&lt;/span>&lt;span class="p">)];&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="p">}&lt;/span>&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>
&lt;/div>
&lt;/div>
&lt;h2 id="用-settimeout-实现-setinterval" >用 setTimeout 实现 setInterval
&lt;a hidden class="anchor" aria-hidden="true" href="#%e7%94%a8-settimeout-%e5%ae%9e%e7%8e%b0-setinterval">#&lt;/a>
&lt;/h2>
&lt;div class="codeBlock">
&lt;details open>
&lt;summary>
&lt;div class="oper">&lt;div class="status">&lt;/div>&lt;/div>
&lt;div class="title">js&lt;/div>
&lt;div class="oper">&lt;button class="codeCopy">复制&lt;/button>&lt;/div>
&lt;/summary>
&lt;/details>
&lt;div class="codeBlockContent">
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt" id="hl-6-1">&lt;a class="lnlinks" href="#hl-6-1"> 1&lt;/a>
&lt;/span>&lt;span class="lnt" id="hl-6-2">&lt;a class="lnlinks" href="#hl-6-2"> 2&lt;/a>
&lt;/span>&lt;span class="lnt" id="hl-6-3">&lt;a class="lnlinks" href="#hl-6-3"> 3&lt;/a>
&lt;/span>&lt;span class="lnt" id="hl-6-4">&lt;a class="lnlinks" href="#hl-6-4"> 4&lt;/a>
&lt;/span>&lt;span class="lnt" id="hl-6-5">&lt;a class="lnlinks" href="#hl-6-5"> 5&lt;/a>
&lt;/span>&lt;span class="lnt" id="hl-6-6">&lt;a class="lnlinks" href="#hl-6-6"> 6&lt;/a>
&lt;/span>&lt;span class="lnt" id="hl-6-7">&lt;a class="lnlinks" href="#hl-6-7"> 7&lt;/a>
&lt;/span>&lt;span class="lnt" id="hl-6-8">&lt;a class="lnlinks" href="#hl-6-8"> 8&lt;/a>
&lt;/span>&lt;span class="lnt" id="hl-6-9">&lt;a class="lnlinks" href="#hl-6-9"> 9&lt;/a>
&lt;/span>&lt;span class="lnt" id="hl-6-10">&lt;a class="lnlinks" href="#hl-6-10">10&lt;/a>
&lt;/span>&lt;span class="lnt" id="hl-6-11">&lt;a class="lnlinks" href="#hl-6-11">11&lt;/a>
&lt;/span>&lt;span class="lnt" id="hl-6-12">&lt;a class="lnlinks" href="#hl-6-12">12&lt;/a>
&lt;/span>&lt;span class="lnt" id="hl-6-13">&lt;a class="lnlinks" href="#hl-6-13">13&lt;/a>
&lt;/span>&lt;span class="lnt" id="hl-6-14">&lt;a class="lnlinks" href="#hl-6-14">14&lt;/a>
&lt;/span>&lt;span class="lnt" id="hl-6-15">&lt;a class="lnlinks" href="#hl-6-15">15&lt;/a>
&lt;/span>&lt;span class="lnt" id="hl-6-16">&lt;a class="lnlinks" href="#hl-6-16">16&lt;/a>
&lt;/span>&lt;span class="lnt" id="hl-6-17">&lt;a class="lnlinks" href="#hl-6-17">17&lt;/a>
&lt;/span>&lt;span class="lnt" id="hl-6-18">&lt;a class="lnlinks" href="#hl-6-18">18&lt;/a>
&lt;/span>&lt;span class="lnt" id="hl-6-19">&lt;a class="lnlinks" href="#hl-6-19">19&lt;/a>
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-js" data-lang="js">&lt;span class="line">&lt;span class="cl">&lt;span class="kd">function&lt;/span> &lt;span class="nx">mySetTimout&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="nx">fn&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="nx">delay&lt;/span>&lt;span class="p">)&lt;/span> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="kd">let&lt;/span> &lt;span class="nx">timer&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="kc">null&lt;/span>&lt;span class="p">;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="kr">const&lt;/span> &lt;span class="nx">interval&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="p">()&lt;/span> &lt;span class="p">=&amp;gt;&lt;/span> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">fn&lt;/span>&lt;span class="p">();&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">timer&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="nx">setTimeout&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="nx">interval&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="nx">delay&lt;/span>&lt;span class="p">);&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">};&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">setTimeout&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="nx">interval&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="nx">delay&lt;/span>&lt;span class="p">);&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">return&lt;/span> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">cancel&lt;/span>&lt;span class="o">:&lt;/span> &lt;span class="p">()&lt;/span> &lt;span class="p">=&amp;gt;&lt;/span> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">clearTimeout&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="nx">timer&lt;/span>&lt;span class="p">);&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">},&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">};&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">// 测试
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">&lt;/span>&lt;span class="kr">const&lt;/span> &lt;span class="p">{&lt;/span> &lt;span class="nx">cancel&lt;/span> &lt;span class="p">}&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="nx">mySetTimout&lt;/span>&lt;span class="p">(()&lt;/span> &lt;span class="p">=&amp;gt;&lt;/span> &lt;span class="nx">console&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">log&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="mi">888&lt;/span>&lt;span class="p">),&lt;/span> &lt;span class="mi">1000&lt;/span>&lt;span class="p">);&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="nx">setTimeout&lt;/span>&lt;span class="p">(()&lt;/span> &lt;span class="p">=&amp;gt;&lt;/span> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">cancel&lt;/span>&lt;span class="p">();&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="p">},&lt;/span> &lt;span class="mi">4000&lt;/span>&lt;span class="p">);&lt;/span>&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>
&lt;/div>
&lt;/div>
&lt;h2 id="用-setinterval-实现-settimeout" >用 setInterval 实现 setTimeout
&lt;a hidden class="anchor" aria-hidden="true" href="#%e7%94%a8-setinterval-%e5%ae%9e%e7%8e%b0-settimeout">#&lt;/a>
&lt;/h2>
&lt;div class="codeBlock">
&lt;details open>
&lt;summary>
&lt;div class="oper">&lt;div class="status">&lt;/div>&lt;/div>
&lt;div class="title">js&lt;/div>
&lt;div class="oper">&lt;button class="codeCopy">复制&lt;/button>&lt;/div>
&lt;/summary>
&lt;/details>
&lt;div class="codeBlockContent">
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt" id="hl-7-1">&lt;a class="lnlinks" href="#hl-7-1">1&lt;/a>
&lt;/span>&lt;span class="lnt" id="hl-7-2">&lt;a class="lnlinks" href="#hl-7-2">2&lt;/a>
&lt;/span>&lt;span class="lnt" id="hl-7-3">&lt;a class="lnlinks" href="#hl-7-3">3&lt;/a>
&lt;/span>&lt;span class="lnt" id="hl-7-4">&lt;a class="lnlinks" href="#hl-7-4">4&lt;/a>
&lt;/span>&lt;span class="lnt" id="hl-7-5">&lt;a class="lnlinks" href="#hl-7-5">5&lt;/a>
&lt;/span>&lt;span class="lnt" id="hl-7-6">&lt;a class="lnlinks" href="#hl-7-6">6&lt;/a>
&lt;/span>&lt;span class="lnt" id="hl-7-7">&lt;a class="lnlinks" href="#hl-7-7">7&lt;/a>
&lt;/span>&lt;span class="lnt" id="hl-7-8">&lt;a class="lnlinks" href="#hl-7-8">8&lt;/a>
&lt;/span>&lt;span class="lnt" id="hl-7-9">&lt;a class="lnlinks" href="#hl-7-9">9&lt;/a>
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-js" data-lang="js">&lt;span class="line">&lt;span class="cl">&lt;span class="kd">function&lt;/span> &lt;span class="nx">mySetInterval&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="nx">fn&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="nx">delay&lt;/span>&lt;span class="p">)&lt;/span> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="kr">const&lt;/span> &lt;span class="nx">timer&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="nx">setInterval&lt;/span>&lt;span class="p">(()&lt;/span> &lt;span class="p">=&amp;gt;&lt;/span> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">fn&lt;/span>&lt;span class="p">();&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">clearInterval&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="nx">timer&lt;/span>&lt;span class="p">);&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">},&lt;/span> &lt;span class="nx">delay&lt;/span>&lt;span class="p">);&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">// 测试
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">&lt;/span>&lt;span class="nx">mySetInterval&lt;/span>&lt;span class="p">(()&lt;/span> &lt;span class="p">=&amp;gt;&lt;/span> &lt;span class="nx">console&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">log&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="mi">888&lt;/span>&lt;span class="p">),&lt;/span> &lt;span class="mi">1000&lt;/span>&lt;span class="p">);&lt;/span>&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>
&lt;/div>
&lt;/div>
&lt;h2 id="实现一个-compose-函数" >实现一个 compose 函数
&lt;a hidden class="anchor" aria-hidden="true" href="#%e5%ae%9e%e7%8e%b0%e4%b8%80%e4%b8%aa-compose-%e5%87%bd%e6%95%b0">#&lt;/a>
&lt;/h2>
&lt;div class="codeBlock">
&lt;details open>
&lt;summary>
&lt;div class="oper">&lt;div class="status">&lt;/div>&lt;/div>
&lt;div class="title">js&lt;/div>
&lt;div class="oper">&lt;button class="codeCopy">复制&lt;/button>&lt;/div>
&lt;/summary>
&lt;/details>
&lt;div class="codeBlockContent">
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt" id="hl-8-1">&lt;a class="lnlinks" href="#hl-8-1"> 1&lt;/a>
&lt;/span>&lt;span class="lnt" id="hl-8-2">&lt;a class="lnlinks" href="#hl-8-2"> 2&lt;/a>
&lt;/span>&lt;span class="lnt" id="hl-8-3">&lt;a class="lnlinks" href="#hl-8-3"> 3&lt;/a>
&lt;/span>&lt;span class="lnt" id="hl-8-4">&lt;a class="lnlinks" href="#hl-8-4"> 4&lt;/a>
&lt;/span>&lt;span class="lnt" id="hl-8-5">&lt;a class="lnlinks" href="#hl-8-5"> 5&lt;/a>
&lt;/span>&lt;span class="lnt" id="hl-8-6">&lt;a class="lnlinks" href="#hl-8-6"> 6&lt;/a>
&lt;/span>&lt;span class="lnt" id="hl-8-7">&lt;a class="lnlinks" href="#hl-8-7"> 7&lt;/a>
&lt;/span>&lt;span class="lnt" id="hl-8-8">&lt;a class="lnlinks" href="#hl-8-8"> 8&lt;/a>
&lt;/span>&lt;span class="lnt" id="hl-8-9">&lt;a class="lnlinks" href="#hl-8-9"> 9&lt;/a>
&lt;/span>&lt;span class="lnt" id="hl-8-10">&lt;a class="lnlinks" href="#hl-8-10">10&lt;/a>
&lt;/span>&lt;span class="lnt" id="hl-8-11">&lt;a class="lnlinks" href="#hl-8-11">11&lt;/a>
&lt;/span>&lt;span class="lnt" id="hl-8-12">&lt;a class="lnlinks" href="#hl-8-12">12&lt;/a>
&lt;/span>&lt;span class="lnt" id="hl-8-13">&lt;a class="lnlinks" href="#hl-8-13">13&lt;/a>
&lt;/span>&lt;span class="lnt" id="hl-8-14">&lt;a class="lnlinks" href="#hl-8-14">14&lt;/a>
&lt;/span>&lt;span class="lnt" id="hl-8-15">&lt;a class="lnlinks" href="#hl-8-15">15&lt;/a>
&lt;/span>&lt;span class="lnt" id="hl-8-16">&lt;a class="lnlinks" href="#hl-8-16">16&lt;/a>
&lt;/span>&lt;span class="lnt" id="hl-8-17">&lt;a class="lnlinks" href="#hl-8-17">17&lt;/a>
&lt;/span>&lt;span class="lnt" id="hl-8-18">&lt;a class="lnlinks" href="#hl-8-18">18&lt;/a>
&lt;/span>&lt;span class="lnt" id="hl-8-19">&lt;a class="lnlinks" href="#hl-8-19">19&lt;/a>
&lt;/span>&lt;span class="lnt" id="hl-8-20">&lt;a class="lnlinks" href="#hl-8-20">20&lt;/a>
&lt;/span>&lt;span class="lnt" id="hl-8-21">&lt;a class="lnlinks" href="#hl-8-21">21&lt;/a>
&lt;/span>&lt;span class="lnt" id="hl-8-22">&lt;a class="lnlinks" href="#hl-8-22">22&lt;/a>
&lt;/span>&lt;span class="lnt" id="hl-8-23">&lt;a class="lnlinks" href="#hl-8-23">23&lt;/a>
&lt;/span>&lt;span class="lnt" id="hl-8-24">&lt;a class="lnlinks" href="#hl-8-24">24&lt;/a>
&lt;/span>&lt;span class="lnt" id="hl-8-25">&lt;a class="lnlinks" href="#hl-8-25">25&lt;/a>
&lt;/span>&lt;span class="lnt" id="hl-8-26">&lt;a class="lnlinks" href="#hl-8-26">26&lt;/a>
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-js" data-lang="js">&lt;span class="line">&lt;span class="cl">&lt;span class="kd">function&lt;/span> &lt;span class="nx">fn1&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="nx">x&lt;/span>&lt;span class="p">)&lt;/span> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">return&lt;/span> &lt;span class="nx">x&lt;/span> &lt;span class="o">+&lt;/span> &lt;span class="mi">1&lt;/span>&lt;span class="p">;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="kd">function&lt;/span> &lt;span class="nx">fn2&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="nx">x&lt;/span>&lt;span class="p">)&lt;/span> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">return&lt;/span> &lt;span class="nx">x&lt;/span> &lt;span class="o">+&lt;/span> &lt;span class="mi">2&lt;/span>&lt;span class="p">;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="kd">function&lt;/span> &lt;span class="nx">fn3&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="nx">x&lt;/span>&lt;span class="p">)&lt;/span> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">return&lt;/span> &lt;span class="nx">x&lt;/span> &lt;span class="o">+&lt;/span> &lt;span class="mi">3&lt;/span>&lt;span class="p">;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="kd">function&lt;/span> &lt;span class="nx">fn4&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="nx">x&lt;/span>&lt;span class="p">)&lt;/span> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">return&lt;/span> &lt;span class="nx">x&lt;/span> &lt;span class="o">+&lt;/span> &lt;span class="mi">4&lt;/span>&lt;span class="p">;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="kr">const&lt;/span> &lt;span class="nx">a&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="nx">compose&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="nx">fn1&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="nx">fn2&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="nx">fn3&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="nx">fn4&lt;/span>&lt;span class="p">);&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="nx">console&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">log&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="nx">a&lt;/span>&lt;span class="p">);&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="nx">console&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">log&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="nx">a&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="mi">1&lt;/span>&lt;span class="p">));&lt;/span> &lt;span class="c1">// 1+2+3+4=11
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">// 实现如下：
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">&lt;/span>&lt;span class="kd">function&lt;/span> &lt;span class="nx">compose&lt;/span>&lt;span class="p">(...&lt;/span>&lt;span class="nx">fn&lt;/span>&lt;span class="p">)&lt;/span> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">if&lt;/span> &lt;span class="p">(&lt;/span>&lt;span class="nx">fn&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">length&lt;/span> &lt;span class="o">===&lt;/span> &lt;span class="mi">0&lt;/span>&lt;span class="p">)&lt;/span> &lt;span class="k">return&lt;/span> &lt;span class="p">(&lt;/span>&lt;span class="nx">num&lt;/span>&lt;span class="p">)&lt;/span> &lt;span class="p">=&amp;gt;&lt;/span> &lt;span class="nx">num&lt;/span>&lt;span class="p">;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">if&lt;/span> &lt;span class="p">(&lt;/span>&lt;span class="nx">fn&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">length&lt;/span> &lt;span class="o">===&lt;/span> &lt;span class="mi">1&lt;/span>&lt;span class="p">)&lt;/span> &lt;span class="k">return&lt;/span> &lt;span class="nx">fn&lt;/span>&lt;span class="p">[&lt;/span>&lt;span class="mi">0&lt;/span>&lt;span class="p">];&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">return&lt;/span> &lt;span class="nx">fn&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">reduce&lt;/span>&lt;span class="p">((&lt;/span>&lt;span class="nx">pre&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="nx">next&lt;/span>&lt;span class="p">)&lt;/span> &lt;span class="p">=&amp;gt;&lt;/span> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">return&lt;/span> &lt;span class="p">(&lt;/span>&lt;span class="nx">num&lt;/span>&lt;span class="p">)&lt;/span> &lt;span class="p">=&amp;gt;&lt;/span> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">return&lt;/span> &lt;span class="nx">next&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="nx">pre&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="nx">num&lt;/span>&lt;span class="p">));&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">};&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">});&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="p">}&lt;/span>&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>
&lt;/div>
&lt;/div>
&lt;h2 id="实现一个科里化函数" >实现一个科里化函数
&lt;a hidden class="anchor" aria-hidden="true" href="#%e5%ae%9e%e7%8e%b0%e4%b8%80%e4%b8%aa%e7%a7%91%e9%87%8c%e5%8c%96%e5%87%bd%e6%95%b0">#&lt;/a>
&lt;/h2>
&lt;div class="codeBlock">
&lt;details open>
&lt;summary>
&lt;div class="oper">&lt;div class="status">&lt;/div>&lt;/div>
&lt;div class="title">js&lt;/div>
&lt;div class="oper">&lt;button class="codeCopy">复制&lt;/button>&lt;/div>
&lt;/summary>
&lt;/details>
&lt;div class="codeBlockContent">
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt" id="hl-9-1">&lt;a class="lnlinks" href="#hl-9-1"> 1&lt;/a>
&lt;/span>&lt;span class="lnt" id="hl-9-2">&lt;a class="lnlinks" href="#hl-9-2"> 2&lt;/a>
&lt;/span>&lt;span class="lnt" id="hl-9-3">&lt;a class="lnlinks" href="#hl-9-3"> 3&lt;/a>
&lt;/span>&lt;span class="lnt" id="hl-9-4">&lt;a class="lnlinks" href="#hl-9-4"> 4&lt;/a>
&lt;/span>&lt;span class="lnt" id="hl-9-5">&lt;a class="lnlinks" href="#hl-9-5"> 5&lt;/a>
&lt;/span>&lt;span class="lnt" id="hl-9-6">&lt;a class="lnlinks" href="#hl-9-6"> 6&lt;/a>
&lt;/span>&lt;span class="lnt" id="hl-9-7">&lt;a class="lnlinks" href="#hl-9-7"> 7&lt;/a>
&lt;/span>&lt;span class="lnt" id="hl-9-8">&lt;a class="lnlinks" href="#hl-9-8"> 8&lt;/a>
&lt;/span>&lt;span class="lnt" id="hl-9-9">&lt;a class="lnlinks" href="#hl-9-9"> 9&lt;/a>
&lt;/span>&lt;span class="lnt" id="hl-9-10">&lt;a class="lnlinks" href="#hl-9-10">10&lt;/a>
&lt;/span>&lt;span class="lnt" id="hl-9-11">&lt;a class="lnlinks" href="#hl-9-11">11&lt;/a>
&lt;/span>&lt;span class="lnt" id="hl-9-12">&lt;a class="lnlinks" href="#hl-9-12">12&lt;/a>
&lt;/span>&lt;span class="lnt" id="hl-9-13">&lt;a class="lnlinks" href="#hl-9-13">13&lt;/a>
&lt;/span>&lt;span class="lnt" id="hl-9-14">&lt;a class="lnlinks" href="#hl-9-14">14&lt;/a>
&lt;/span>&lt;span class="lnt" id="hl-9-15">&lt;a class="lnlinks" href="#hl-9-15">15&lt;/a>
&lt;/span>&lt;span class="lnt" id="hl-9-16">&lt;a class="lnlinks" href="#hl-9-16">16&lt;/a>
&lt;/span>&lt;span class="lnt" id="hl-9-17">&lt;a class="lnlinks" href="#hl-9-17">17&lt;/a>
&lt;/span>&lt;span class="lnt" id="hl-9-18">&lt;a class="lnlinks" href="#hl-9-18">18&lt;/a>
&lt;/span>&lt;span class="lnt" id="hl-9-19">&lt;a class="lnlinks" href="#hl-9-19">19&lt;/a>
&lt;/span>&lt;span class="lnt" id="hl-9-20">&lt;a class="lnlinks" href="#hl-9-20">20&lt;/a>
&lt;/span>&lt;span class="lnt" id="hl-9-21">&lt;a class="lnlinks" href="#hl-9-21">21&lt;/a>
&lt;/span>&lt;span class="lnt" id="hl-9-22">&lt;a class="lnlinks" href="#hl-9-22">22&lt;/a>
&lt;/span>&lt;span class="lnt" id="hl-9-23">&lt;a class="lnlinks" href="#hl-9-23">23&lt;/a>
&lt;/span>&lt;span class="lnt" id="hl-9-24">&lt;a class="lnlinks" href="#hl-9-24">24&lt;/a>
&lt;/span>&lt;span class="lnt" id="hl-9-25">&lt;a class="lnlinks" href="#hl-9-25">25&lt;/a>
&lt;/span>&lt;span class="lnt" id="hl-9-26">&lt;a class="lnlinks" href="#hl-9-26">26&lt;/a>
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-js" data-lang="js">&lt;span class="line">&lt;span class="cl">&lt;span class="kr">const&lt;/span> &lt;span class="nx">add&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="p">(&lt;/span>&lt;span class="nx">a&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="nx">b&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="nx">c&lt;/span>&lt;span class="p">)&lt;/span> &lt;span class="p">=&amp;gt;&lt;/span> &lt;span class="nx">a&lt;/span> &lt;span class="o">+&lt;/span> &lt;span class="nx">b&lt;/span> &lt;span class="o">+&lt;/span> &lt;span class="nx">c&lt;/span>&lt;span class="p">;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="kr">const&lt;/span> &lt;span class="nx">a&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="nx">currying&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="nx">add&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="mi">1&lt;/span>&lt;span class="p">);&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="nx">console&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">log&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="nx">a&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="mi">2&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="mi">3&lt;/span>&lt;span class="p">));&lt;/span> &lt;span class="c1">// 1 + 2 + 3=6
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">// 实现如下：
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">&lt;/span>&lt;span class="kd">function&lt;/span> &lt;span class="nx">currying&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="nx">fn&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="p">...&lt;/span>&lt;span class="nx">args1&lt;/span>&lt;span class="p">)&lt;/span> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="c1">// 获取fn参数有几个
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">&lt;/span> &lt;span class="kr">const&lt;/span> &lt;span class="nx">length&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="nx">fn&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">length&lt;/span>&lt;span class="p">;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="kd">let&lt;/span> &lt;span class="nx">allArgs&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="p">[...&lt;/span>&lt;span class="nx">args1&lt;/span>&lt;span class="p">];&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="kr">const&lt;/span> &lt;span class="nx">res&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="p">(...&lt;/span>&lt;span class="nx">arg2&lt;/span>&lt;span class="p">)&lt;/span> &lt;span class="p">=&amp;gt;&lt;/span> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">allArgs&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="p">[...&lt;/span>&lt;span class="nx">allArgs&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="p">...&lt;/span>&lt;span class="nx">arg2&lt;/span>&lt;span class="p">];&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="c1">// 长度相等就返回执行结果
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">&lt;/span> &lt;span class="k">if&lt;/span> &lt;span class="p">(&lt;/span>&lt;span class="nx">allArgs&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">length&lt;/span> &lt;span class="o">===&lt;/span> &lt;span class="nx">length&lt;/span>&lt;span class="p">)&lt;/span> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">return&lt;/span> &lt;span class="nx">fn&lt;/span>&lt;span class="p">(...&lt;/span>&lt;span class="nx">allArgs&lt;/span>&lt;span class="p">);&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">}&lt;/span> &lt;span class="k">else&lt;/span> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="c1">// 不相等继续返回函数
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">&lt;/span> &lt;span class="k">return&lt;/span> &lt;span class="nx">res&lt;/span>&lt;span class="p">;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">};&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">return&lt;/span> &lt;span class="nx">res&lt;/span>&lt;span class="p">;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">// 测试：
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">&lt;/span>&lt;span class="kr">const&lt;/span> &lt;span class="nx">add&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="p">(&lt;/span>&lt;span class="nx">a&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="nx">b&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="nx">c&lt;/span>&lt;span class="p">)&lt;/span> &lt;span class="p">=&amp;gt;&lt;/span> &lt;span class="nx">a&lt;/span> &lt;span class="o">+&lt;/span> &lt;span class="nx">b&lt;/span> &lt;span class="o">+&lt;/span> &lt;span class="nx">c&lt;/span>&lt;span class="p">;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="kr">const&lt;/span> &lt;span class="nx">a&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="nx">currying&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="nx">add&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="mi">1&lt;/span>&lt;span class="p">);&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="nx">console&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">log&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="nx">a&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="mi">2&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="mi">3&lt;/span>&lt;span class="p">));&lt;/span>&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>
&lt;/div>
&lt;/div>
&lt;h2 id="实现一个-lru-缓存函数" >实现一个 LRU 缓存函数
&lt;a hidden class="anchor" aria-hidden="true" href="#%e5%ae%9e%e7%8e%b0%e4%b8%80%e4%b8%aa-lru-%e7%bc%93%e5%ad%98%e5%87%bd%e6%95%b0">#&lt;/a>
&lt;/h2>
&lt;div class="codeBlock">
&lt;details open>
&lt;summary>
&lt;div class="oper">&lt;div class="status">&lt;/div>&lt;/div>
&lt;div class="title">js&lt;/div>
&lt;div class="oper">&lt;button class="codeCopy">复制&lt;/button>&lt;/div>
&lt;/summary>
&lt;/details>
&lt;div class="codeBlockContent">
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt" id="hl-10-1">&lt;a class="lnlinks" href="#hl-10-1"> 1&lt;/a>
&lt;/span>&lt;span class="lnt" id="hl-10-2">&lt;a class="lnlinks" href="#hl-10-2"> 2&lt;/a>
&lt;/span>&lt;span class="lnt" id="hl-10-3">&lt;a class="lnlinks" href="#hl-10-3"> 3&lt;/a>
&lt;/span>&lt;span class="lnt" id="hl-10-4">&lt;a class="lnlinks" href="#hl-10-4"> 4&lt;/a>
&lt;/span>&lt;span class="lnt" id="hl-10-5">&lt;a class="lnlinks" href="#hl-10-5"> 5&lt;/a>
&lt;/span>&lt;span class="lnt" id="hl-10-6">&lt;a class="lnlinks" href="#hl-10-6"> 6&lt;/a>
&lt;/span>&lt;span class="lnt" id="hl-10-7">&lt;a class="lnlinks" href="#hl-10-7"> 7&lt;/a>
&lt;/span>&lt;span class="lnt" id="hl-10-8">&lt;a class="lnlinks" href="#hl-10-8"> 8&lt;/a>
&lt;/span>&lt;span class="lnt" id="hl-10-9">&lt;a class="lnlinks" href="#hl-10-9"> 9&lt;/a>
&lt;/span>&lt;span class="lnt" id="hl-10-10">&lt;a class="lnlinks" href="#hl-10-10">10&lt;/a>
&lt;/span>&lt;span class="lnt" id="hl-10-11">&lt;a class="lnlinks" href="#hl-10-11">11&lt;/a>
&lt;/span>&lt;span class="lnt" id="hl-10-12">&lt;a class="lnlinks" href="#hl-10-12">12&lt;/a>
&lt;/span>&lt;span class="lnt" id="hl-10-13">&lt;a class="lnlinks" href="#hl-10-13">13&lt;/a>
&lt;/span>&lt;span class="lnt" id="hl-10-14">&lt;a class="lnlinks" href="#hl-10-14">14&lt;/a>
&lt;/span>&lt;span class="lnt" id="hl-10-15">&lt;a class="lnlinks" href="#hl-10-15">15&lt;/a>
&lt;/span>&lt;span class="lnt" id="hl-10-16">&lt;a class="lnlinks" href="#hl-10-16">16&lt;/a>
&lt;/span>&lt;span class="lnt" id="hl-10-17">&lt;a class="lnlinks" href="#hl-10-17">17&lt;/a>
&lt;/span>&lt;span class="lnt" id="hl-10-18">&lt;a class="lnlinks" href="#hl-10-18">18&lt;/a>
&lt;/span>&lt;span class="lnt" id="hl-10-19">&lt;a class="lnlinks" href="#hl-10-19">19&lt;/a>
&lt;/span>&lt;span class="lnt" id="hl-10-20">&lt;a class="lnlinks" href="#hl-10-20">20&lt;/a>
&lt;/span>&lt;span class="lnt" id="hl-10-21">&lt;a class="lnlinks" href="#hl-10-21">21&lt;/a>
&lt;/span>&lt;span class="lnt" id="hl-10-22">&lt;a class="lnlinks" href="#hl-10-22">22&lt;/a>
&lt;/span>&lt;span class="lnt" id="hl-10-23">&lt;a class="lnlinks" href="#hl-10-23">23&lt;/a>
&lt;/span>&lt;span class="lnt" id="hl-10-24">&lt;a class="lnlinks" href="#hl-10-24">24&lt;/a>
&lt;/span>&lt;span class="lnt" id="hl-10-25">&lt;a class="lnlinks" href="#hl-10-25">25&lt;/a>
&lt;/span>&lt;span class="lnt" id="hl-10-26">&lt;a class="lnlinks" href="#hl-10-26">26&lt;/a>
&lt;/span>&lt;span class="lnt" id="hl-10-27">&lt;a class="lnlinks" href="#hl-10-27">27&lt;/a>
&lt;/span>&lt;span class="lnt" id="hl-10-28">&lt;a class="lnlinks" href="#hl-10-28">28&lt;/a>
&lt;/span>&lt;span class="lnt" id="hl-10-29">&lt;a class="lnlinks" href="#hl-10-29">29&lt;/a>
&lt;/span>&lt;span class="lnt" id="hl-10-30">&lt;a class="lnlinks" href="#hl-10-30">30&lt;/a>
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-js" data-lang="js">&lt;span class="line">&lt;span class="cl">&lt;span class="c1">// 实现如下：
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">&lt;/span>&lt;span class="kr">class&lt;/span> &lt;span class="nx">LRUCache&lt;/span> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">constructor&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="nx">size&lt;/span>&lt;span class="p">)&lt;/span> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">this&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">size&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="nx">size&lt;/span>&lt;span class="p">;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">this&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">cache&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="k">new&lt;/span> &lt;span class="nx">Map&lt;/span>&lt;span class="p">();&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">get&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="nx">key&lt;/span>&lt;span class="p">)&lt;/span> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="kr">const&lt;/span> &lt;span class="nx">hasKey&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="k">this&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">cache&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">has&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="nx">key&lt;/span>&lt;span class="p">);&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">if&lt;/span> &lt;span class="p">(&lt;/span>&lt;span class="nx">hasKey&lt;/span>&lt;span class="p">)&lt;/span> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="kr">const&lt;/span> &lt;span class="nx">val&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="k">this&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">cache&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">get&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="nx">key&lt;/span>&lt;span class="p">);&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">this&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">cache&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="k">delete&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="nx">key&lt;/span>&lt;span class="p">);&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">this&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">cache&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">set&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="nx">key&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="nx">val&lt;/span>&lt;span class="p">);&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">return&lt;/span> &lt;span class="nx">val&lt;/span>&lt;span class="p">;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">}&lt;/span> &lt;span class="k">else&lt;/span> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">return&lt;/span> &lt;span class="o">-&lt;/span>&lt;span class="mi">1&lt;/span>&lt;span class="p">;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">put&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="nx">key&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="nx">val&lt;/span>&lt;span class="p">)&lt;/span> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="kr">const&lt;/span> &lt;span class="nx">hasKey&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="k">this&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">cache&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">has&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="nx">key&lt;/span>&lt;span class="p">);&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">if&lt;/span> &lt;span class="p">(&lt;/span>&lt;span class="nx">hasKey&lt;/span>&lt;span class="p">)&lt;/span> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">this&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">cache&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="k">delete&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="nx">key&lt;/span>&lt;span class="p">);&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">this&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">cache&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">set&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="nx">key&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="nx">val&lt;/span>&lt;span class="p">);&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">if&lt;/span> &lt;span class="p">(&lt;/span>&lt;span class="k">this&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">cache&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">size&lt;/span> &lt;span class="o">&amp;gt;&lt;/span> &lt;span class="k">this&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">size&lt;/span>&lt;span class="p">)&lt;/span> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">this&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">cache&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="k">delete&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="k">this&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">cache&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">keys&lt;/span>&lt;span class="p">().&lt;/span>&lt;span class="nx">next&lt;/span>&lt;span class="p">().&lt;/span>&lt;span class="nx">value&lt;/span>&lt;span class="p">);&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="p">}&lt;/span>&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>
&lt;/div>
&lt;/div>
&lt;h2 id="简单实现-发布订阅模式" >简单实现 发布订阅模式
&lt;a hidden class="anchor" aria-hidden="true" href="#%e7%ae%80%e5%8d%95%e5%ae%9e%e7%8e%b0-%e5%8f%91%e5%b8%83%e8%ae%a2%e9%98%85%e6%a8%a1%e5%bc%8f">#&lt;/a>
&lt;/h2>
&lt;div class="codeBlock">
&lt;details open>
&lt;summary>
&lt;div class="oper">&lt;div class="status">&lt;/div>&lt;/div>
&lt;div class="title">js&lt;/div>
&lt;div class="oper">&lt;button class="codeCopy">复制&lt;/button>&lt;/div>
&lt;/summary>
&lt;/details>
&lt;div class="codeBlockContent">
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt" id="hl-11-1">&lt;a class="lnlinks" href="#hl-11-1"> 1&lt;/a>
&lt;/span>&lt;span class="lnt" id="hl-11-2">&lt;a class="lnlinks" href="#hl-11-2"> 2&lt;/a>
&lt;/span>&lt;span class="lnt" id="hl-11-3">&lt;a class="lnlinks" href="#hl-11-3"> 3&lt;/a>
&lt;/span>&lt;span class="lnt" id="hl-11-4">&lt;a class="lnlinks" href="#hl-11-4"> 4&lt;/a>
&lt;/span>&lt;span class="lnt" id="hl-11-5">&lt;a class="lnlinks" href="#hl-11-5"> 5&lt;/a>
&lt;/span>&lt;span class="lnt" id="hl-11-6">&lt;a class="lnlinks" href="#hl-11-6"> 6&lt;/a>
&lt;/span>&lt;span class="lnt" id="hl-11-7">&lt;a class="lnlinks" href="#hl-11-7"> 7&lt;/a>
&lt;/span>&lt;span class="lnt" id="hl-11-8">&lt;a class="lnlinks" href="#hl-11-8"> 8&lt;/a>
&lt;/span>&lt;span class="lnt" id="hl-11-9">&lt;a class="lnlinks" href="#hl-11-9"> 9&lt;/a>
&lt;/span>&lt;span class="lnt" id="hl-11-10">&lt;a class="lnlinks" href="#hl-11-10">10&lt;/a>
&lt;/span>&lt;span class="lnt" id="hl-11-11">&lt;a class="lnlinks" href="#hl-11-11">11&lt;/a>
&lt;/span>&lt;span class="lnt" id="hl-11-12">&lt;a class="lnlinks" href="#hl-11-12">12&lt;/a>
&lt;/span>&lt;span class="lnt" id="hl-11-13">&lt;a class="lnlinks" href="#hl-11-13">13&lt;/a>
&lt;/span>&lt;span class="lnt" id="hl-11-14">&lt;a class="lnlinks" href="#hl-11-14">14&lt;/a>
&lt;/span>&lt;span class="lnt" id="hl-11-15">&lt;a class="lnlinks" href="#hl-11-15">15&lt;/a>
&lt;/span>&lt;span class="lnt" id="hl-11-16">&lt;a class="lnlinks" href="#hl-11-16">16&lt;/a>
&lt;/span>&lt;span class="lnt" id="hl-11-17">&lt;a class="lnlinks" href="#hl-11-17">17&lt;/a>
&lt;/span>&lt;span class="lnt" id="hl-11-18">&lt;a class="lnlinks" href="#hl-11-18">18&lt;/a>
&lt;/span>&lt;span class="lnt" id="hl-11-19">&lt;a class="lnlinks" href="#hl-11-19">19&lt;/a>
&lt;/span>&lt;span class="lnt" id="hl-11-20">&lt;a class="lnlinks" href="#hl-11-20">20&lt;/a>
&lt;/span>&lt;span class="lnt" id="hl-11-21">&lt;a class="lnlinks" href="#hl-11-21">21&lt;/a>
&lt;/span>&lt;span class="lnt" id="hl-11-22">&lt;a class="lnlinks" href="#hl-11-22">22&lt;/a>
&lt;/span>&lt;span class="lnt" id="hl-11-23">&lt;a class="lnlinks" href="#hl-11-23">23&lt;/a>
&lt;/span>&lt;span class="lnt" id="hl-11-24">&lt;a class="lnlinks" href="#hl-11-24">24&lt;/a>
&lt;/span>&lt;span class="lnt" id="hl-11-25">&lt;a class="lnlinks" href="#hl-11-25">25&lt;/a>
&lt;/span>&lt;span class="lnt" id="hl-11-26">&lt;a class="lnlinks" href="#hl-11-26">26&lt;/a>
&lt;/span>&lt;span class="lnt" id="hl-11-27">&lt;a class="lnlinks" href="#hl-11-27">27&lt;/a>
&lt;/span>&lt;span class="lnt" id="hl-11-28">&lt;a class="lnlinks" href="#hl-11-28">28&lt;/a>
&lt;/span>&lt;span class="lnt" id="hl-11-29">&lt;a class="lnlinks" href="#hl-11-29">29&lt;/a>
&lt;/span>&lt;span class="lnt" id="hl-11-30">&lt;a class="lnlinks" href="#hl-11-30">30&lt;/a>
&lt;/span>&lt;span class="lnt" id="hl-11-31">&lt;a class="lnlinks" href="#hl-11-31">31&lt;/a>
&lt;/span>&lt;span class="lnt" id="hl-11-32">&lt;a class="lnlinks" href="#hl-11-32">32&lt;/a>
&lt;/span>&lt;span class="lnt" id="hl-11-33">&lt;a class="lnlinks" href="#hl-11-33">33&lt;/a>
&lt;/span>&lt;span class="lnt" id="hl-11-34">&lt;a class="lnlinks" href="#hl-11-34">34&lt;/a>
&lt;/span>&lt;span class="lnt" id="hl-11-35">&lt;a class="lnlinks" href="#hl-11-35">35&lt;/a>
&lt;/span>&lt;span class="lnt" id="hl-11-36">&lt;a class="lnlinks" href="#hl-11-36">36&lt;/a>
&lt;/span>&lt;span class="lnt" id="hl-11-37">&lt;a class="lnlinks" href="#hl-11-37">37&lt;/a>
&lt;/span>&lt;span class="lnt" id="hl-11-38">&lt;a class="lnlinks" href="#hl-11-38">38&lt;/a>
&lt;/span>&lt;span class="lnt" id="hl-11-39">&lt;a class="lnlinks" href="#hl-11-39">39&lt;/a>
&lt;/span>&lt;span class="lnt" id="hl-11-40">&lt;a class="lnlinks" href="#hl-11-40">40&lt;/a>
&lt;/span>&lt;span class="lnt" id="hl-11-41">&lt;a class="lnlinks" href="#hl-11-41">41&lt;/a>
&lt;/span>&lt;span class="lnt" id="hl-11-42">&lt;a class="lnlinks" href="#hl-11-42">42&lt;/a>
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-js" data-lang="js">&lt;span class="line">&lt;span class="cl">&lt;span class="kr">class&lt;/span> &lt;span class="nx">EventEmitter&lt;/span> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">constructor&lt;/span>&lt;span class="p">()&lt;/span> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">this&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">cache&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="p">{};&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">on&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="nx">name&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="nx">fn&lt;/span>&lt;span class="p">)&lt;/span> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="kr">const&lt;/span> &lt;span class="nx">tasks&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="k">this&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">cache&lt;/span>&lt;span class="p">[&lt;/span>&lt;span class="nx">name&lt;/span>&lt;span class="p">];&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">if&lt;/span> &lt;span class="p">(&lt;/span>&lt;span class="nx">tasks&lt;/span>&lt;span class="p">)&lt;/span> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">this&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">cache&lt;/span>&lt;span class="p">[&lt;/span>&lt;span class="nx">name&lt;/span>&lt;span class="p">].&lt;/span>&lt;span class="nx">push&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="nx">fn&lt;/span>&lt;span class="p">);&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">}&lt;/span> &lt;span class="k">else&lt;/span> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">this&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">cache&lt;/span>&lt;span class="p">[&lt;/span>&lt;span class="nx">name&lt;/span>&lt;span class="p">]&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="p">[&lt;/span>&lt;span class="nx">fn&lt;/span>&lt;span class="p">];&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">off&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="nx">name&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="nx">fn&lt;/span>&lt;span class="p">)&lt;/span> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="kr">const&lt;/span> &lt;span class="nx">tasks&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="k">this&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">cache&lt;/span>&lt;span class="p">[&lt;/span>&lt;span class="nx">name&lt;/span>&lt;span class="p">];&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">if&lt;/span> &lt;span class="p">(&lt;/span>&lt;span class="nx">task&lt;/span>&lt;span class="p">)&lt;/span> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="kr">const&lt;/span> &lt;span class="nx">index&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="nx">tasks&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">findIndex&lt;/span>&lt;span class="p">((&lt;/span>&lt;span class="nx">item&lt;/span>&lt;span class="p">)&lt;/span> &lt;span class="p">=&amp;gt;&lt;/span> &lt;span class="nx">item&lt;/span> &lt;span class="o">===&lt;/span> &lt;span class="nx">fn&lt;/span>&lt;span class="p">);&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">if&lt;/span> &lt;span class="p">(&lt;/span>&lt;span class="nx">index&lt;/span> &lt;span class="o">&amp;gt;=&lt;/span> &lt;span class="mi">0&lt;/span>&lt;span class="p">)&lt;/span> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">this&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">cache&lt;/span>&lt;span class="p">[&lt;/span>&lt;span class="nx">name&lt;/span>&lt;span class="p">].&lt;/span>&lt;span class="nx">splice&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="nx">index&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="mi">1&lt;/span>&lt;span class="p">);&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">emit&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="nx">name&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="p">...&lt;/span>&lt;span class="nx">args&lt;/span>&lt;span class="p">)&lt;/span> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="c1">// 复制一份。防止回调里继续on，导致死循环
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">&lt;/span> &lt;span class="kr">const&lt;/span> &lt;span class="nx">tasks&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="k">this&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">cache&lt;/span>&lt;span class="p">[&lt;/span>&lt;span class="nx">name&lt;/span>&lt;span class="p">].&lt;/span>&lt;span class="nx">slice&lt;/span>&lt;span class="p">();&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">if&lt;/span> &lt;span class="p">(&lt;/span>&lt;span class="nx">tasks&lt;/span>&lt;span class="p">)&lt;/span> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">for&lt;/span> &lt;span class="p">(&lt;/span>&lt;span class="kd">let&lt;/span> &lt;span class="nx">fn&lt;/span> &lt;span class="k">of&lt;/span> &lt;span class="nx">tasks&lt;/span>&lt;span class="p">)&lt;/span> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">fn&lt;/span>&lt;span class="p">(...&lt;/span>&lt;span class="nx">args&lt;/span>&lt;span class="p">);&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">once&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="nx">name&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="nx">cb&lt;/span>&lt;span class="p">)&lt;/span> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="kd">function&lt;/span> &lt;span class="nx">fn&lt;/span>&lt;span class="p">(...&lt;/span>&lt;span class="nx">args&lt;/span>&lt;span class="p">)&lt;/span> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">cb&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="nx">args&lt;/span>&lt;span class="p">);&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">this&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">off&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="nx">name&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="nx">fn&lt;/span>&lt;span class="p">);&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">this&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">on&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="nx">name&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="nx">fn&lt;/span>&lt;span class="p">);&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="p">}&lt;/span>&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>
&lt;/div>
&lt;/div>
&lt;h2 id="实现-jsonparse" >实现 JSON.parse
&lt;a hidden class="anchor" aria-hidden="true" href="#%e5%ae%9e%e7%8e%b0-jsonparse">#&lt;/a>
&lt;/h2>
&lt;div class="codeBlock">
&lt;details open>
&lt;summary>
&lt;div class="oper">&lt;div class="status">&lt;/div>&lt;/div>
&lt;div class="title">js&lt;/div>
&lt;div class="oper">&lt;button class="codeCopy">复制&lt;/button>&lt;/div>
&lt;/summary>
&lt;/details>
&lt;div class="codeBlockContent">
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt" id="hl-12-1">&lt;a class="lnlinks" href="#hl-12-1">1&lt;/a>
&lt;/span>&lt;span class="lnt" id="hl-12-2">&lt;a class="lnlinks" href="#hl-12-2">2&lt;/a>
&lt;/span>&lt;span class="lnt" id="hl-12-3">&lt;a class="lnlinks" href="#hl-12-3">3&lt;/a>
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-js" data-lang="js">&lt;span class="line">&lt;span class="cl">&lt;span class="kd">function&lt;/span> &lt;span class="nx">parse&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="nx">json&lt;/span>&lt;span class="p">)&lt;/span> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">return&lt;/span> &lt;span class="nb">eval&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s2">&amp;#34;(&amp;#34;&lt;/span> &lt;span class="o">+&lt;/span> &lt;span class="nx">json&lt;/span> &lt;span class="o">+&lt;/span> &lt;span class="s2">&amp;#34;)&amp;#34;&lt;/span>&lt;span class="p">);&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="p">}&lt;/span>&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>
&lt;/div>
&lt;/div>
&lt;h2 id="将-dom-转化成树结构对象" >将 DOM 转化成树结构对象
&lt;a hidden class="anchor" aria-hidden="true" href="#%e5%b0%86-dom-%e8%bd%ac%e5%8c%96%e6%88%90%e6%a0%91%e7%bb%93%e6%9e%84%e5%af%b9%e8%b1%a1">#&lt;/a>
&lt;/h2>
&lt;div class="codeBlock">
&lt;details open>
&lt;summary>
&lt;div class="oper">&lt;div class="status">&lt;/div>&lt;/div>
&lt;div class="title">html&lt;/div>
&lt;div class="oper">&lt;button class="codeCopy">复制&lt;/button>&lt;/div>
&lt;/summary>
&lt;/details>
&lt;div class="codeBlockContent">
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt" id="hl-13-1">&lt;a class="lnlinks" href="#hl-13-1">1&lt;/a>
&lt;/span>&lt;span class="lnt" id="hl-13-2">&lt;a class="lnlinks" href="#hl-13-2">2&lt;/a>
&lt;/span>&lt;span class="lnt" id="hl-13-3">&lt;a class="lnlinks" href="#hl-13-3">3&lt;/a>
&lt;/span>&lt;span class="lnt" id="hl-13-4">&lt;a class="lnlinks" href="#hl-13-4">4&lt;/a>
&lt;/span>&lt;span class="lnt" id="hl-13-5">&lt;a class="lnlinks" href="#hl-13-5">5&lt;/a>
&lt;/span>&lt;span class="lnt" id="hl-13-6">&lt;a class="lnlinks" href="#hl-13-6">6&lt;/a>
&lt;/span>&lt;span class="lnt" id="hl-13-7">&lt;a class="lnlinks" href="#hl-13-7">7&lt;/a>
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-html" data-lang="html">&lt;span class="line">&lt;span class="cl">&lt;span class="p">&amp;lt;&lt;/span>&lt;span class="nt">div&lt;/span>&lt;span class="p">&amp;gt;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">&amp;lt;&lt;/span>&lt;span class="nt">span&lt;/span>&lt;span class="p">&amp;gt;&amp;lt;/&lt;/span>&lt;span class="nt">span&lt;/span>&lt;span class="p">&amp;gt;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">&amp;lt;&lt;/span>&lt;span class="nt">ul&lt;/span>&lt;span class="p">&amp;gt;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">&amp;lt;&lt;/span>&lt;span class="nt">li&lt;/span>&lt;span class="p">&amp;gt;&amp;lt;/&lt;/span>&lt;span class="nt">li&lt;/span>&lt;span class="p">&amp;gt;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">&amp;lt;&lt;/span>&lt;span class="nt">li&lt;/span>&lt;span class="p">&amp;gt;&amp;lt;/&lt;/span>&lt;span class="nt">li&lt;/span>&lt;span class="p">&amp;gt;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">&amp;lt;/&lt;/span>&lt;span class="nt">ul&lt;/span>&lt;span class="p">&amp;gt;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="p">&amp;lt;/&lt;/span>&lt;span class="nt">div&lt;/span>&lt;span class="p">&amp;gt;&lt;/span>&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>
&lt;/div>
&lt;/div>
&lt;div class="codeBlock">
&lt;details open>
&lt;summary>
&lt;div class="oper">&lt;div class="status">&lt;/div>&lt;/div>
&lt;div class="title">js&lt;/div>
&lt;div class="oper">&lt;button class="codeCopy">复制&lt;/button>&lt;/div>
&lt;/summary>
&lt;/details>
&lt;div class="codeBlockContent">
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt" id="hl-14-1">&lt;a class="lnlinks" href="#hl-14-1"> 1&lt;/a>
&lt;/span>&lt;span class="lnt" id="hl-14-2">&lt;a class="lnlinks" href="#hl-14-2"> 2&lt;/a>
&lt;/span>&lt;span class="lnt" id="hl-14-3">&lt;a class="lnlinks" href="#hl-14-3"> 3&lt;/a>
&lt;/span>&lt;span class="lnt" id="hl-14-4">&lt;a class="lnlinks" href="#hl-14-4"> 4&lt;/a>
&lt;/span>&lt;span class="lnt" id="hl-14-5">&lt;a class="lnlinks" href="#hl-14-5"> 5&lt;/a>
&lt;/span>&lt;span class="lnt" id="hl-14-6">&lt;a class="lnlinks" href="#hl-14-6"> 6&lt;/a>
&lt;/span>&lt;span class="lnt" id="hl-14-7">&lt;a class="lnlinks" href="#hl-14-7"> 7&lt;/a>
&lt;/span>&lt;span class="lnt" id="hl-14-8">&lt;a class="lnlinks" href="#hl-14-8"> 8&lt;/a>
&lt;/span>&lt;span class="lnt" id="hl-14-9">&lt;a class="lnlinks" href="#hl-14-9"> 9&lt;/a>
&lt;/span>&lt;span class="lnt" id="hl-14-10">&lt;a class="lnlinks" href="#hl-14-10">10&lt;/a>
&lt;/span>&lt;span class="lnt" id="hl-14-11">&lt;a class="lnlinks" href="#hl-14-11">11&lt;/a>
&lt;/span>&lt;span class="lnt" id="hl-14-12">&lt;a class="lnlinks" href="#hl-14-12">12&lt;/a>
&lt;/span>&lt;span class="lnt" id="hl-14-13">&lt;a class="lnlinks" href="#hl-14-13">13&lt;/a>
&lt;/span>&lt;span class="lnt" id="hl-14-14">&lt;a class="lnlinks" href="#hl-14-14">14&lt;/a>
&lt;/span>&lt;span class="lnt" id="hl-14-15">&lt;a class="lnlinks" href="#hl-14-15">15&lt;/a>
&lt;/span>&lt;span class="lnt" id="hl-14-16">&lt;a class="lnlinks" href="#hl-14-16">16&lt;/a>
&lt;/span>&lt;span class="lnt" id="hl-14-17">&lt;a class="lnlinks" href="#hl-14-17">17&lt;/a>
&lt;/span>&lt;span class="lnt" id="hl-14-18">&lt;a class="lnlinks" href="#hl-14-18">18&lt;/a>
&lt;/span>&lt;span class="lnt" id="hl-14-19">&lt;a class="lnlinks" href="#hl-14-19">19&lt;/a>
&lt;/span>&lt;span class="lnt" id="hl-14-20">&lt;a class="lnlinks" href="#hl-14-20">20&lt;/a>
&lt;/span>&lt;span class="lnt" id="hl-14-21">&lt;a class="lnlinks" href="#hl-14-21">21&lt;/a>
&lt;/span>&lt;span class="lnt" id="hl-14-22">&lt;a class="lnlinks" href="#hl-14-22">22&lt;/a>
&lt;/span>&lt;span class="lnt" id="hl-14-23">&lt;a class="lnlinks" href="#hl-14-23">23&lt;/a>
&lt;/span>&lt;span class="lnt" id="hl-14-24">&lt;a class="lnlinks" href="#hl-14-24">24&lt;/a>
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-js" data-lang="js">&lt;span class="line">&lt;span class="cl">&lt;span class="c1">// 将上方的DOM转化为下面的树结构对象
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">&lt;/span>&lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">tag&lt;/span>&lt;span class="o">:&lt;/span> &lt;span class="s1">&amp;#39;DIV&amp;#39;&lt;/span>&lt;span class="p">,&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">children&lt;/span>&lt;span class="o">:&lt;/span> &lt;span class="p">[&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">{&lt;/span> &lt;span class="nx">tag&lt;/span>&lt;span class="o">:&lt;/span> &lt;span class="s1">&amp;#39;SPAN&amp;#39;&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="nx">children&lt;/span>&lt;span class="o">:&lt;/span> &lt;span class="p">[]&lt;/span> &lt;span class="p">},&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">tag&lt;/span>&lt;span class="o">:&lt;/span> &lt;span class="s1">&amp;#39;UL&amp;#39;&lt;/span>&lt;span class="p">,&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">children&lt;/span>&lt;span class="o">:&lt;/span> &lt;span class="p">[&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">{&lt;/span> &lt;span class="nx">tag&lt;/span>&lt;span class="o">:&lt;/span> &lt;span class="s1">&amp;#39;LI&amp;#39;&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="nx">children&lt;/span>&lt;span class="o">:&lt;/span> &lt;span class="p">[]&lt;/span> &lt;span class="p">},&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">{&lt;/span> &lt;span class="nx">tag&lt;/span>&lt;span class="o">:&lt;/span> &lt;span class="s1">&amp;#39;LI&amp;#39;&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="nx">children&lt;/span>&lt;span class="o">:&lt;/span> &lt;span class="p">[]&lt;/span> &lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">]&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">]&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">// 实现如下：
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">&lt;/span>&lt;span class="kd">function&lt;/span> &lt;span class="nx">dom2tree&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="nx">dom&lt;/span>&lt;span class="p">)&lt;/span> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="kr">const&lt;/span> &lt;span class="nx">obj&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="p">{}&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">obj&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">tag&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="nx">dom&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">tagName&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">obj&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">children&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="p">[]&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">dom&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">childNodes&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">forEach&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="nx">child&lt;/span> &lt;span class="p">=&amp;gt;&lt;/span> &lt;span class="nx">obj&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">children&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">push&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="nx">dom2tree&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="nx">child&lt;/span>&lt;span class="p">)))&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">return&lt;/span> &lt;span class="nx">obj&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="p">}&lt;/span>&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>
&lt;/div>
&lt;/div>
&lt;h2 id="将树结构转换为-dom" >将树结构转换为 DOM
&lt;a hidden class="anchor" aria-hidden="true" href="#%e5%b0%86%e6%a0%91%e7%bb%93%e6%9e%84%e8%bd%ac%e6%8d%a2%e4%b8%ba-dom">#&lt;/a>
&lt;/h2>
&lt;div class="codeBlock">
&lt;details open>
&lt;summary>
&lt;div class="oper">&lt;div class="status">&lt;/div>&lt;/div>
&lt;div class="title">js&lt;/div>
&lt;div class="oper">&lt;button class="codeCopy">复制&lt;/button>&lt;/div>
&lt;/summary>
&lt;/details>
&lt;div class="codeBlockContent">
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt" id="hl-15-1">&lt;a class="lnlinks" href="#hl-15-1"> 1&lt;/a>
&lt;/span>&lt;span class="lnt" id="hl-15-2">&lt;a class="lnlinks" href="#hl-15-2"> 2&lt;/a>
&lt;/span>&lt;span class="lnt" id="hl-15-3">&lt;a class="lnlinks" href="#hl-15-3"> 3&lt;/a>
&lt;/span>&lt;span class="lnt" id="hl-15-4">&lt;a class="lnlinks" href="#hl-15-4"> 4&lt;/a>
&lt;/span>&lt;span class="lnt" id="hl-15-5">&lt;a class="lnlinks" href="#hl-15-5"> 5&lt;/a>
&lt;/span>&lt;span class="lnt" id="hl-15-6">&lt;a class="lnlinks" href="#hl-15-6"> 6&lt;/a>
&lt;/span>&lt;span class="lnt" id="hl-15-7">&lt;a class="lnlinks" href="#hl-15-7"> 7&lt;/a>
&lt;/span>&lt;span class="lnt" id="hl-15-8">&lt;a class="lnlinks" href="#hl-15-8"> 8&lt;/a>
&lt;/span>&lt;span class="lnt" id="hl-15-9">&lt;a class="lnlinks" href="#hl-15-9"> 9&lt;/a>
&lt;/span>&lt;span class="lnt" id="hl-15-10">&lt;a class="lnlinks" href="#hl-15-10">10&lt;/a>
&lt;/span>&lt;span class="lnt" id="hl-15-11">&lt;a class="lnlinks" href="#hl-15-11">11&lt;/a>
&lt;/span>&lt;span class="lnt" id="hl-15-12">&lt;a class="lnlinks" href="#hl-15-12">12&lt;/a>
&lt;/span>&lt;span class="lnt" id="hl-15-13">&lt;a class="lnlinks" href="#hl-15-13">13&lt;/a>
&lt;/span>&lt;span class="lnt" id="hl-15-14">&lt;a class="lnlinks" href="#hl-15-14">14&lt;/a>
&lt;/span>&lt;span class="lnt" id="hl-15-15">&lt;a class="lnlinks" href="#hl-15-15">15&lt;/a>
&lt;/span>&lt;span class="lnt" id="hl-15-16">&lt;a class="lnlinks" href="#hl-15-16">16&lt;/a>
&lt;/span>&lt;span class="lnt" id="hl-15-17">&lt;a class="lnlinks" href="#hl-15-17">17&lt;/a>
&lt;/span>&lt;span class="lnt" id="hl-15-18">&lt;a class="lnlinks" href="#hl-15-18">18&lt;/a>
&lt;/span>&lt;span class="lnt" id="hl-15-19">&lt;a class="lnlinks" href="#hl-15-19">19&lt;/a>
&lt;/span>&lt;span class="lnt" id="hl-15-20">&lt;a class="lnlinks" href="#hl-15-20">20&lt;/a>
&lt;/span>&lt;span class="lnt" id="hl-15-21">&lt;a class="lnlinks" href="#hl-15-21">21&lt;/a>
&lt;/span>&lt;span class="lnt" id="hl-15-22">&lt;a class="lnlinks" href="#hl-15-22">22&lt;/a>
&lt;/span>&lt;span class="lnt" id="hl-15-23">&lt;a class="lnlinks" href="#hl-15-23">23&lt;/a>
&lt;/span>&lt;span class="lnt" id="hl-15-24">&lt;a class="lnlinks" href="#hl-15-24">24&lt;/a>
&lt;/span>&lt;span class="lnt" id="hl-15-25">&lt;a class="lnlinks" href="#hl-15-25">25&lt;/a>
&lt;/span>&lt;span class="lnt" id="hl-15-26">&lt;a class="lnlinks" href="#hl-15-26">26&lt;/a>
&lt;/span>&lt;span class="lnt" id="hl-15-27">&lt;a class="lnlinks" href="#hl-15-27">27&lt;/a>
&lt;/span>&lt;span class="lnt" id="hl-15-28">&lt;a class="lnlinks" href="#hl-15-28">28&lt;/a>
&lt;/span>&lt;span class="lnt" id="hl-15-29">&lt;a class="lnlinks" href="#hl-15-29">29&lt;/a>
&lt;/span>&lt;span class="lnt" id="hl-15-30">&lt;a class="lnlinks" href="#hl-15-30">30&lt;/a>
&lt;/span>&lt;span class="lnt" id="hl-15-31">&lt;a class="lnlinks" href="#hl-15-31">31&lt;/a>
&lt;/span>&lt;span class="lnt" id="hl-15-32">&lt;a class="lnlinks" href="#hl-15-32">32&lt;/a>
&lt;/span>&lt;span class="lnt" id="hl-15-33">&lt;a class="lnlinks" href="#hl-15-33">33&lt;/a>
&lt;/span>&lt;span class="lnt" id="hl-15-34">&lt;a class="lnlinks" href="#hl-15-34">34&lt;/a>
&lt;/span>&lt;span class="lnt" id="hl-15-35">&lt;a class="lnlinks" href="#hl-15-35">35&lt;/a>
&lt;/span>&lt;span class="lnt" id="hl-15-36">&lt;a class="lnlinks" href="#hl-15-36">36&lt;/a>
&lt;/span>&lt;span class="lnt" id="hl-15-37">&lt;a class="lnlinks" href="#hl-15-37">37&lt;/a>
&lt;/span>&lt;span class="lnt" id="hl-15-38">&lt;a class="lnlinks" href="#hl-15-38">38&lt;/a>
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-js" data-lang="js">&lt;span class="line">&lt;span class="cl">&lt;span class="c1">// 树结构
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">&lt;/span>&lt;span class="p">{&lt;/span>&lt;span class="nx">tag&lt;/span>&lt;span class="o">:&lt;/span> &lt;span class="s1">&amp;#39;DIV&amp;#39;&lt;/span>&lt;span class="p">,&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">children&lt;/span>&lt;span class="o">:&lt;/span> &lt;span class="p">[&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">{&lt;/span> &lt;span class="nx">tag&lt;/span>&lt;span class="o">:&lt;/span> &lt;span class="s1">&amp;#39;SPAN&amp;#39;&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="nx">children&lt;/span>&lt;span class="o">:&lt;/span> &lt;span class="p">[]&lt;/span> &lt;span class="p">},&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">tag&lt;/span>&lt;span class="o">:&lt;/span> &lt;span class="s1">&amp;#39;UL&amp;#39;&lt;/span>&lt;span class="p">,&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">children&lt;/span>&lt;span class="o">:&lt;/span> &lt;span class="p">[&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">{&lt;/span> &lt;span class="nx">tag&lt;/span>&lt;span class="o">:&lt;/span> &lt;span class="s1">&amp;#39;LI&amp;#39;&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="nx">children&lt;/span>&lt;span class="o">:&lt;/span> &lt;span class="p">[]&lt;/span> &lt;span class="p">},&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">{&lt;/span> &lt;span class="nx">tag&lt;/span>&lt;span class="o">:&lt;/span> &lt;span class="s1">&amp;#39;LI&amp;#39;&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="nx">children&lt;/span>&lt;span class="o">:&lt;/span> &lt;span class="p">[]&lt;/span> &lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">]&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">]&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">// 实现如下：
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">// 真正的渲染函数
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">&lt;/span>&lt;span class="kd">function&lt;/span> &lt;span class="nx">_render&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="nx">vnode&lt;/span>&lt;span class="p">)&lt;/span> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="c1">// 如果是数字类型转化为字符串
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">&lt;/span> &lt;span class="k">if&lt;/span> &lt;span class="p">(&lt;/span>&lt;span class="k">typeof&lt;/span> &lt;span class="nx">vnode&lt;/span> &lt;span class="o">===&lt;/span> &lt;span class="s2">&amp;#34;number&amp;#34;&lt;/span>&lt;span class="p">)&lt;/span> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">vnode&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="nb">String&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="nx">vnode&lt;/span>&lt;span class="p">);&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="c1">// 字符串类型直接就是文本节点
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">&lt;/span> &lt;span class="k">if&lt;/span> &lt;span class="p">(&lt;/span>&lt;span class="k">typeof&lt;/span> &lt;span class="nx">vnode&lt;/span> &lt;span class="o">===&lt;/span> &lt;span class="s2">&amp;#34;string&amp;#34;&lt;/span>&lt;span class="p">)&lt;/span> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">return&lt;/span> &lt;span class="nb">document&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">createTextNode&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="nx">vnode&lt;/span>&lt;span class="p">);&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="c1">// 普通DOM
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">&lt;/span> &lt;span class="kr">const&lt;/span> &lt;span class="nx">dom&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="nb">document&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">createElement&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="nx">vnode&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">tag&lt;/span>&lt;span class="p">);&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">if&lt;/span> &lt;span class="p">(&lt;/span>&lt;span class="nx">vnode&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">attrs&lt;/span>&lt;span class="p">)&lt;/span> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="c1">// 遍历属性
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">&lt;/span> &lt;span class="nb">Object&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">keys&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="nx">vnode&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">attrs&lt;/span>&lt;span class="p">).&lt;/span>&lt;span class="nx">forEach&lt;/span>&lt;span class="p">((&lt;/span>&lt;span class="nx">key&lt;/span>&lt;span class="p">)&lt;/span> &lt;span class="p">=&amp;gt;&lt;/span> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="kr">const&lt;/span> &lt;span class="nx">value&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="nx">vnode&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">attrs&lt;/span>&lt;span class="p">[&lt;/span>&lt;span class="nx">key&lt;/span>&lt;span class="p">];&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">dom&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">setAttribute&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="nx">key&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="nx">value&lt;/span>&lt;span class="p">);&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">});&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="c1">// 子数组进行递归操作
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">&lt;/span> &lt;span class="nx">vnode&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">children&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">forEach&lt;/span>&lt;span class="p">((&lt;/span>&lt;span class="nx">child&lt;/span>&lt;span class="p">)&lt;/span> &lt;span class="p">=&amp;gt;&lt;/span> &lt;span class="nx">dom&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">appendChild&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="nx">_render&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="nx">child&lt;/span>&lt;span class="p">)));&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">return&lt;/span> &lt;span class="nx">dom&lt;/span>&lt;span class="p">;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="p">}&lt;/span>&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>
&lt;/div>
&lt;/div>
&lt;div class="codeBlock">
&lt;details open>
&lt;summary>
&lt;div class="oper">&lt;div class="status">&lt;/div>&lt;/div>
&lt;div class="title">html&lt;/div>
&lt;div class="oper">&lt;button class="codeCopy">复制&lt;/button>&lt;/div>
&lt;/summary>
&lt;/details>
&lt;div class="codeBlockContent">
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt" id="hl-16-1">&lt;a class="lnlinks" href="#hl-16-1">1&lt;/a>
&lt;/span>&lt;span class="lnt" id="hl-16-2">&lt;a class="lnlinks" href="#hl-16-2">2&lt;/a>
&lt;/span>&lt;span class="lnt" id="hl-16-3">&lt;a class="lnlinks" href="#hl-16-3">3&lt;/a>
&lt;/span>&lt;span class="lnt" id="hl-16-4">&lt;a class="lnlinks" href="#hl-16-4">4&lt;/a>
&lt;/span>&lt;span class="lnt" id="hl-16-5">&lt;a class="lnlinks" href="#hl-16-5">5&lt;/a>
&lt;/span>&lt;span class="lnt" id="hl-16-6">&lt;a class="lnlinks" href="#hl-16-6">6&lt;/a>
&lt;/span>&lt;span class="lnt" id="hl-16-7">&lt;a class="lnlinks" href="#hl-16-7">7&lt;/a>
&lt;/span>&lt;span class="lnt" id="hl-16-8">&lt;a class="lnlinks" href="#hl-16-8">8&lt;/a>
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-html" data-lang="html">&lt;span class="line">&lt;span class="cl">&lt;span class="c">&amp;lt;!-- 转换后的dom --&amp;gt;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="p">&amp;lt;&lt;/span>&lt;span class="nt">div&lt;/span>&lt;span class="p">&amp;gt;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">&amp;lt;&lt;/span>&lt;span class="nt">span&lt;/span>&lt;span class="p">&amp;gt;&amp;lt;/&lt;/span>&lt;span class="nt">span&lt;/span>&lt;span class="p">&amp;gt;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">&amp;lt;&lt;/span>&lt;span class="nt">ul&lt;/span>&lt;span class="p">&amp;gt;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">&amp;lt;&lt;/span>&lt;span class="nt">li&lt;/span>&lt;span class="p">&amp;gt;&amp;lt;/&lt;/span>&lt;span class="nt">li&lt;/span>&lt;span class="p">&amp;gt;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">&amp;lt;&lt;/span>&lt;span class="nt">li&lt;/span>&lt;span class="p">&amp;gt;&amp;lt;/&lt;/span>&lt;span class="nt">li&lt;/span>&lt;span class="p">&amp;gt;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">&amp;lt;/&lt;/span>&lt;span class="nt">ul&lt;/span>&lt;span class="p">&amp;gt;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="p">&amp;lt;/&lt;/span>&lt;span class="nt">div&lt;/span>&lt;span class="p">&amp;gt;&lt;/span>&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>
&lt;/div>
&lt;/div>
&lt;h2 id="判断一个对象有环引用" >判断一个对象有环引用
&lt;a hidden class="anchor" aria-hidden="true" href="#%e5%88%a4%e6%96%ad%e4%b8%80%e4%b8%aa%e5%af%b9%e8%b1%a1%e6%9c%89%e7%8e%af%e5%bc%95%e7%94%a8">#&lt;/a>
&lt;/h2>
&lt;div class="codeBlock">
&lt;details open>
&lt;summary>
&lt;div class="oper">&lt;div class="status">&lt;/div>&lt;/div>
&lt;div class="title">js&lt;/div>
&lt;div class="oper">&lt;button class="codeCopy">复制&lt;/button>&lt;/div>
&lt;/summary>
&lt;/details>
&lt;div class="codeBlockContent">
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt" id="hl-17-1">&lt;a class="lnlinks" href="#hl-17-1"> 1&lt;/a>
&lt;/span>&lt;span class="lnt" id="hl-17-2">&lt;a class="lnlinks" href="#hl-17-2"> 2&lt;/a>
&lt;/span>&lt;span class="lnt" id="hl-17-3">&lt;a class="lnlinks" href="#hl-17-3"> 3&lt;/a>
&lt;/span>&lt;span class="lnt" id="hl-17-4">&lt;a class="lnlinks" href="#hl-17-4"> 4&lt;/a>
&lt;/span>&lt;span class="lnt" id="hl-17-5">&lt;a class="lnlinks" href="#hl-17-5"> 5&lt;/a>
&lt;/span>&lt;span class="lnt" id="hl-17-6">&lt;a class="lnlinks" href="#hl-17-6"> 6&lt;/a>
&lt;/span>&lt;span class="lnt" id="hl-17-7">&lt;a class="lnlinks" href="#hl-17-7"> 7&lt;/a>
&lt;/span>&lt;span class="lnt" id="hl-17-8">&lt;a class="lnlinks" href="#hl-17-8"> 8&lt;/a>
&lt;/span>&lt;span class="lnt" id="hl-17-9">&lt;a class="lnlinks" href="#hl-17-9"> 9&lt;/a>
&lt;/span>&lt;span class="lnt" id="hl-17-10">&lt;a class="lnlinks" href="#hl-17-10">10&lt;/a>
&lt;/span>&lt;span class="lnt" id="hl-17-11">&lt;a class="lnlinks" href="#hl-17-11">11&lt;/a>
&lt;/span>&lt;span class="lnt" id="hl-17-12">&lt;a class="lnlinks" href="#hl-17-12">12&lt;/a>
&lt;/span>&lt;span class="lnt" id="hl-17-13">&lt;a class="lnlinks" href="#hl-17-13">13&lt;/a>
&lt;/span>&lt;span class="lnt" id="hl-17-14">&lt;a class="lnlinks" href="#hl-17-14">14&lt;/a>
&lt;/span>&lt;span class="lnt" id="hl-17-15">&lt;a class="lnlinks" href="#hl-17-15">15&lt;/a>
&lt;/span>&lt;span class="lnt" id="hl-17-16">&lt;a class="lnlinks" href="#hl-17-16">16&lt;/a>
&lt;/span>&lt;span class="lnt" id="hl-17-17">&lt;a class="lnlinks" href="#hl-17-17">17&lt;/a>
&lt;/span>&lt;span class="lnt" id="hl-17-18">&lt;a class="lnlinks" href="#hl-17-18">18&lt;/a>
&lt;/span>&lt;span class="lnt" id="hl-17-19">&lt;a class="lnlinks" href="#hl-17-19">19&lt;/a>
&lt;/span>&lt;span class="lnt" id="hl-17-20">&lt;a class="lnlinks" href="#hl-17-20">20&lt;/a>
&lt;/span>&lt;span class="lnt" id="hl-17-21">&lt;a class="lnlinks" href="#hl-17-21">21&lt;/a>
&lt;/span>&lt;span class="lnt" id="hl-17-22">&lt;a class="lnlinks" href="#hl-17-22">22&lt;/a>
&lt;/span>&lt;span class="lnt" id="hl-17-23">&lt;a class="lnlinks" href="#hl-17-23">23&lt;/a>
&lt;/span>&lt;span class="lnt" id="hl-17-24">&lt;a class="lnlinks" href="#hl-17-24">24&lt;/a>
&lt;/span>&lt;span class="lnt" id="hl-17-25">&lt;a class="lnlinks" href="#hl-17-25">25&lt;/a>
&lt;/span>&lt;span class="lnt" id="hl-17-26">&lt;a class="lnlinks" href="#hl-17-26">26&lt;/a>
&lt;/span>&lt;span class="lnt" id="hl-17-27">&lt;a class="lnlinks" href="#hl-17-27">27&lt;/a>
&lt;/span>&lt;span class="lnt" id="hl-17-28">&lt;a class="lnlinks" href="#hl-17-28">28&lt;/a>
&lt;/span>&lt;span class="lnt" id="hl-17-29">&lt;a class="lnlinks" href="#hl-17-29">29&lt;/a>
&lt;/span>&lt;span class="lnt" id="hl-17-30">&lt;a class="lnlinks" href="#hl-17-30">30&lt;/a>
&lt;/span>&lt;span class="lnt" id="hl-17-31">&lt;a class="lnlinks" href="#hl-17-31">31&lt;/a>
&lt;/span>&lt;span class="lnt" id="hl-17-32">&lt;a class="lnlinks" href="#hl-17-32">32&lt;/a>
&lt;/span>&lt;span class="lnt" id="hl-17-33">&lt;a class="lnlinks" href="#hl-17-33">33&lt;/a>
&lt;/span>&lt;span class="lnt" id="hl-17-34">&lt;a class="lnlinks" href="#hl-17-34">34&lt;/a>
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-js" data-lang="js">&lt;span class="line">&lt;span class="cl">&lt;span class="kd">var&lt;/span> &lt;span class="nx">obj&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">a&lt;/span>&lt;span class="o">:&lt;/span> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">c&lt;/span>&lt;span class="o">:&lt;/span> &lt;span class="p">[&lt;/span>&lt;span class="mi">1&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="mi">2&lt;/span>&lt;span class="p">],&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">},&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">b&lt;/span>&lt;span class="o">:&lt;/span> &lt;span class="mi">1&lt;/span>&lt;span class="p">,&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="p">};&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="nx">obj&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">a&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">c&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">d&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="nx">obj&lt;/span>&lt;span class="p">;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="nx">console&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">log&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="nx">cycleDetector&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="nx">obj&lt;/span>&lt;span class="p">));&lt;/span> &lt;span class="c1">// true
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">// 实现思路：用一个数组存储每一个遍历过的对象，下次找到数组中存在，则说明环引用
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="kd">function&lt;/span> &lt;span class="nx">cycleDetector&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="nx">obj&lt;/span>&lt;span class="p">)&lt;/span> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="kr">const&lt;/span> &lt;span class="nx">arr&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="p">[&lt;/span>&lt;span class="nx">obj&lt;/span>&lt;span class="p">];&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="kd">let&lt;/span> &lt;span class="nx">flag&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="kc">false&lt;/span>&lt;span class="p">;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="kd">function&lt;/span> &lt;span class="nx">cycle&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="nx">o&lt;/span>&lt;span class="p">)&lt;/span> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="kr">const&lt;/span> &lt;span class="nx">keys&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="nb">Object&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">keys&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="nx">o&lt;/span>&lt;span class="p">);&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">for&lt;/span> &lt;span class="p">(&lt;/span>&lt;span class="kr">const&lt;/span> &lt;span class="nx">key&lt;/span> &lt;span class="k">of&lt;/span> &lt;span class="nx">keys&lt;/span>&lt;span class="p">)&lt;/span> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="kr">const&lt;/span> &lt;span class="nx">temp&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="nx">o&lt;/span>&lt;span class="p">[&lt;/span>&lt;span class="nx">key&lt;/span>&lt;span class="p">];&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">if&lt;/span> &lt;span class="p">(&lt;/span>&lt;span class="k">typeof&lt;/span> &lt;span class="nx">temp&lt;/span> &lt;span class="o">===&lt;/span> &lt;span class="s2">&amp;#34;object&amp;#34;&lt;/span> &lt;span class="o">&amp;amp;&amp;amp;&lt;/span> &lt;span class="nx">temp&lt;/span> &lt;span class="o">!==&lt;/span> &lt;span class="kc">null&lt;/span>&lt;span class="p">)&lt;/span> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">if&lt;/span> &lt;span class="p">(&lt;/span>&lt;span class="nx">arr&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">indexOf&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="nx">temp&lt;/span>&lt;span class="p">)&lt;/span> &lt;span class="o">&amp;gt;=&lt;/span> &lt;span class="mi">0&lt;/span>&lt;span class="p">)&lt;/span> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">flag&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="kc">true&lt;/span>&lt;span class="p">;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">return&lt;/span>&lt;span class="p">;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">arr&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">push&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="nx">temp&lt;/span>&lt;span class="p">);&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">cycle&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="nx">temp&lt;/span>&lt;span class="p">);&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">cycle&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="nx">obj&lt;/span>&lt;span class="p">);&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">return&lt;/span> &lt;span class="nx">flag&lt;/span>&lt;span class="p">;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="p">}&lt;/span>&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>
&lt;/div>
&lt;/div>
&lt;h2 id="计算一个对象的层数" >计算一个对象的层数
&lt;a hidden class="anchor" aria-hidden="true" href="#%e8%ae%a1%e7%ae%97%e4%b8%80%e4%b8%aa%e5%af%b9%e8%b1%a1%e7%9a%84%e5%b1%82%e6%95%b0">#&lt;/a>
&lt;/h2>
&lt;div class="codeBlock">
&lt;details open>
&lt;summary>
&lt;div class="oper">&lt;div class="status">&lt;/div>&lt;/div>
&lt;div class="title">js&lt;/div>
&lt;div class="oper">&lt;button class="codeCopy">复制&lt;/button>&lt;/div>
&lt;/summary>
&lt;/details>
&lt;div class="codeBlockContent">
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt" id="hl-18-1">&lt;a class="lnlinks" href="#hl-18-1"> 1&lt;/a>
&lt;/span>&lt;span class="lnt" id="hl-18-2">&lt;a class="lnlinks" href="#hl-18-2"> 2&lt;/a>
&lt;/span>&lt;span class="lnt" id="hl-18-3">&lt;a class="lnlinks" href="#hl-18-3"> 3&lt;/a>
&lt;/span>&lt;span class="lnt" id="hl-18-4">&lt;a class="lnlinks" href="#hl-18-4"> 4&lt;/a>
&lt;/span>&lt;span class="lnt" id="hl-18-5">&lt;a class="lnlinks" href="#hl-18-5"> 5&lt;/a>
&lt;/span>&lt;span class="lnt" id="hl-18-6">&lt;a class="lnlinks" href="#hl-18-6"> 6&lt;/a>
&lt;/span>&lt;span class="lnt" id="hl-18-7">&lt;a class="lnlinks" href="#hl-18-7"> 7&lt;/a>
&lt;/span>&lt;span class="lnt" id="hl-18-8">&lt;a class="lnlinks" href="#hl-18-8"> 8&lt;/a>
&lt;/span>&lt;span class="lnt" id="hl-18-9">&lt;a class="lnlinks" href="#hl-18-9"> 9&lt;/a>
&lt;/span>&lt;span class="lnt" id="hl-18-10">&lt;a class="lnlinks" href="#hl-18-10">10&lt;/a>
&lt;/span>&lt;span class="lnt" id="hl-18-11">&lt;a class="lnlinks" href="#hl-18-11">11&lt;/a>
&lt;/span>&lt;span class="lnt" id="hl-18-12">&lt;a class="lnlinks" href="#hl-18-12">12&lt;/a>
&lt;/span>&lt;span class="lnt" id="hl-18-13">&lt;a class="lnlinks" href="#hl-18-13">13&lt;/a>
&lt;/span>&lt;span class="lnt" id="hl-18-14">&lt;a class="lnlinks" href="#hl-18-14">14&lt;/a>
&lt;/span>&lt;span class="lnt" id="hl-18-15">&lt;a class="lnlinks" href="#hl-18-15">15&lt;/a>
&lt;/span>&lt;span class="lnt" id="hl-18-16">&lt;a class="lnlinks" href="#hl-18-16">16&lt;/a>
&lt;/span>&lt;span class="lnt" id="hl-18-17">&lt;a class="lnlinks" href="#hl-18-17">17&lt;/a>
&lt;/span>&lt;span class="lnt" id="hl-18-18">&lt;a class="lnlinks" href="#hl-18-18">18&lt;/a>
&lt;/span>&lt;span class="lnt" id="hl-18-19">&lt;a class="lnlinks" href="#hl-18-19">19&lt;/a>
&lt;/span>&lt;span class="lnt" id="hl-18-20">&lt;a class="lnlinks" href="#hl-18-20">20&lt;/a>
&lt;/span>&lt;span class="lnt" id="hl-18-21">&lt;a class="lnlinks" href="#hl-18-21">21&lt;/a>
&lt;/span>&lt;span class="lnt" id="hl-18-22">&lt;a class="lnlinks" href="#hl-18-22">22&lt;/a>
&lt;/span>&lt;span class="lnt" id="hl-18-23">&lt;a class="lnlinks" href="#hl-18-23">23&lt;/a>
&lt;/span>&lt;span class="lnt" id="hl-18-24">&lt;a class="lnlinks" href="#hl-18-24">24&lt;/a>
&lt;/span>&lt;span class="lnt" id="hl-18-25">&lt;a class="lnlinks" href="#hl-18-25">25&lt;/a>
&lt;/span>&lt;span class="lnt" id="hl-18-26">&lt;a class="lnlinks" href="#hl-18-26">26&lt;/a>
&lt;/span>&lt;span class="lnt" id="hl-18-27">&lt;a class="lnlinks" href="#hl-18-27">27&lt;/a>
&lt;/span>&lt;span class="lnt" id="hl-18-28">&lt;a class="lnlinks" href="#hl-18-28">28&lt;/a>
&lt;/span>&lt;span class="lnt" id="hl-18-29">&lt;a class="lnlinks" href="#hl-18-29">29&lt;/a>
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-js" data-lang="js">&lt;span class="line">&lt;span class="cl">&lt;span class="kr">const&lt;/span> &lt;span class="nx">obj&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">a&lt;/span>&lt;span class="o">:&lt;/span> &lt;span class="p">{&lt;/span> &lt;span class="nx">b&lt;/span>&lt;span class="o">:&lt;/span> &lt;span class="p">[&lt;/span>&lt;span class="mi">1&lt;/span>&lt;span class="p">]&lt;/span> &lt;span class="p">},&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">c&lt;/span>&lt;span class="o">:&lt;/span> &lt;span class="p">{&lt;/span> &lt;span class="nx">d&lt;/span>&lt;span class="o">:&lt;/span> &lt;span class="p">{&lt;/span> &lt;span class="nx">e&lt;/span>&lt;span class="o">:&lt;/span> &lt;span class="p">{&lt;/span> &lt;span class="nx">f&lt;/span>&lt;span class="o">:&lt;/span> &lt;span class="mi">1&lt;/span> &lt;span class="p">}&lt;/span> &lt;span class="p">}&lt;/span> &lt;span class="p">},&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="p">};&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="nx">console&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">log&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="nx">loopGetLevel&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="nx">obj&lt;/span>&lt;span class="p">));&lt;/span> &lt;span class="c1">// 4
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">// 实现如下:
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">&lt;/span>&lt;span class="kd">function&lt;/span> &lt;span class="nx">loopGetLevel&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="nx">obj&lt;/span>&lt;span class="p">)&lt;/span> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="kd">var&lt;/span> &lt;span class="nx">res&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="mi">1&lt;/span>&lt;span class="p">;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="kd">function&lt;/span> &lt;span class="nx">computedLevel&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="nx">obj&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="nx">level&lt;/span>&lt;span class="p">)&lt;/span> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="kd">var&lt;/span> &lt;span class="nx">level&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="nx">level&lt;/span> &lt;span class="o">?&lt;/span> &lt;span class="nx">level&lt;/span> &lt;span class="o">:&lt;/span> &lt;span class="mi">0&lt;/span>&lt;span class="p">;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">if&lt;/span> &lt;span class="p">(&lt;/span>&lt;span class="k">typeof&lt;/span> &lt;span class="nx">obj&lt;/span> &lt;span class="o">===&lt;/span> &lt;span class="s2">&amp;#34;object&amp;#34;&lt;/span>&lt;span class="p">)&lt;/span> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">for&lt;/span> &lt;span class="p">(&lt;/span>&lt;span class="kd">var&lt;/span> &lt;span class="nx">key&lt;/span> &lt;span class="k">in&lt;/span> &lt;span class="nx">obj&lt;/span>&lt;span class="p">)&lt;/span> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">if&lt;/span> &lt;span class="p">(&lt;/span>&lt;span class="k">typeof&lt;/span> &lt;span class="nx">obj&lt;/span>&lt;span class="p">[&lt;/span>&lt;span class="nx">key&lt;/span>&lt;span class="p">]&lt;/span> &lt;span class="o">===&lt;/span> &lt;span class="s2">&amp;#34;object&amp;#34;&lt;/span>&lt;span class="p">)&lt;/span> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">computedLevel&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="nx">obj&lt;/span>&lt;span class="p">[&lt;/span>&lt;span class="nx">key&lt;/span>&lt;span class="p">],&lt;/span> &lt;span class="nx">level&lt;/span> &lt;span class="o">+&lt;/span> &lt;span class="mi">1&lt;/span>&lt;span class="p">);&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">}&lt;/span> &lt;span class="k">else&lt;/span> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">res&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="nx">level&lt;/span> &lt;span class="o">+&lt;/span> &lt;span class="mi">1&lt;/span> &lt;span class="o">&amp;gt;&lt;/span> &lt;span class="nx">res&lt;/span> &lt;span class="o">?&lt;/span> &lt;span class="nx">level&lt;/span> &lt;span class="o">+&lt;/span> &lt;span class="mi">1&lt;/span> &lt;span class="o">:&lt;/span> &lt;span class="nx">res&lt;/span>&lt;span class="p">;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">}&lt;/span> &lt;span class="k">else&lt;/span> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">res&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="nx">level&lt;/span> &lt;span class="o">&amp;gt;&lt;/span> &lt;span class="nx">res&lt;/span> &lt;span class="o">?&lt;/span> &lt;span class="nx">level&lt;/span> &lt;span class="o">:&lt;/span> &lt;span class="nx">res&lt;/span>&lt;span class="p">;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">computedLevel&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="nx">obj&lt;/span>&lt;span class="p">);&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">return&lt;/span> &lt;span class="nx">res&lt;/span>&lt;span class="p">;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="p">}&lt;/span>&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>
&lt;/div>
&lt;/div>
&lt;h2 id="对象的扁平化" >对象的扁平化
&lt;a hidden class="anchor" aria-hidden="true" href="#%e5%af%b9%e8%b1%a1%e7%9a%84%e6%89%81%e5%b9%b3%e5%8c%96">#&lt;/a>
&lt;/h2>
&lt;div class="codeBlock">
&lt;details open>
&lt;summary>
&lt;div class="oper">&lt;div class="status">&lt;/div>&lt;/div>
&lt;div class="title">js&lt;/div>
&lt;div class="oper">&lt;button class="codeCopy">复制&lt;/button>&lt;/div>
&lt;/summary>
&lt;/details>
&lt;div class="codeBlockContent">
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt" id="hl-19-1">&lt;a class="lnlinks" href="#hl-19-1"> 1&lt;/a>
&lt;/span>&lt;span class="lnt" id="hl-19-2">&lt;a class="lnlinks" href="#hl-19-2"> 2&lt;/a>
&lt;/span>&lt;span class="lnt" id="hl-19-3">&lt;a class="lnlinks" href="#hl-19-3"> 3&lt;/a>
&lt;/span>&lt;span class="lnt" id="hl-19-4">&lt;a class="lnlinks" href="#hl-19-4"> 4&lt;/a>
&lt;/span>&lt;span class="lnt" id="hl-19-5">&lt;a class="lnlinks" href="#hl-19-5"> 5&lt;/a>
&lt;/span>&lt;span class="lnt" id="hl-19-6">&lt;a class="lnlinks" href="#hl-19-6"> 6&lt;/a>
&lt;/span>&lt;span class="lnt" id="hl-19-7">&lt;a class="lnlinks" href="#hl-19-7"> 7&lt;/a>
&lt;/span>&lt;span class="lnt" id="hl-19-8">&lt;a class="lnlinks" href="#hl-19-8"> 8&lt;/a>
&lt;/span>&lt;span class="lnt" id="hl-19-9">&lt;a class="lnlinks" href="#hl-19-9"> 9&lt;/a>
&lt;/span>&lt;span class="lnt" id="hl-19-10">&lt;a class="lnlinks" href="#hl-19-10">10&lt;/a>
&lt;/span>&lt;span class="lnt" id="hl-19-11">&lt;a class="lnlinks" href="#hl-19-11">11&lt;/a>
&lt;/span>&lt;span class="lnt" id="hl-19-12">&lt;a class="lnlinks" href="#hl-19-12">12&lt;/a>
&lt;/span>&lt;span class="lnt" id="hl-19-13">&lt;a class="lnlinks" href="#hl-19-13">13&lt;/a>
&lt;/span>&lt;span class="lnt" id="hl-19-14">&lt;a class="lnlinks" href="#hl-19-14">14&lt;/a>
&lt;/span>&lt;span class="lnt" id="hl-19-15">&lt;a class="lnlinks" href="#hl-19-15">15&lt;/a>
&lt;/span>&lt;span class="lnt" id="hl-19-16">&lt;a class="lnlinks" href="#hl-19-16">16&lt;/a>
&lt;/span>&lt;span class="lnt" id="hl-19-17">&lt;a class="lnlinks" href="#hl-19-17">17&lt;/a>
&lt;/span>&lt;span class="lnt" id="hl-19-18">&lt;a class="lnlinks" href="#hl-19-18">18&lt;/a>
&lt;/span>&lt;span class="lnt" id="hl-19-19">&lt;a class="lnlinks" href="#hl-19-19">19&lt;/a>
&lt;/span>&lt;span class="lnt" id="hl-19-20">&lt;a class="lnlinks" href="#hl-19-20">20&lt;/a>
&lt;/span>&lt;span class="lnt" id="hl-19-21">&lt;a class="lnlinks" href="#hl-19-21">21&lt;/a>
&lt;/span>&lt;span class="lnt" id="hl-19-22">&lt;a class="lnlinks" href="#hl-19-22">22&lt;/a>
&lt;/span>&lt;span class="lnt" id="hl-19-23">&lt;a class="lnlinks" href="#hl-19-23">23&lt;/a>
&lt;/span>&lt;span class="lnt" id="hl-19-24">&lt;a class="lnlinks" href="#hl-19-24">24&lt;/a>
&lt;/span>&lt;span class="lnt" id="hl-19-25">&lt;a class="lnlinks" href="#hl-19-25">25&lt;/a>
&lt;/span>&lt;span class="lnt" id="hl-19-26">&lt;a class="lnlinks" href="#hl-19-26">26&lt;/a>
&lt;/span>&lt;span class="lnt" id="hl-19-27">&lt;a class="lnlinks" href="#hl-19-27">27&lt;/a>
&lt;/span>&lt;span class="lnt" id="hl-19-28">&lt;a class="lnlinks" href="#hl-19-28">28&lt;/a>
&lt;/span>&lt;span class="lnt" id="hl-19-29">&lt;a class="lnlinks" href="#hl-19-29">29&lt;/a>
&lt;/span>&lt;span class="lnt" id="hl-19-30">&lt;a class="lnlinks" href="#hl-19-30">30&lt;/a>
&lt;/span>&lt;span class="lnt" id="hl-19-31">&lt;a class="lnlinks" href="#hl-19-31">31&lt;/a>
&lt;/span>&lt;span class="lnt" id="hl-19-32">&lt;a class="lnlinks" href="#hl-19-32">32&lt;/a>
&lt;/span>&lt;span class="lnt" id="hl-19-33">&lt;a class="lnlinks" href="#hl-19-33">33&lt;/a>
&lt;/span>&lt;span class="lnt" id="hl-19-34">&lt;a class="lnlinks" href="#hl-19-34">34&lt;/a>
&lt;/span>&lt;span class="lnt" id="hl-19-35">&lt;a class="lnlinks" href="#hl-19-35">35&lt;/a>
&lt;/span>&lt;span class="lnt" id="hl-19-36">&lt;a class="lnlinks" href="#hl-19-36">36&lt;/a>
&lt;/span>&lt;span class="lnt" id="hl-19-37">&lt;a class="lnlinks" href="#hl-19-37">37&lt;/a>
&lt;/span>&lt;span class="lnt" id="hl-19-38">&lt;a class="lnlinks" href="#hl-19-38">38&lt;/a>
&lt;/span>&lt;span class="lnt" id="hl-19-39">&lt;a class="lnlinks" href="#hl-19-39">39&lt;/a>
&lt;/span>&lt;span class="lnt" id="hl-19-40">&lt;a class="lnlinks" href="#hl-19-40">40&lt;/a>
&lt;/span>&lt;span class="lnt" id="hl-19-41">&lt;a class="lnlinks" href="#hl-19-41">41&lt;/a>
&lt;/span>&lt;span class="lnt" id="hl-19-42">&lt;a class="lnlinks" href="#hl-19-42">42&lt;/a>
&lt;/span>&lt;span class="lnt" id="hl-19-43">&lt;a class="lnlinks" href="#hl-19-43">43&lt;/a>
&lt;/span>&lt;span class="lnt" id="hl-19-44">&lt;a class="lnlinks" href="#hl-19-44">44&lt;/a>
&lt;/span>&lt;span class="lnt" id="hl-19-45">&lt;a class="lnlinks" href="#hl-19-45">45&lt;/a>
&lt;/span>&lt;span class="lnt" id="hl-19-46">&lt;a class="lnlinks" href="#hl-19-46">46&lt;/a>
&lt;/span>&lt;span class="lnt" id="hl-19-47">&lt;a class="lnlinks" href="#hl-19-47">47&lt;/a>
&lt;/span>&lt;span class="lnt" id="hl-19-48">&lt;a class="lnlinks" href="#hl-19-48">48&lt;/a>
&lt;/span>&lt;span class="lnt" id="hl-19-49">&lt;a class="lnlinks" href="#hl-19-49">49&lt;/a>
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-js" data-lang="js">&lt;span class="line">&lt;span class="cl">&lt;span class="kr">const&lt;/span> &lt;span class="nx">obj&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">a&lt;/span>&lt;span class="o">:&lt;/span> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">b&lt;/span>&lt;span class="o">:&lt;/span> &lt;span class="mi">1&lt;/span>&lt;span class="p">,&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">c&lt;/span>&lt;span class="o">:&lt;/span> &lt;span class="mi">2&lt;/span>&lt;span class="p">,&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">d&lt;/span>&lt;span class="o">:&lt;/span> &lt;span class="p">{&lt;/span> &lt;span class="nx">e&lt;/span>&lt;span class="o">:&lt;/span> &lt;span class="mi">5&lt;/span> &lt;span class="p">},&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">},&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">b&lt;/span>&lt;span class="o">:&lt;/span> &lt;span class="p">[&lt;/span>&lt;span class="mi">1&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="mi">3&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="p">{&lt;/span> &lt;span class="nx">a&lt;/span>&lt;span class="o">:&lt;/span> &lt;span class="mi">2&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="nx">b&lt;/span>&lt;span class="o">:&lt;/span> &lt;span class="mi">3&lt;/span> &lt;span class="p">}],&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">c&lt;/span>&lt;span class="o">:&lt;/span> &lt;span class="mi">3&lt;/span>&lt;span class="p">,&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="p">};&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="nx">flatten&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="nx">obj&lt;/span>&lt;span class="p">);&lt;/span> &lt;span class="c1">// 结果返回如下
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">// {
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">// &amp;#39;a.b&amp;#39;: 1,
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">// &amp;#39;a.c&amp;#39;: 2,
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">// &amp;#39;a.d.e&amp;#39;: 5,
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">// &amp;#39;b[0]&amp;#39;: 1,
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">// &amp;#39;b[1]&amp;#39;: 3,
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">// &amp;#39;b[2].a&amp;#39;: 2,
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">// &amp;#39;b[2].b&amp;#39;: 3
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">// c: 3
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">// }
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">// 实现如下：
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">&lt;/span>&lt;span class="kr">const&lt;/span> &lt;span class="nx">isObject&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="p">(&lt;/span>&lt;span class="nx">val&lt;/span>&lt;span class="p">)&lt;/span> &lt;span class="p">=&amp;gt;&lt;/span> &lt;span class="k">typeof&lt;/span> &lt;span class="nx">val&lt;/span> &lt;span class="o">===&lt;/span> &lt;span class="s2">&amp;#34;object&amp;#34;&lt;/span> &lt;span class="o">&amp;amp;&amp;amp;&lt;/span> &lt;span class="nx">val&lt;/span> &lt;span class="o">!==&lt;/span> &lt;span class="kc">null&lt;/span>&lt;span class="p">;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="kd">function&lt;/span> &lt;span class="nx">flatten&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="nx">obj&lt;/span>&lt;span class="p">)&lt;/span> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">if&lt;/span> &lt;span class="p">(&lt;/span>&lt;span class="o">!&lt;/span>&lt;span class="nx">isObject&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="nx">obj&lt;/span>&lt;span class="p">))&lt;/span> &lt;span class="k">return&lt;/span>&lt;span class="p">;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="kr">const&lt;/span> &lt;span class="nx">res&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="p">{};&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="kr">const&lt;/span> &lt;span class="nx">dfs&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="p">(&lt;/span>&lt;span class="nx">cur&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="nx">prefix&lt;/span>&lt;span class="p">)&lt;/span> &lt;span class="p">=&amp;gt;&lt;/span> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">if&lt;/span> &lt;span class="p">(&lt;/span>&lt;span class="nx">isObject&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="nx">cur&lt;/span>&lt;span class="p">))&lt;/span> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">if&lt;/span> &lt;span class="p">(&lt;/span>&lt;span class="nb">Array&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">isArray&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="nx">cur&lt;/span>&lt;span class="p">))&lt;/span> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">cur&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">forEach&lt;/span>&lt;span class="p">((&lt;/span>&lt;span class="nx">item&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="nx">index&lt;/span>&lt;span class="p">)&lt;/span> &lt;span class="p">=&amp;gt;&lt;/span> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">dfs&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="nx">item&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="sb">`&lt;/span>&lt;span class="si">${&lt;/span>&lt;span class="nx">prefix&lt;/span>&lt;span class="si">}&lt;/span>&lt;span class="sb">[&lt;/span>&lt;span class="si">${&lt;/span>&lt;span class="nx">index&lt;/span>&lt;span class="si">}&lt;/span>&lt;span class="sb">]`&lt;/span>&lt;span class="p">);&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">});&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">}&lt;/span> &lt;span class="k">else&lt;/span> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">for&lt;/span> &lt;span class="p">(&lt;/span>&lt;span class="kd">let&lt;/span> &lt;span class="nx">key&lt;/span> &lt;span class="k">in&lt;/span> &lt;span class="nx">cur&lt;/span>&lt;span class="p">)&lt;/span> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">dfs&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="nx">cur&lt;/span>&lt;span class="p">[&lt;/span>&lt;span class="nx">key&lt;/span>&lt;span class="p">],&lt;/span> &lt;span class="sb">`&lt;/span>&lt;span class="si">${&lt;/span>&lt;span class="nx">prefix&lt;/span>&lt;span class="si">}${&lt;/span>&lt;span class="nx">prefix&lt;/span> &lt;span class="o">?&lt;/span> &lt;span class="s2">&amp;#34;.&amp;#34;&lt;/span> &lt;span class="o">:&lt;/span> &lt;span class="s2">&amp;#34;&amp;#34;&lt;/span>&lt;span class="si">}${&lt;/span>&lt;span class="nx">key&lt;/span>&lt;span class="si">}&lt;/span>&lt;span class="sb">`&lt;/span>&lt;span class="p">);&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">}&lt;/span> &lt;span class="k">else&lt;/span> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">res&lt;/span>&lt;span class="p">[&lt;/span>&lt;span class="nx">prefix&lt;/span>&lt;span class="p">]&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="nx">cur&lt;/span>&lt;span class="p">;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">};&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">dfs&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="nx">obj&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="s2">&amp;#34;&amp;#34;&lt;/span>&lt;span class="p">);&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">return&lt;/span> &lt;span class="nx">res&lt;/span>&lt;span class="p">;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">// 测试
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">&lt;/span>&lt;span class="nx">console&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">log&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="nx">flatten&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="nx">obj&lt;/span>&lt;span class="p">));&lt;/span>&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>
&lt;/div>
&lt;/div>
&lt;h2 id="实现a--1--a--2--a--3为-true" >实现(a == 1 &amp;amp;&amp;amp; a == 2 &amp;amp;&amp;amp; a == 3)为 true
&lt;a hidden class="anchor" aria-hidden="true" href="#%e5%ae%9e%e7%8e%b0a--1--a--2--a--3%e4%b8%ba-true">#&lt;/a>
&lt;/h2>
&lt;div class="codeBlock">
&lt;details open>
&lt;summary>
&lt;div class="oper">&lt;div class="status">&lt;/div>&lt;/div>
&lt;div class="title">js&lt;/div>
&lt;div class="oper">&lt;button class="codeCopy">复制&lt;/button>&lt;/div>
&lt;/summary>
&lt;/details>
&lt;div class="codeBlockContent">
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt" id="hl-20-1">&lt;a class="lnlinks" href="#hl-20-1"> 1&lt;/a>
&lt;/span>&lt;span class="lnt" id="hl-20-2">&lt;a class="lnlinks" href="#hl-20-2"> 2&lt;/a>
&lt;/span>&lt;span class="lnt" id="hl-20-3">&lt;a class="lnlinks" href="#hl-20-3"> 3&lt;/a>
&lt;/span>&lt;span class="lnt" id="hl-20-4">&lt;a class="lnlinks" href="#hl-20-4"> 4&lt;/a>
&lt;/span>&lt;span class="lnt" id="hl-20-5">&lt;a class="lnlinks" href="#hl-20-5"> 5&lt;/a>
&lt;/span>&lt;span class="lnt" id="hl-20-6">&lt;a class="lnlinks" href="#hl-20-6"> 6&lt;/a>
&lt;/span>&lt;span class="lnt" id="hl-20-7">&lt;a class="lnlinks" href="#hl-20-7"> 7&lt;/a>
&lt;/span>&lt;span class="lnt" id="hl-20-8">&lt;a class="lnlinks" href="#hl-20-8"> 8&lt;/a>
&lt;/span>&lt;span class="lnt" id="hl-20-9">&lt;a class="lnlinks" href="#hl-20-9"> 9&lt;/a>
&lt;/span>&lt;span class="lnt" id="hl-20-10">&lt;a class="lnlinks" href="#hl-20-10">10&lt;/a>
&lt;/span>&lt;span class="lnt" id="hl-20-11">&lt;a class="lnlinks" href="#hl-20-11">11&lt;/a>
&lt;/span>&lt;span class="lnt" id="hl-20-12">&lt;a class="lnlinks" href="#hl-20-12">12&lt;/a>
&lt;/span>&lt;span class="lnt" id="hl-20-13">&lt;a class="lnlinks" href="#hl-20-13">13&lt;/a>
&lt;/span>&lt;span class="lnt" id="hl-20-14">&lt;a class="lnlinks" href="#hl-20-14">14&lt;/a>
&lt;/span>&lt;span class="lnt" id="hl-20-15">&lt;a class="lnlinks" href="#hl-20-15">15&lt;/a>
&lt;/span>&lt;span class="lnt" id="hl-20-16">&lt;a class="lnlinks" href="#hl-20-16">16&lt;/a>
&lt;/span>&lt;span class="lnt" id="hl-20-17">&lt;a class="lnlinks" href="#hl-20-17">17&lt;/a>
&lt;/span>&lt;span class="lnt" id="hl-20-18">&lt;a class="lnlinks" href="#hl-20-18">18&lt;/a>
&lt;/span>&lt;span class="lnt" id="hl-20-19">&lt;a class="lnlinks" href="#hl-20-19">19&lt;/a>
&lt;/span>&lt;span class="lnt" id="hl-20-20">&lt;a class="lnlinks" href="#hl-20-20">20&lt;/a>
&lt;/span>&lt;span class="lnt" id="hl-20-21">&lt;a class="lnlinks" href="#hl-20-21">21&lt;/a>
&lt;/span>&lt;span class="lnt" id="hl-20-22">&lt;a class="lnlinks" href="#hl-20-22">22&lt;/a>
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-js" data-lang="js">&lt;span class="line">&lt;span class="cl">&lt;span class="c1">// 第一种方法
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">&lt;/span>&lt;span class="kd">var&lt;/span> &lt;span class="nx">a&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">i&lt;/span>&lt;span class="o">:&lt;/span> &lt;span class="mi">1&lt;/span>&lt;span class="p">,&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">toString&lt;/span>&lt;span class="o">:&lt;/span> &lt;span class="kd">function&lt;/span> &lt;span class="p">()&lt;/span> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">return&lt;/span> &lt;span class="nx">a&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">i&lt;/span>&lt;span class="o">++&lt;/span>&lt;span class="p">;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">},&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="p">};&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="nx">console&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">log&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="nx">a&lt;/span> &lt;span class="o">==&lt;/span> &lt;span class="mi">1&lt;/span> &lt;span class="o">&amp;amp;&amp;amp;&lt;/span> &lt;span class="nx">a&lt;/span> &lt;span class="o">==&lt;/span> &lt;span class="mi">2&lt;/span> &lt;span class="o">&amp;amp;&amp;amp;&lt;/span> &lt;span class="nx">a&lt;/span> &lt;span class="o">==&lt;/span> &lt;span class="mi">3&lt;/span>&lt;span class="p">);&lt;/span> &lt;span class="c1">// true
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">// 第二种方法
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">&lt;/span>&lt;span class="kd">var&lt;/span> &lt;span class="nx">a&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="p">[&lt;/span>&lt;span class="mi">1&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="mi">2&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="mi">3&lt;/span>&lt;span class="p">];&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="nx">a&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">join&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="nx">a&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">shift&lt;/span>&lt;span class="p">;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="nx">console&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">log&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="nx">a&lt;/span> &lt;span class="o">==&lt;/span> &lt;span class="mi">1&lt;/span> &lt;span class="o">&amp;amp;&amp;amp;&lt;/span> &lt;span class="nx">a&lt;/span> &lt;span class="o">==&lt;/span> &lt;span class="mi">2&lt;/span> &lt;span class="o">&amp;amp;&amp;amp;&lt;/span> &lt;span class="nx">a&lt;/span> &lt;span class="o">==&lt;/span> &lt;span class="mi">3&lt;/span>&lt;span class="p">);&lt;/span> &lt;span class="c1">// true
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">// 第三种方法
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">&lt;/span>&lt;span class="kd">var&lt;/span> &lt;span class="nx">val&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="mi">0&lt;/span>&lt;span class="p">;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="nb">Object&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">defineProperty&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="nb">window&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="s2">&amp;#34;a&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">get&lt;/span>&lt;span class="o">:&lt;/span> &lt;span class="kd">function&lt;/span> &lt;span class="p">()&lt;/span> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">return&lt;/span> &lt;span class="o">++&lt;/span>&lt;span class="nx">val&lt;/span>&lt;span class="p">;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">},&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="p">});&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="nx">console&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">log&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="nx">a&lt;/span> &lt;span class="o">==&lt;/span> &lt;span class="mi">1&lt;/span> &lt;span class="o">&amp;amp;&amp;amp;&lt;/span> &lt;span class="nx">a&lt;/span> &lt;span class="o">==&lt;/span> &lt;span class="mi">2&lt;/span> &lt;span class="o">&amp;amp;&amp;amp;&lt;/span> &lt;span class="nx">a&lt;/span> &lt;span class="o">==&lt;/span> &lt;span class="mi">3&lt;/span>&lt;span class="p">);&lt;/span> &lt;span class="c1">// true
&lt;/span>&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>
&lt;/div>
&lt;/div>
&lt;h2 id="实现限制并发的-promise-调度器" >实现限制并发的 Promise 调度器
&lt;a hidden class="anchor" aria-hidden="true" href="#%e5%ae%9e%e7%8e%b0%e9%99%90%e5%88%b6%e5%b9%b6%e5%8f%91%e7%9a%84-promise-%e8%b0%83%e5%ba%a6%e5%99%a8">#&lt;/a>
&lt;/h2>
&lt;div class="codeBlock">
&lt;details open>
&lt;summary>
&lt;div class="oper">&lt;div class="status">&lt;/div>&lt;/div>
&lt;div class="title">js&lt;/div>
&lt;div class="oper">&lt;button class="codeCopy">复制&lt;/button>&lt;/div>
&lt;/summary>
&lt;/details>
&lt;div class="codeBlockContent">
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt" id="hl-21-1">&lt;a class="lnlinks" href="#hl-21-1"> 1&lt;/a>
&lt;/span>&lt;span class="lnt" id="hl-21-2">&lt;a class="lnlinks" href="#hl-21-2"> 2&lt;/a>
&lt;/span>&lt;span class="lnt" id="hl-21-3">&lt;a class="lnlinks" href="#hl-21-3"> 3&lt;/a>
&lt;/span>&lt;span class="lnt" id="hl-21-4">&lt;a class="lnlinks" href="#hl-21-4"> 4&lt;/a>
&lt;/span>&lt;span class="lnt" id="hl-21-5">&lt;a class="lnlinks" href="#hl-21-5"> 5&lt;/a>
&lt;/span>&lt;span class="lnt" id="hl-21-6">&lt;a class="lnlinks" href="#hl-21-6"> 6&lt;/a>
&lt;/span>&lt;span class="lnt" id="hl-21-7">&lt;a class="lnlinks" href="#hl-21-7"> 7&lt;/a>
&lt;/span>&lt;span class="lnt" id="hl-21-8">&lt;a class="lnlinks" href="#hl-21-8"> 8&lt;/a>
&lt;/span>&lt;span class="lnt" id="hl-21-9">&lt;a class="lnlinks" href="#hl-21-9"> 9&lt;/a>
&lt;/span>&lt;span class="lnt" id="hl-21-10">&lt;a class="lnlinks" href="#hl-21-10">10&lt;/a>
&lt;/span>&lt;span class="lnt" id="hl-21-11">&lt;a class="lnlinks" href="#hl-21-11">11&lt;/a>
&lt;/span>&lt;span class="lnt" id="hl-21-12">&lt;a class="lnlinks" href="#hl-21-12">12&lt;/a>
&lt;/span>&lt;span class="lnt" id="hl-21-13">&lt;a class="lnlinks" href="#hl-21-13">13&lt;/a>
&lt;/span>&lt;span class="lnt" id="hl-21-14">&lt;a class="lnlinks" href="#hl-21-14">14&lt;/a>
&lt;/span>&lt;span class="lnt" id="hl-21-15">&lt;a class="lnlinks" href="#hl-21-15">15&lt;/a>
&lt;/span>&lt;span class="lnt" id="hl-21-16">&lt;a class="lnlinks" href="#hl-21-16">16&lt;/a>
&lt;/span>&lt;span class="lnt" id="hl-21-17">&lt;a class="lnlinks" href="#hl-21-17">17&lt;/a>
&lt;/span>&lt;span class="lnt" id="hl-21-18">&lt;a class="lnlinks" href="#hl-21-18">18&lt;/a>
&lt;/span>&lt;span class="lnt" id="hl-21-19">&lt;a class="lnlinks" href="#hl-21-19">19&lt;/a>
&lt;/span>&lt;span class="lnt" id="hl-21-20">&lt;a class="lnlinks" href="#hl-21-20">20&lt;/a>
&lt;/span>&lt;span class="lnt" id="hl-21-21">&lt;a class="lnlinks" href="#hl-21-21">21&lt;/a>
&lt;/span>&lt;span class="lnt" id="hl-21-22">&lt;a class="lnlinks" href="#hl-21-22">22&lt;/a>
&lt;/span>&lt;span class="lnt" id="hl-21-23">&lt;a class="lnlinks" href="#hl-21-23">23&lt;/a>
&lt;/span>&lt;span class="lnt" id="hl-21-24">&lt;a class="lnlinks" href="#hl-21-24">24&lt;/a>
&lt;/span>&lt;span class="lnt" id="hl-21-25">&lt;a class="lnlinks" href="#hl-21-25">25&lt;/a>
&lt;/span>&lt;span class="lnt" id="hl-21-26">&lt;a class="lnlinks" href="#hl-21-26">26&lt;/a>
&lt;/span>&lt;span class="lnt" id="hl-21-27">&lt;a class="lnlinks" href="#hl-21-27">27&lt;/a>
&lt;/span>&lt;span class="lnt" id="hl-21-28">&lt;a class="lnlinks" href="#hl-21-28">28&lt;/a>
&lt;/span>&lt;span class="lnt" id="hl-21-29">&lt;a class="lnlinks" href="#hl-21-29">29&lt;/a>
&lt;/span>&lt;span class="lnt" id="hl-21-30">&lt;a class="lnlinks" href="#hl-21-30">30&lt;/a>
&lt;/span>&lt;span class="lnt" id="hl-21-31">&lt;a class="lnlinks" href="#hl-21-31">31&lt;/a>
&lt;/span>&lt;span class="lnt" id="hl-21-32">&lt;a class="lnlinks" href="#hl-21-32">32&lt;/a>
&lt;/span>&lt;span class="lnt" id="hl-21-33">&lt;a class="lnlinks" href="#hl-21-33">33&lt;/a>
&lt;/span>&lt;span class="lnt" id="hl-21-34">&lt;a class="lnlinks" href="#hl-21-34">34&lt;/a>
&lt;/span>&lt;span class="lnt" id="hl-21-35">&lt;a class="lnlinks" href="#hl-21-35">35&lt;/a>
&lt;/span>&lt;span class="lnt" id="hl-21-36">&lt;a class="lnlinks" href="#hl-21-36">36&lt;/a>
&lt;/span>&lt;span class="lnt" id="hl-21-37">&lt;a class="lnlinks" href="#hl-21-37">37&lt;/a>
&lt;/span>&lt;span class="lnt" id="hl-21-38">&lt;a class="lnlinks" href="#hl-21-38">38&lt;/a>
&lt;/span>&lt;span class="lnt" id="hl-21-39">&lt;a class="lnlinks" href="#hl-21-39">39&lt;/a>
&lt;/span>&lt;span class="lnt" id="hl-21-40">&lt;a class="lnlinks" href="#hl-21-40">40&lt;/a>
&lt;/span>&lt;span class="lnt" id="hl-21-41">&lt;a class="lnlinks" href="#hl-21-41">41&lt;/a>
&lt;/span>&lt;span class="lnt" id="hl-21-42">&lt;a class="lnlinks" href="#hl-21-42">42&lt;/a>
&lt;/span>&lt;span class="lnt" id="hl-21-43">&lt;a class="lnlinks" href="#hl-21-43">43&lt;/a>
&lt;/span>&lt;span class="lnt" id="hl-21-44">&lt;a class="lnlinks" href="#hl-21-44">44&lt;/a>
&lt;/span>&lt;span class="lnt" id="hl-21-45">&lt;a class="lnlinks" href="#hl-21-45">45&lt;/a>
&lt;/span>&lt;span class="lnt" id="hl-21-46">&lt;a class="lnlinks" href="#hl-21-46">46&lt;/a>
&lt;/span>&lt;span class="lnt" id="hl-21-47">&lt;a class="lnlinks" href="#hl-21-47">47&lt;/a>
&lt;/span>&lt;span class="lnt" id="hl-21-48">&lt;a class="lnlinks" href="#hl-21-48">48&lt;/a>
&lt;/span>&lt;span class="lnt" id="hl-21-49">&lt;a class="lnlinks" href="#hl-21-49">49&lt;/a>
&lt;/span>&lt;span class="lnt" id="hl-21-50">&lt;a class="lnlinks" href="#hl-21-50">50&lt;/a>
&lt;/span>&lt;span class="lnt" id="hl-21-51">&lt;a class="lnlinks" href="#hl-21-51">51&lt;/a>
&lt;/span>&lt;span class="lnt" id="hl-21-52">&lt;a class="lnlinks" href="#hl-21-52">52&lt;/a>
&lt;/span>&lt;span class="lnt" id="hl-21-53">&lt;a class="lnlinks" href="#hl-21-53">53&lt;/a>
&lt;/span>&lt;span class="lnt" id="hl-21-54">&lt;a class="lnlinks" href="#hl-21-54">54&lt;/a>
&lt;/span>&lt;span class="lnt" id="hl-21-55">&lt;a class="lnlinks" href="#hl-21-55">55&lt;/a>
&lt;/span>&lt;span class="lnt" id="hl-21-56">&lt;a class="lnlinks" href="#hl-21-56">56&lt;/a>
&lt;/span>&lt;span class="lnt" id="hl-21-57">&lt;a class="lnlinks" href="#hl-21-57">57&lt;/a>
&lt;/span>&lt;span class="lnt" id="hl-21-58">&lt;a class="lnlinks" href="#hl-21-58">58&lt;/a>
&lt;/span>&lt;span class="lnt" id="hl-21-59">&lt;a class="lnlinks" href="#hl-21-59">59&lt;/a>
&lt;/span>&lt;span class="lnt" id="hl-21-60">&lt;a class="lnlinks" href="#hl-21-60">60&lt;/a>
&lt;/span>&lt;span class="lnt" id="hl-21-61">&lt;a class="lnlinks" href="#hl-21-61">61&lt;/a>
&lt;/span>&lt;span class="lnt" id="hl-21-62">&lt;a class="lnlinks" href="#hl-21-62">62&lt;/a>
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-js" data-lang="js">&lt;span class="line">&lt;span class="cl">&lt;span class="nx">addTask&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="mi">1000&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="s2">&amp;#34;1&amp;#34;&lt;/span>&lt;span class="p">);&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="nx">addTask&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="mi">500&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="s2">&amp;#34;2&amp;#34;&lt;/span>&lt;span class="p">);&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="nx">addTask&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="mi">300&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="s2">&amp;#34;3&amp;#34;&lt;/span>&lt;span class="p">);&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="nx">addTask&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="mi">400&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="s2">&amp;#34;4&amp;#34;&lt;/span>&lt;span class="p">);&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">// 的输出顺序是：2 3 1 4
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">// 整个的完整执行流程：
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">// 一开始1,2两个任务开始执行
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">// 500ms时，2任务执行完毕，输出2，任务3开始执行
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">// 800ms时，3任务执行完毕，输出3，任务4开始执行
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">// 1000ms时，1任务执行完毕，输出1，此时只剩下4任务在执行
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">// 1200ms时，4任务执行完毕，输出4
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">// 实现如下：
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">&lt;/span>&lt;span class="kr">class&lt;/span> &lt;span class="nx">Scheduler&lt;/span> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">constructor&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="nx">limit&lt;/span>&lt;span class="p">)&lt;/span> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">this&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">queue&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="p">[];&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">this&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">limit&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="nx">limit&lt;/span>&lt;span class="p">;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">this&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">count&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="mi">0&lt;/span>&lt;span class="p">;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">add&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="nx">time&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="nx">order&lt;/span>&lt;span class="p">)&lt;/span> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="kr">const&lt;/span> &lt;span class="nx">promiseCreator&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="p">()&lt;/span> &lt;span class="p">=&amp;gt;&lt;/span> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">return&lt;/span> &lt;span class="k">new&lt;/span> &lt;span class="nb">Promise&lt;/span>&lt;span class="p">((&lt;/span>&lt;span class="nx">resolve&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="nx">reject&lt;/span>&lt;span class="p">)&lt;/span> &lt;span class="p">=&amp;gt;&lt;/span> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">setTimeout&lt;/span>&lt;span class="p">(()&lt;/span> &lt;span class="p">=&amp;gt;&lt;/span> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">console&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">log&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="nx">order&lt;/span>&lt;span class="p">);&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">resolve&lt;/span>&lt;span class="p">();&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">},&lt;/span> &lt;span class="nx">time&lt;/span>&lt;span class="p">);&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">});&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">};&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">this&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">queue&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">push&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="nx">promiseCreator&lt;/span>&lt;span class="p">);&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">taskStart&lt;/span>&lt;span class="p">()&lt;/span> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">for&lt;/span> &lt;span class="p">(&lt;/span>&lt;span class="kd">let&lt;/span> &lt;span class="nx">i&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="mi">0&lt;/span>&lt;span class="p">;&lt;/span> &lt;span class="nx">i&lt;/span> &lt;span class="o">&amp;lt;&lt;/span> &lt;span class="k">this&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">limit&lt;/span>&lt;span class="p">;&lt;/span> &lt;span class="nx">i&lt;/span>&lt;span class="o">++&lt;/span>&lt;span class="p">)&lt;/span> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">this&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">request&lt;/span>&lt;span class="p">();&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">request&lt;/span>&lt;span class="p">()&lt;/span> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">if&lt;/span> &lt;span class="p">(&lt;/span>&lt;span class="o">!&lt;/span>&lt;span class="k">this&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">queue&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">length&lt;/span> &lt;span class="o">||&lt;/span> &lt;span class="k">this&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">count&lt;/span> &lt;span class="o">&amp;gt;=&lt;/span> &lt;span class="k">this&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">limit&lt;/span>&lt;span class="p">)&lt;/span> &lt;span class="k">return&lt;/span>&lt;span class="p">;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">this&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">count&lt;/span>&lt;span class="o">++&lt;/span>&lt;span class="p">;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">this&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">queue&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">.&lt;/span>&lt;span class="nx">shift&lt;/span>&lt;span class="p">()()&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">.&lt;/span>&lt;span class="nx">then&lt;/span>&lt;span class="p">(()&lt;/span> &lt;span class="p">=&amp;gt;&lt;/span> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">this&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">count&lt;/span>&lt;span class="o">--&lt;/span>&lt;span class="p">;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">this&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">request&lt;/span>&lt;span class="p">();&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">});&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">// 测试
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">&lt;/span>&lt;span class="kr">const&lt;/span> &lt;span class="nx">scheduler&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="k">new&lt;/span> &lt;span class="nx">Scheduler&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="mi">2&lt;/span>&lt;span class="p">);&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="kr">const&lt;/span> &lt;span class="nx">addTask&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="p">(&lt;/span>&lt;span class="nx">time&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="nx">order&lt;/span>&lt;span class="p">)&lt;/span> &lt;span class="p">=&amp;gt;&lt;/span> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">scheduler&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">add&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="nx">time&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="nx">order&lt;/span>&lt;span class="p">);&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="p">};&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="nx">addTask&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="mi">1000&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="s2">&amp;#34;1&amp;#34;&lt;/span>&lt;span class="p">);&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="nx">addTask&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="mi">500&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="s2">&amp;#34;2&amp;#34;&lt;/span>&lt;span class="p">);&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="nx">addTask&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="mi">300&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="s2">&amp;#34;3&amp;#34;&lt;/span>&lt;span class="p">);&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="nx">addTask&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="mi">400&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="s2">&amp;#34;4&amp;#34;&lt;/span>&lt;span class="p">);&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="nx">scheduler&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">taskStart&lt;/span>&lt;span class="p">();&lt;/span>&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>
&lt;/div>
&lt;/div>
&lt;h2 id="实现-lazyman-函数" >实现 lazyMan 函数
&lt;a hidden class="anchor" aria-hidden="true" href="#%e5%ae%9e%e7%8e%b0-lazyman-%e5%87%bd%e6%95%b0">#&lt;/a>
&lt;/h2>
&lt;div class="codeBlock">
&lt;details open>
&lt;summary>
&lt;div class="oper">&lt;div class="status">&lt;/div>&lt;/div>
&lt;div class="title">js&lt;/div>
&lt;div class="oper">&lt;button class="codeCopy">复制&lt;/button>&lt;/div>
&lt;/summary>
&lt;/details>
&lt;div class="codeBlockContent">
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt" id="hl-22-1">&lt;a class="lnlinks" href="#hl-22-1"> 1&lt;/a>
&lt;/span>&lt;span class="lnt" id="hl-22-2">&lt;a class="lnlinks" href="#hl-22-2"> 2&lt;/a>
&lt;/span>&lt;span class="lnt" id="hl-22-3">&lt;a class="lnlinks" href="#hl-22-3"> 3&lt;/a>
&lt;/span>&lt;span class="lnt" id="hl-22-4">&lt;a class="lnlinks" href="#hl-22-4"> 4&lt;/a>
&lt;/span>&lt;span class="lnt" id="hl-22-5">&lt;a class="lnlinks" href="#hl-22-5"> 5&lt;/a>
&lt;/span>&lt;span class="lnt" id="hl-22-6">&lt;a class="lnlinks" href="#hl-22-6"> 6&lt;/a>
&lt;/span>&lt;span class="lnt" id="hl-22-7">&lt;a class="lnlinks" href="#hl-22-7"> 7&lt;/a>
&lt;/span>&lt;span class="lnt" id="hl-22-8">&lt;a class="lnlinks" href="#hl-22-8"> 8&lt;/a>
&lt;/span>&lt;span class="lnt" id="hl-22-9">&lt;a class="lnlinks" href="#hl-22-9"> 9&lt;/a>
&lt;/span>&lt;span class="lnt" id="hl-22-10">&lt;a class="lnlinks" href="#hl-22-10">10&lt;/a>
&lt;/span>&lt;span class="lnt" id="hl-22-11">&lt;a class="lnlinks" href="#hl-22-11">11&lt;/a>
&lt;/span>&lt;span class="lnt" id="hl-22-12">&lt;a class="lnlinks" href="#hl-22-12">12&lt;/a>
&lt;/span>&lt;span class="lnt" id="hl-22-13">&lt;a class="lnlinks" href="#hl-22-13">13&lt;/a>
&lt;/span>&lt;span class="lnt" id="hl-22-14">&lt;a class="lnlinks" href="#hl-22-14">14&lt;/a>
&lt;/span>&lt;span class="lnt" id="hl-22-15">&lt;a class="lnlinks" href="#hl-22-15">15&lt;/a>
&lt;/span>&lt;span class="lnt" id="hl-22-16">&lt;a class="lnlinks" href="#hl-22-16">16&lt;/a>
&lt;/span>&lt;span class="lnt" id="hl-22-17">&lt;a class="lnlinks" href="#hl-22-17">17&lt;/a>
&lt;/span>&lt;span class="lnt" id="hl-22-18">&lt;a class="lnlinks" href="#hl-22-18">18&lt;/a>
&lt;/span>&lt;span class="lnt" id="hl-22-19">&lt;a class="lnlinks" href="#hl-22-19">19&lt;/a>
&lt;/span>&lt;span class="lnt" id="hl-22-20">&lt;a class="lnlinks" href="#hl-22-20">20&lt;/a>
&lt;/span>&lt;span class="lnt" id="hl-22-21">&lt;a class="lnlinks" href="#hl-22-21">21&lt;/a>
&lt;/span>&lt;span class="lnt" id="hl-22-22">&lt;a class="lnlinks" href="#hl-22-22">22&lt;/a>
&lt;/span>&lt;span class="lnt" id="hl-22-23">&lt;a class="lnlinks" href="#hl-22-23">23&lt;/a>
&lt;/span>&lt;span class="lnt" id="hl-22-24">&lt;a class="lnlinks" href="#hl-22-24">24&lt;/a>
&lt;/span>&lt;span class="lnt" id="hl-22-25">&lt;a class="lnlinks" href="#hl-22-25">25&lt;/a>
&lt;/span>&lt;span class="lnt" id="hl-22-26">&lt;a class="lnlinks" href="#hl-22-26">26&lt;/a>
&lt;/span>&lt;span class="lnt" id="hl-22-27">&lt;a class="lnlinks" href="#hl-22-27">27&lt;/a>
&lt;/span>&lt;span class="lnt" id="hl-22-28">&lt;a class="lnlinks" href="#hl-22-28">28&lt;/a>
&lt;/span>&lt;span class="lnt" id="hl-22-29">&lt;a class="lnlinks" href="#hl-22-29">29&lt;/a>
&lt;/span>&lt;span class="lnt" id="hl-22-30">&lt;a class="lnlinks" href="#hl-22-30">30&lt;/a>
&lt;/span>&lt;span class="lnt" id="hl-22-31">&lt;a class="lnlinks" href="#hl-22-31">31&lt;/a>
&lt;/span>&lt;span class="lnt" id="hl-22-32">&lt;a class="lnlinks" href="#hl-22-32">32&lt;/a>
&lt;/span>&lt;span class="lnt" id="hl-22-33">&lt;a class="lnlinks" href="#hl-22-33">33&lt;/a>
&lt;/span>&lt;span class="lnt" id="hl-22-34">&lt;a class="lnlinks" href="#hl-22-34">34&lt;/a>
&lt;/span>&lt;span class="lnt" id="hl-22-35">&lt;a class="lnlinks" href="#hl-22-35">35&lt;/a>
&lt;/span>&lt;span class="lnt" id="hl-22-36">&lt;a class="lnlinks" href="#hl-22-36">36&lt;/a>
&lt;/span>&lt;span class="lnt" id="hl-22-37">&lt;a class="lnlinks" href="#hl-22-37">37&lt;/a>
&lt;/span>&lt;span class="lnt" id="hl-22-38">&lt;a class="lnlinks" href="#hl-22-38">38&lt;/a>
&lt;/span>&lt;span class="lnt" id="hl-22-39">&lt;a class="lnlinks" href="#hl-22-39">39&lt;/a>
&lt;/span>&lt;span class="lnt" id="hl-22-40">&lt;a class="lnlinks" href="#hl-22-40">40&lt;/a>
&lt;/span>&lt;span class="lnt" id="hl-22-41">&lt;a class="lnlinks" href="#hl-22-41">41&lt;/a>
&lt;/span>&lt;span class="lnt" id="hl-22-42">&lt;a class="lnlinks" href="#hl-22-42">42&lt;/a>
&lt;/span>&lt;span class="lnt" id="hl-22-43">&lt;a class="lnlinks" href="#hl-22-43">43&lt;/a>
&lt;/span>&lt;span class="lnt" id="hl-22-44">&lt;a class="lnlinks" href="#hl-22-44">44&lt;/a>
&lt;/span>&lt;span class="lnt" id="hl-22-45">&lt;a class="lnlinks" href="#hl-22-45">45&lt;/a>
&lt;/span>&lt;span class="lnt" id="hl-22-46">&lt;a class="lnlinks" href="#hl-22-46">46&lt;/a>
&lt;/span>&lt;span class="lnt" id="hl-22-47">&lt;a class="lnlinks" href="#hl-22-47">47&lt;/a>
&lt;/span>&lt;span class="lnt" id="hl-22-48">&lt;a class="lnlinks" href="#hl-22-48">48&lt;/a>
&lt;/span>&lt;span class="lnt" id="hl-22-49">&lt;a class="lnlinks" href="#hl-22-49">49&lt;/a>
&lt;/span>&lt;span class="lnt" id="hl-22-50">&lt;a class="lnlinks" href="#hl-22-50">50&lt;/a>
&lt;/span>&lt;span class="lnt" id="hl-22-51">&lt;a class="lnlinks" href="#hl-22-51">51&lt;/a>
&lt;/span>&lt;span class="lnt" id="hl-22-52">&lt;a class="lnlinks" href="#hl-22-52">52&lt;/a>
&lt;/span>&lt;span class="lnt" id="hl-22-53">&lt;a class="lnlinks" href="#hl-22-53">53&lt;/a>
&lt;/span>&lt;span class="lnt" id="hl-22-54">&lt;a class="lnlinks" href="#hl-22-54">54&lt;/a>
&lt;/span>&lt;span class="lnt" id="hl-22-55">&lt;a class="lnlinks" href="#hl-22-55">55&lt;/a>
&lt;/span>&lt;span class="lnt" id="hl-22-56">&lt;a class="lnlinks" href="#hl-22-56">56&lt;/a>
&lt;/span>&lt;span class="lnt" id="hl-22-57">&lt;a class="lnlinks" href="#hl-22-57">57&lt;/a>
&lt;/span>&lt;span class="lnt" id="hl-22-58">&lt;a class="lnlinks" href="#hl-22-58">58&lt;/a>
&lt;/span>&lt;span class="lnt" id="hl-22-59">&lt;a class="lnlinks" href="#hl-22-59">59&lt;/a>
&lt;/span>&lt;span class="lnt" id="hl-22-60">&lt;a class="lnlinks" href="#hl-22-60">60&lt;/a>
&lt;/span>&lt;span class="lnt" id="hl-22-61">&lt;a class="lnlinks" href="#hl-22-61">61&lt;/a>
&lt;/span>&lt;span class="lnt" id="hl-22-62">&lt;a class="lnlinks" href="#hl-22-62">62&lt;/a>
&lt;/span>&lt;span class="lnt" id="hl-22-63">&lt;a class="lnlinks" href="#hl-22-63">63&lt;/a>
&lt;/span>&lt;span class="lnt" id="hl-22-64">&lt;a class="lnlinks" href="#hl-22-64">64&lt;/a>
&lt;/span>&lt;span class="lnt" id="hl-22-65">&lt;a class="lnlinks" href="#hl-22-65">65&lt;/a>
&lt;/span>&lt;span class="lnt" id="hl-22-66">&lt;a class="lnlinks" href="#hl-22-66">66&lt;/a>
&lt;/span>&lt;span class="lnt" id="hl-22-67">&lt;a class="lnlinks" href="#hl-22-67">67&lt;/a>
&lt;/span>&lt;span class="lnt" id="hl-22-68">&lt;a class="lnlinks" href="#hl-22-68">68&lt;/a>
&lt;/span>&lt;span class="lnt" id="hl-22-69">&lt;a class="lnlinks" href="#hl-22-69">69&lt;/a>
&lt;/span>&lt;span class="lnt" id="hl-22-70">&lt;a class="lnlinks" href="#hl-22-70">70&lt;/a>
&lt;/span>&lt;span class="lnt" id="hl-22-71">&lt;a class="lnlinks" href="#hl-22-71">71&lt;/a>
&lt;/span>&lt;span class="lnt" id="hl-22-72">&lt;a class="lnlinks" href="#hl-22-72">72&lt;/a>
&lt;/span>&lt;span class="lnt" id="hl-22-73">&lt;a class="lnlinks" href="#hl-22-73">73&lt;/a>
&lt;/span>&lt;span class="lnt" id="hl-22-74">&lt;a class="lnlinks" href="#hl-22-74">74&lt;/a>
&lt;/span>&lt;span class="lnt" id="hl-22-75">&lt;a class="lnlinks" href="#hl-22-75">75&lt;/a>
&lt;/span>&lt;span class="lnt" id="hl-22-76">&lt;a class="lnlinks" href="#hl-22-76">76&lt;/a>
&lt;/span>&lt;span class="lnt" id="hl-22-77">&lt;a class="lnlinks" href="#hl-22-77">77&lt;/a>
&lt;/span>&lt;span class="lnt" id="hl-22-78">&lt;a class="lnlinks" href="#hl-22-78">78&lt;/a>
&lt;/span>&lt;span class="lnt" id="hl-22-79">&lt;a class="lnlinks" href="#hl-22-79">79&lt;/a>
&lt;/span>&lt;span class="lnt" id="hl-22-80">&lt;a class="lnlinks" href="#hl-22-80">80&lt;/a>
&lt;/span>&lt;span class="lnt" id="hl-22-81">&lt;a class="lnlinks" href="#hl-22-81">81&lt;/a>
&lt;/span>&lt;span class="lnt" id="hl-22-82">&lt;a class="lnlinks" href="#hl-22-82">82&lt;/a>
&lt;/span>&lt;span class="lnt" id="hl-22-83">&lt;a class="lnlinks" href="#hl-22-83">83&lt;/a>
&lt;/span>&lt;span class="lnt" id="hl-22-84">&lt;a class="lnlinks" href="#hl-22-84">84&lt;/a>
&lt;/span>&lt;span class="lnt" id="hl-22-85">&lt;a class="lnlinks" href="#hl-22-85">85&lt;/a>
&lt;/span>&lt;span class="lnt" id="hl-22-86">&lt;a class="lnlinks" href="#hl-22-86">86&lt;/a>
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-js" data-lang="js">&lt;span class="line">&lt;span class="cl">&lt;span class="c1">// 实现一个LazyMan，可以按照以下方式调用:
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">&lt;/span>&lt;span class="nx">LazyMan&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="err">“&lt;/span>&lt;span class="nx">Hank&lt;/span>&lt;span class="err">”&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="cm">/** 输出:
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="cm"> * Hi! This is Hank!
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="cm"> */&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="nx">LazyMan&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="err">“&lt;/span>&lt;span class="nx">Hank&lt;/span>&lt;span class="err">”&lt;/span>&lt;span class="p">).&lt;/span>&lt;span class="nx">sleep&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="mi">10&lt;/span>&lt;span class="p">).&lt;/span>&lt;span class="nx">eat&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="err">“&lt;/span>&lt;span class="nx">dinner&lt;/span>&lt;span class="err">”&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="cm">/** 输出:
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="cm"> * Hi! This is Hank!
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="cm"> * //等待10秒..
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="cm"> * Wake up after 10
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="cm"> * Eat dinner~
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="cm"> */&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="nx">LazyMan&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="err">“&lt;/span>&lt;span class="nx">Hank&lt;/span>&lt;span class="err">”&lt;/span>&lt;span class="p">).&lt;/span>&lt;span class="nx">eat&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="err">“&lt;/span>&lt;span class="nx">dinner&lt;/span>&lt;span class="err">”&lt;/span>&lt;span class="p">).&lt;/span>&lt;span class="nx">eat&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="err">“&lt;/span>&lt;span class="nx">supper&lt;/span>&lt;span class="err">”&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="cm">/** 输出:
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="cm"> * Hi This is Hank!
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="cm"> * Eat dinner~
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="cm"> * Eat supper~
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="cm"> */&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="nx">LazyMan&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="err">“&lt;/span>&lt;span class="nx">Hank&lt;/span>&lt;span class="err">”&lt;/span>&lt;span class="p">).&lt;/span>&lt;span class="nx">eat&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="err">“&lt;/span>&lt;span class="nx">supper&lt;/span>&lt;span class="err">”&lt;/span>&lt;span class="p">).&lt;/span>&lt;span class="nx">sleepFirst&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="mi">5&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="cm">/** 输出:
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="cm"> * //等待5秒
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="cm"> * Wake up after 5
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="cm"> * Hi This is Hank!
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="cm"> * Eat supper
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="cm"> */&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">// 实现如下：
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">&lt;/span>&lt;span class="kr">class&lt;/span> &lt;span class="nx">_LazyMan&lt;/span> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">constructor&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="nx">name&lt;/span>&lt;span class="p">)&lt;/span> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">this&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">tasks&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="p">[]&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="kr">const&lt;/span> &lt;span class="nx">task&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="p">()&lt;/span> &lt;span class="p">=&amp;gt;&lt;/span> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">console&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">log&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="sb">`Hi! This is &lt;/span>&lt;span class="si">${&lt;/span>&lt;span class="nx">name&lt;/span>&lt;span class="si">}&lt;/span>&lt;span class="sb">`&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">this&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">next&lt;/span>&lt;span class="p">()&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">this&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">tasks&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">push&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="nx">task&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">setTimeout&lt;/span>&lt;span class="p">(()&lt;/span> &lt;span class="p">=&amp;gt;&lt;/span> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">this&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">next&lt;/span>&lt;span class="p">()&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">},&lt;/span> &lt;span class="mi">0&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">next&lt;/span>&lt;span class="p">()&lt;/span> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="kr">const&lt;/span> &lt;span class="nx">task&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="k">this&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">tasks&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">shift&lt;/span>&lt;span class="p">()&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">task&lt;/span> &lt;span class="o">&amp;amp;&amp;amp;&lt;/span> &lt;span class="nx">task&lt;/span>&lt;span class="p">()&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">sleep&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="nx">time&lt;/span>&lt;span class="p">)&lt;/span> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">this&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">sleepWrapper&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="nx">time&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="kc">false&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">return&lt;/span> &lt;span class="k">this&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">sleepFirst&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="nx">time&lt;/span>&lt;span class="p">)&lt;/span> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">this&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">sleepWrapper&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="nx">time&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="kc">true&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">return&lt;/span> &lt;span class="k">this&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">sleepWrapper&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="nx">time&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="nx">first&lt;/span>&lt;span class="p">)&lt;/span> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="kr">const&lt;/span> &lt;span class="nx">task&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="p">()&lt;/span> &lt;span class="p">=&amp;gt;&lt;/span> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">setTimeout&lt;/span>&lt;span class="p">(()&lt;/span> &lt;span class="p">=&amp;gt;&lt;/span> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">console&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">log&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="sb">`Wake up after &lt;/span>&lt;span class="si">${&lt;/span>&lt;span class="nx">time&lt;/span>&lt;span class="si">}&lt;/span>&lt;span class="sb">`&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">this&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">next&lt;/span>&lt;span class="p">()&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">},&lt;/span> &lt;span class="nx">time&lt;/span> &lt;span class="o">*&lt;/span> &lt;span class="mi">1000&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">if&lt;/span> &lt;span class="p">(&lt;/span>&lt;span class="nx">first&lt;/span>&lt;span class="p">)&lt;/span> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">this&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">tasks&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">unshift&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="nx">task&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">}&lt;/span> &lt;span class="k">else&lt;/span> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">this&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">tasks&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">push&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="nx">task&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">eat&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="nx">food&lt;/span>&lt;span class="p">)&lt;/span> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="kr">const&lt;/span> &lt;span class="nx">task&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="p">()&lt;/span> &lt;span class="p">=&amp;gt;&lt;/span> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">console&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">log&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="sb">`Eat &lt;/span>&lt;span class="si">${&lt;/span>&lt;span class="nx">food&lt;/span>&lt;span class="si">}&lt;/span>&lt;span class="sb">`&lt;/span>&lt;span class="p">);&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">this&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">next&lt;/span>&lt;span class="p">();&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">};&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">this&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">tasks&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">push&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="nx">task&lt;/span>&lt;span class="p">);&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">return&lt;/span> &lt;span class="k">this&lt;/span>&lt;span class="p">;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">// 测试
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">&lt;/span>&lt;span class="kr">const&lt;/span> &lt;span class="nx">lazyMan&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="p">(&lt;/span>&lt;span class="nx">name&lt;/span>&lt;span class="p">)&lt;/span> &lt;span class="p">=&amp;gt;&lt;/span> &lt;span class="k">new&lt;/span> &lt;span class="nx">_LazyMan&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="nx">name&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="nx">lazyMan&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s1">&amp;#39;Hank&amp;#39;&lt;/span>&lt;span class="p">).&lt;/span>&lt;span class="nx">sleep&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="mi">1&lt;/span>&lt;span class="p">).&lt;/span>&lt;span class="nx">eat&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s1">&amp;#39;dinner&amp;#39;&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="nx">lazyMan&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s1">&amp;#39;Hank&amp;#39;&lt;/span>&lt;span class="p">).&lt;/span>&lt;span class="nx">eat&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s1">&amp;#39;dinner&amp;#39;&lt;/span>&lt;span class="p">).&lt;/span>&lt;span class="nx">eat&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s1">&amp;#39;supper&amp;#39;&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="nx">lazyMan&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s1">&amp;#39;Hank&amp;#39;&lt;/span>&lt;span class="p">).&lt;/span>&lt;span class="nx">eat&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s1">&amp;#39;supper&amp;#39;&lt;/span>&lt;span class="p">).&lt;/span>&lt;span class="nx">sleepFirst&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="mi">5&lt;/span>&lt;span class="p">)&lt;/span>&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>
&lt;/div>
&lt;/div>
&lt;h2 id="实现-add-函数" >实现 add 函数
&lt;a hidden class="anchor" aria-hidden="true" href="#%e5%ae%9e%e7%8e%b0-add-%e5%87%bd%e6%95%b0">#&lt;/a>
&lt;/h2>
&lt;div class="codeBlock">
&lt;details open>
&lt;summary>
&lt;div class="oper">&lt;div class="status">&lt;/div>&lt;/div>
&lt;div class="title">js&lt;/div>
&lt;div class="oper">&lt;button class="codeCopy">复制&lt;/button>&lt;/div>
&lt;/summary>
&lt;/details>
&lt;div class="codeBlockContent">
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt" id="hl-23-1">&lt;a class="lnlinks" href="#hl-23-1"> 1&lt;/a>
&lt;/span>&lt;span class="lnt" id="hl-23-2">&lt;a class="lnlinks" href="#hl-23-2"> 2&lt;/a>
&lt;/span>&lt;span class="lnt" id="hl-23-3">&lt;a class="lnlinks" href="#hl-23-3"> 3&lt;/a>
&lt;/span>&lt;span class="lnt" id="hl-23-4">&lt;a class="lnlinks" href="#hl-23-4"> 4&lt;/a>
&lt;/span>&lt;span class="lnt" id="hl-23-5">&lt;a class="lnlinks" href="#hl-23-5"> 5&lt;/a>
&lt;/span>&lt;span class="lnt" id="hl-23-6">&lt;a class="lnlinks" href="#hl-23-6"> 6&lt;/a>
&lt;/span>&lt;span class="lnt" id="hl-23-7">&lt;a class="lnlinks" href="#hl-23-7"> 7&lt;/a>
&lt;/span>&lt;span class="lnt" id="hl-23-8">&lt;a class="lnlinks" href="#hl-23-8"> 8&lt;/a>
&lt;/span>&lt;span class="lnt" id="hl-23-9">&lt;a class="lnlinks" href="#hl-23-9"> 9&lt;/a>
&lt;/span>&lt;span class="lnt" id="hl-23-10">&lt;a class="lnlinks" href="#hl-23-10">10&lt;/a>
&lt;/span>&lt;span class="lnt" id="hl-23-11">&lt;a class="lnlinks" href="#hl-23-11">11&lt;/a>
&lt;/span>&lt;span class="lnt" id="hl-23-12">&lt;a class="lnlinks" href="#hl-23-12">12&lt;/a>
&lt;/span>&lt;span class="lnt" id="hl-23-13">&lt;a class="lnlinks" href="#hl-23-13">13&lt;/a>
&lt;/span>&lt;span class="lnt" id="hl-23-14">&lt;a class="lnlinks" href="#hl-23-14">14&lt;/a>
&lt;/span>&lt;span class="lnt" id="hl-23-15">&lt;a class="lnlinks" href="#hl-23-15">15&lt;/a>
&lt;/span>&lt;span class="lnt" id="hl-23-16">&lt;a class="lnlinks" href="#hl-23-16">16&lt;/a>
&lt;/span>&lt;span class="lnt" id="hl-23-17">&lt;a class="lnlinks" href="#hl-23-17">17&lt;/a>
&lt;/span>&lt;span class="lnt" id="hl-23-18">&lt;a class="lnlinks" href="#hl-23-18">18&lt;/a>
&lt;/span>&lt;span class="lnt" id="hl-23-19">&lt;a class="lnlinks" href="#hl-23-19">19&lt;/a>
&lt;/span>&lt;span class="lnt" id="hl-23-20">&lt;a class="lnlinks" href="#hl-23-20">20&lt;/a>
&lt;/span>&lt;span class="lnt" id="hl-23-21">&lt;a class="lnlinks" href="#hl-23-21">21&lt;/a>
&lt;/span>&lt;span class="lnt" id="hl-23-22">&lt;a class="lnlinks" href="#hl-23-22">22&lt;/a>
&lt;/span>&lt;span class="lnt" id="hl-23-23">&lt;a class="lnlinks" href="#hl-23-23">23&lt;/a>
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-js" data-lang="js">&lt;span class="line">&lt;span class="cl">&lt;span class="nx">add&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="mi">1&lt;/span>&lt;span class="p">)(&lt;/span>&lt;span class="mi">2&lt;/span>&lt;span class="p">)(&lt;/span>&lt;span class="mi">3&lt;/span>&lt;span class="p">)()&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="mi">6&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="nx">add&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="mi">1&lt;/span>&lt;span class="p">,&lt;/span>&lt;span class="mi">2&lt;/span>&lt;span class="p">,&lt;/span>&lt;span class="mi">3&lt;/span>&lt;span class="p">)(&lt;/span>&lt;span class="mi">4&lt;/span>&lt;span class="p">)()&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="mi">10&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="kd">function&lt;/span> &lt;span class="nx">add&lt;/span>&lt;span class="p">(...&lt;/span>&lt;span class="nx">args1&lt;/span>&lt;span class="p">)&lt;/span> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="kd">let&lt;/span> &lt;span class="nx">allArgs&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="p">[...&lt;/span>&lt;span class="nx">args1&lt;/span>&lt;span class="p">]&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="kd">function&lt;/span> &lt;span class="nx">fn&lt;/span>&lt;span class="p">(...&lt;/span>&lt;span class="nx">args2&lt;/span>&lt;span class="p">)&lt;/span> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">if&lt;/span> &lt;span class="p">(&lt;/span>&lt;span class="o">!&lt;/span>&lt;span class="nx">args2&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">length&lt;/span>&lt;span class="p">)&lt;/span> &lt;span class="k">return&lt;/span> &lt;span class="nx">fn&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">toString&lt;/span>&lt;span class="p">()&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">allArgs&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="p">[...&lt;/span>&lt;span class="nx">allArgs&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="p">...&lt;/span>&lt;span class="nx">args2&lt;/span>&lt;span class="p">]&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">return&lt;/span> &lt;span class="nx">fn&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">fn&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">toString&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="kd">function&lt;/span> &lt;span class="p">()&lt;/span> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">return&lt;/span> &lt;span class="nx">allArgs&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">reduce&lt;/span>&lt;span class="p">((&lt;/span>&lt;span class="nx">pre&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="nx">next&lt;/span>&lt;span class="p">)&lt;/span> &lt;span class="p">=&amp;gt;&lt;/span> &lt;span class="nx">pre&lt;/span> &lt;span class="o">+&lt;/span> &lt;span class="nx">next&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">return&lt;/span> &lt;span class="nx">fn&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">// 测试
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">&lt;/span>&lt;span class="nx">console&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">log&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="nx">add&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="mi">1&lt;/span>&lt;span class="p">)(&lt;/span>&lt;span class="mi">2&lt;/span>&lt;span class="p">)(&lt;/span>&lt;span class="mi">3&lt;/span>&lt;span class="p">)())&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="nx">console&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">log&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="nx">add&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="mi">1&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="mi">2&lt;/span>&lt;span class="p">)(&lt;/span>&lt;span class="mi">3&lt;/span>&lt;span class="p">)())&lt;/span>&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>
&lt;/div>
&lt;/div>
&lt;h2 id="实现一个合格的深拷贝" >实现一个合格的深拷贝
&lt;a hidden class="anchor" aria-hidden="true" href="#%e5%ae%9e%e7%8e%b0%e4%b8%80%e4%b8%aa%e5%90%88%e6%a0%bc%e7%9a%84%e6%b7%b1%e6%8b%b7%e8%b4%9d">#&lt;/a>
&lt;/h2>
&lt;p>&lt;a href="https://juejin.cn/post/7017991655009566728" target="_blank">深拷贝有这 5 个段位？&lt;/a>&lt;/p></description></item><item><title>常用js</title><link>https://linlccc.com/pending/commonlyusedjs/</link><pubDate>Sun, 16 Jun 2024 23:33:27 +0800</pubDate><author>[Linlccc]</author><guid>https://linlccc.com/pending/commonlyusedjs/</guid><description>&lt;h2 id="防抖" >防抖
&lt;a hidden class="anchor" aria-hidden="true" href="#%e9%98%b2%e6%8a%96">#&lt;/a>
&lt;/h2>
&lt;div class="codeBlock">
&lt;details open>
&lt;summary>
&lt;div class="oper">&lt;div class="status">&lt;/div>&lt;/div>
&lt;div class="title">js&lt;/div>
&lt;div class="oper">&lt;button class="codeCopy">复制&lt;/button>&lt;/div>
&lt;/summary>
&lt;/details>
&lt;div class="codeBlockContent">
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt" id="hl-0-1">&lt;a class="lnlinks" href="#hl-0-1"> 1&lt;/a>
&lt;/span>&lt;span class="lnt" id="hl-0-2">&lt;a class="lnlinks" href="#hl-0-2"> 2&lt;/a>
&lt;/span>&lt;span class="lnt" id="hl-0-3">&lt;a class="lnlinks" href="#hl-0-3"> 3&lt;/a>
&lt;/span>&lt;span class="lnt" id="hl-0-4">&lt;a class="lnlinks" href="#hl-0-4"> 4&lt;/a>
&lt;/span>&lt;span class="lnt" id="hl-0-5">&lt;a class="lnlinks" href="#hl-0-5"> 5&lt;/a>
&lt;/span>&lt;span class="lnt" id="hl-0-6">&lt;a class="lnlinks" href="#hl-0-6"> 6&lt;/a>
&lt;/span>&lt;span class="lnt" id="hl-0-7">&lt;a class="lnlinks" href="#hl-0-7"> 7&lt;/a>
&lt;/span>&lt;span class="lnt" id="hl-0-8">&lt;a class="lnlinks" href="#hl-0-8"> 8&lt;/a>
&lt;/span>&lt;span class="lnt" id="hl-0-9">&lt;a class="lnlinks" href="#hl-0-9"> 9&lt;/a>
&lt;/span>&lt;span class="lnt" id="hl-0-10">&lt;a class="lnlinks" href="#hl-0-10">10&lt;/a>
&lt;/span>&lt;span class="lnt" id="hl-0-11">&lt;a class="lnlinks" href="#hl-0-11">11&lt;/a>
&lt;/span>&lt;span class="lnt" id="hl-0-12">&lt;a class="lnlinks" href="#hl-0-12">12&lt;/a>
&lt;/span>&lt;span class="lnt" id="hl-0-13">&lt;a class="lnlinks" href="#hl-0-13">13&lt;/a>
&lt;/span>&lt;span class="lnt" id="hl-0-14">&lt;a class="lnlinks" href="#hl-0-14">14&lt;/a>
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-js" data-lang="js">&lt;span class="line">&lt;span class="cl">&lt;span class="kd">function&lt;/span> &lt;span class="nx">debounce&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="nx">fn&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="nx">delay&lt;/span>&lt;span class="p">)&lt;/span> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="kd">let&lt;/span> &lt;span class="nx">timer&lt;/span>&lt;span class="p">;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">return&lt;/span> &lt;span class="kd">function&lt;/span> &lt;span class="p">(...&lt;/span>&lt;span class="nx">args&lt;/span>&lt;span class="p">)&lt;/span> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">timer&lt;/span> &lt;span class="o">&amp;amp;&amp;amp;&lt;/span> &lt;span class="nx">clearTimeout&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="nx">timer&lt;/span>&lt;span class="p">);&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">timer&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="nx">setTimeout&lt;/span>&lt;span class="p">(()&lt;/span> &lt;span class="p">=&amp;gt;&lt;/span> &lt;span class="nx">fn&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">apply&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="k">this&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="nx">args&lt;/span>&lt;span class="p">),&lt;/span> &lt;span class="nx">delay&lt;/span>&lt;span class="p">);&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">};&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">// 测试
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">&lt;/span>&lt;span class="kd">function&lt;/span> &lt;span class="nx">task&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="nx">arg&lt;/span>&lt;span class="p">)&lt;/span> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">console&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">log&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s2">&amp;#34;run task&amp;#34;&lt;/span> &lt;span class="o">+&lt;/span> &lt;span class="nx">arg&lt;/span>&lt;span class="p">);&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="kr">const&lt;/span> &lt;span class="nx">debounceTask&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="nx">debounce&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="nx">task&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="mi">1000&lt;/span>&lt;span class="p">);&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="nb">window&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">addEventListener&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s2">&amp;#34;scroll&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="p">()&lt;/span> &lt;span class="p">=&amp;gt;&lt;/span> &lt;span class="nx">debounceTask&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="mi">11&lt;/span>&lt;span class="p">));&lt;/span>&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>
&lt;/div>
&lt;/div>
&lt;h2 id="节流" >节流
&lt;a hidden class="anchor" aria-hidden="true" href="#%e8%8a%82%e6%b5%81">#&lt;/a>
&lt;/h2>
&lt;div class="codeBlock">
&lt;details open>
&lt;summary>
&lt;div class="oper">&lt;div class="status">&lt;/div>&lt;/div>
&lt;div class="title">js&lt;/div>
&lt;div class="oper">&lt;button class="codeCopy">复制&lt;/button>&lt;/div>
&lt;/summary>
&lt;/details>
&lt;div class="codeBlockContent">
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt" id="hl-1-1">&lt;a class="lnlinks" href="#hl-1-1"> 1&lt;/a>
&lt;/span>&lt;span class="lnt" id="hl-1-2">&lt;a class="lnlinks" href="#hl-1-2"> 2&lt;/a>
&lt;/span>&lt;span class="lnt" id="hl-1-3">&lt;a class="lnlinks" href="#hl-1-3"> 3&lt;/a>
&lt;/span>&lt;span class="lnt" id="hl-1-4">&lt;a class="lnlinks" href="#hl-1-4"> 4&lt;/a>
&lt;/span>&lt;span class="lnt" id="hl-1-5">&lt;a class="lnlinks" href="#hl-1-5"> 5&lt;/a>
&lt;/span>&lt;span class="lnt" id="hl-1-6">&lt;a class="lnlinks" href="#hl-1-6"> 6&lt;/a>
&lt;/span>&lt;span class="lnt" id="hl-1-7">&lt;a class="lnlinks" href="#hl-1-7"> 7&lt;/a>
&lt;/span>&lt;span class="lnt" id="hl-1-8">&lt;a class="lnlinks" href="#hl-1-8"> 8&lt;/a>
&lt;/span>&lt;span class="lnt" id="hl-1-9">&lt;a class="lnlinks" href="#hl-1-9"> 9&lt;/a>
&lt;/span>&lt;span class="lnt" id="hl-1-10">&lt;a class="lnlinks" href="#hl-1-10">10&lt;/a>
&lt;/span>&lt;span class="lnt" id="hl-1-11">&lt;a class="lnlinks" href="#hl-1-11">11&lt;/a>
&lt;/span>&lt;span class="lnt" id="hl-1-12">&lt;a class="lnlinks" href="#hl-1-12">12&lt;/a>
&lt;/span>&lt;span class="lnt" id="hl-1-13">&lt;a class="lnlinks" href="#hl-1-13">13&lt;/a>
&lt;/span>&lt;span class="lnt" id="hl-1-14">&lt;a class="lnlinks" href="#hl-1-14">14&lt;/a>
&lt;/span>&lt;span class="lnt" id="hl-1-15">&lt;a class="lnlinks" href="#hl-1-15">15&lt;/a>
&lt;/span>&lt;span class="lnt" id="hl-1-16">&lt;a class="lnlinks" href="#hl-1-16">16&lt;/a>
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-js" data-lang="js">&lt;span class="line">&lt;span class="cl">&lt;span class="kd">function&lt;/span> &lt;span class="nx">throttle&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="nx">fn&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="nx">delay&lt;/span>&lt;span class="p">)&lt;/span> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="kd">let&lt;/span> &lt;span class="nx">last&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="mi">0&lt;/span>&lt;span class="p">;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">return&lt;/span> &lt;span class="kd">function&lt;/span> &lt;span class="p">(...&lt;/span>&lt;span class="nx">args&lt;/span>&lt;span class="p">)&lt;/span> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="kr">const&lt;/span> &lt;span class="nx">now&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="nb">Date&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">now&lt;/span>&lt;span class="p">();&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">if&lt;/span> &lt;span class="p">(&lt;/span>&lt;span class="nx">now&lt;/span> &lt;span class="o">-&lt;/span> &lt;span class="nx">last&lt;/span> &lt;span class="o">&amp;lt;&lt;/span> &lt;span class="nx">delay&lt;/span>&lt;span class="p">)&lt;/span> &lt;span class="k">return&lt;/span>&lt;span class="p">;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">last&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="nx">now&lt;/span>&lt;span class="p">;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">fn&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">apply&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="k">this&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="nx">args&lt;/span>&lt;span class="p">);&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">};&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">// 测试
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">&lt;/span>&lt;span class="kd">function&lt;/span> &lt;span class="nx">task&lt;/span>&lt;span class="p">()&lt;/span> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">console&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">log&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s2">&amp;#34;run task&amp;#34;&lt;/span>&lt;span class="p">);&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="kr">const&lt;/span> &lt;span class="nx">throttleTask&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="nx">throttle&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="nx">task&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="mi">1000&lt;/span>&lt;span class="p">);&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="nb">window&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">addEventListener&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s2">&amp;#34;scroll&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="nx">throttleTask&lt;/span>&lt;span class="p">);&lt;/span>&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>
&lt;/div>
&lt;/div>
&lt;h2 id="深拷贝" >深拷贝
&lt;a hidden class="anchor" aria-hidden="true" href="#%e6%b7%b1%e6%8b%b7%e8%b4%9d">#&lt;/a>
&lt;/h2>
&lt;div class="codeBlock">
&lt;details open>
&lt;summary>
&lt;div class="oper">&lt;div class="status">&lt;/div>&lt;/div>
&lt;div class="title">js&lt;/div>
&lt;div class="oper">&lt;button class="codeCopy">复制&lt;/button>&lt;/div>
&lt;/summary>
&lt;/details>
&lt;div class="codeBlockContent">
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt" id="hl-2-1">&lt;a class="lnlinks" href="#hl-2-1"> 1&lt;/a>
&lt;/span>&lt;span class="lnt" id="hl-2-2">&lt;a class="lnlinks" href="#hl-2-2"> 2&lt;/a>
&lt;/span>&lt;span class="lnt" id="hl-2-3">&lt;a class="lnlinks" href="#hl-2-3"> 3&lt;/a>
&lt;/span>&lt;span class="lnt" id="hl-2-4">&lt;a class="lnlinks" href="#hl-2-4"> 4&lt;/a>
&lt;/span>&lt;span class="lnt" id="hl-2-5">&lt;a class="lnlinks" href="#hl-2-5"> 5&lt;/a>
&lt;/span>&lt;span class="lnt" id="hl-2-6">&lt;a class="lnlinks" href="#hl-2-6"> 6&lt;/a>
&lt;/span>&lt;span class="lnt" id="hl-2-7">&lt;a class="lnlinks" href="#hl-2-7"> 7&lt;/a>
&lt;/span>&lt;span class="lnt" id="hl-2-8">&lt;a class="lnlinks" href="#hl-2-8"> 8&lt;/a>
&lt;/span>&lt;span class="lnt" id="hl-2-9">&lt;a class="lnlinks" href="#hl-2-9"> 9&lt;/a>
&lt;/span>&lt;span class="lnt" id="hl-2-10">&lt;a class="lnlinks" href="#hl-2-10">10&lt;/a>
&lt;/span>&lt;span class="lnt" id="hl-2-11">&lt;a class="lnlinks" href="#hl-2-11">11&lt;/a>
&lt;/span>&lt;span class="lnt" id="hl-2-12">&lt;a class="lnlinks" href="#hl-2-12">12&lt;/a>
&lt;/span>&lt;span class="lnt" id="hl-2-13">&lt;a class="lnlinks" href="#hl-2-13">13&lt;/a>
&lt;/span>&lt;span class="lnt" id="hl-2-14">&lt;a class="lnlinks" href="#hl-2-14">14&lt;/a>
&lt;/span>&lt;span class="lnt" id="hl-2-15">&lt;a class="lnlinks" href="#hl-2-15">15&lt;/a>
&lt;/span>&lt;span class="lnt" id="hl-2-16">&lt;a class="lnlinks" href="#hl-2-16">16&lt;/a>
&lt;/span>&lt;span class="lnt" id="hl-2-17">&lt;a class="lnlinks" href="#hl-2-17">17&lt;/a>
&lt;/span>&lt;span class="lnt" id="hl-2-18">&lt;a class="lnlinks" href="#hl-2-18">18&lt;/a>
&lt;/span>&lt;span class="lnt" id="hl-2-19">&lt;a class="lnlinks" href="#hl-2-19">19&lt;/a>
&lt;/span>&lt;span class="lnt" id="hl-2-20">&lt;a class="lnlinks" href="#hl-2-20">20&lt;/a>
&lt;/span>&lt;span class="lnt" id="hl-2-21">&lt;a class="lnlinks" href="#hl-2-21">21&lt;/a>
&lt;/span>&lt;span class="lnt" id="hl-2-22">&lt;a class="lnlinks" href="#hl-2-22">22&lt;/a>
&lt;/span>&lt;span class="lnt" id="hl-2-23">&lt;a class="lnlinks" href="#hl-2-23">23&lt;/a>
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-js" data-lang="js">&lt;span class="line">&lt;span class="cl">&lt;span class="kd">function&lt;/span> &lt;span class="nx">deepClone&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="nx">obj&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="nx">cache&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="k">new&lt;/span> &lt;span class="nx">WeakMap&lt;/span>&lt;span class="p">())&lt;/span> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">if&lt;/span> &lt;span class="p">(&lt;/span>&lt;span class="k">typeof&lt;/span> &lt;span class="nx">obj&lt;/span> &lt;span class="o">!==&lt;/span> &lt;span class="s2">&amp;#34;object&amp;#34;&lt;/span>&lt;span class="p">)&lt;/span> &lt;span class="k">return&lt;/span> &lt;span class="nx">obj&lt;/span>&lt;span class="p">;&lt;/span> &lt;span class="c1">// 普通类型，直接返回
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">&lt;/span> &lt;span class="k">if&lt;/span> &lt;span class="p">(&lt;/span>&lt;span class="nx">obj&lt;/span> &lt;span class="o">===&lt;/span> &lt;span class="kc">null&lt;/span>&lt;span class="p">)&lt;/span> &lt;span class="k">return&lt;/span> &lt;span class="nx">obj&lt;/span>&lt;span class="p">;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">if&lt;/span> &lt;span class="p">(&lt;/span>&lt;span class="nx">cache&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">get&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="nx">obj&lt;/span>&lt;span class="p">))&lt;/span> &lt;span class="k">return&lt;/span> &lt;span class="nx">cache&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">get&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="nx">obj&lt;/span>&lt;span class="p">);&lt;/span> &lt;span class="c1">// 防止循环引用，程序进入死循环
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">&lt;/span> &lt;span class="k">if&lt;/span> &lt;span class="p">(&lt;/span>&lt;span class="nx">obj&lt;/span> &lt;span class="k">instanceof&lt;/span> &lt;span class="nb">Date&lt;/span>&lt;span class="p">)&lt;/span> &lt;span class="k">return&lt;/span> &lt;span class="k">new&lt;/span> &lt;span class="nb">Date&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="nx">obj&lt;/span>&lt;span class="p">);&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">if&lt;/span> &lt;span class="p">(&lt;/span>&lt;span class="nx">obj&lt;/span> &lt;span class="k">instanceof&lt;/span> &lt;span class="nb">RegExp&lt;/span>&lt;span class="p">)&lt;/span> &lt;span class="k">return&lt;/span> &lt;span class="k">new&lt;/span> &lt;span class="nb">RegExp&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="nx">obj&lt;/span>&lt;span class="p">);&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="c1">// 找到所属原型上的constructor，所属原型上的constructor指向当前对象的构造函数
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">&lt;/span> &lt;span class="kd">let&lt;/span> &lt;span class="nx">cloneObj&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="k">new&lt;/span> &lt;span class="nx">obj&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">constructor&lt;/span>&lt;span class="p">();&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">cache&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">set&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="nx">obj&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="nx">cloneObj&lt;/span>&lt;span class="p">);&lt;/span> &lt;span class="c1">// 缓存拷贝的对象，用于处理循环引用的情况
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">&lt;/span> &lt;span class="k">for&lt;/span> &lt;span class="p">(&lt;/span>&lt;span class="kd">let&lt;/span> &lt;span class="nx">key&lt;/span> &lt;span class="k">in&lt;/span> &lt;span class="nx">obj&lt;/span>&lt;span class="p">)&lt;/span> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">if&lt;/span> &lt;span class="p">(&lt;/span>&lt;span class="nx">obj&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">hasOwnProperty&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="nx">key&lt;/span>&lt;span class="p">))&lt;/span> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">cloneObj&lt;/span>&lt;span class="p">[&lt;/span>&lt;span class="nx">key&lt;/span>&lt;span class="p">]&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="nx">deepClone&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="nx">obj&lt;/span>&lt;span class="p">[&lt;/span>&lt;span class="nx">key&lt;/span>&lt;span class="p">],&lt;/span> &lt;span class="nx">cache&lt;/span>&lt;span class="p">);&lt;/span> &lt;span class="c1">// 递归拷贝
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">&lt;/span> &lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">return&lt;/span> &lt;span class="nx">cloneObj&lt;/span>&lt;span class="p">;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">// 测试
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">&lt;/span>&lt;span class="kr">const&lt;/span> &lt;span class="nx">obj&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="p">{&lt;/span> &lt;span class="nx">name&lt;/span>&lt;span class="o">:&lt;/span> &lt;span class="s2">&amp;#34;Jack&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="nx">address&lt;/span>&lt;span class="o">:&lt;/span> &lt;span class="p">{&lt;/span> &lt;span class="nx">x&lt;/span>&lt;span class="o">:&lt;/span> &lt;span class="mi">100&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="nx">y&lt;/span>&lt;span class="o">:&lt;/span> &lt;span class="mi">200&lt;/span> &lt;span class="p">}&lt;/span> &lt;span class="p">};&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="nx">obj&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">a&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="nx">obj&lt;/span>&lt;span class="p">;&lt;/span> &lt;span class="c1">// 循环引用
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">&lt;/span>&lt;span class="kr">const&lt;/span> &lt;span class="nx">newObj&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="nx">deepClone&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="nx">obj&lt;/span>&lt;span class="p">);&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="nx">console&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">log&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="nx">newObj&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">address&lt;/span> &lt;span class="o">===&lt;/span> &lt;span class="nx">obj&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">address&lt;/span>&lt;span class="p">);&lt;/span> &lt;span class="c1">// false
&lt;/span>&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>
&lt;/div>
&lt;/div>
&lt;h2 id="手写-promise" >手写 Promise
&lt;a hidden class="anchor" aria-hidden="true" href="#%e6%89%8b%e5%86%99-promise">#&lt;/a>
&lt;/h2>
&lt;div class="codeBlock">
&lt;details open>
&lt;summary>
&lt;div class="oper">&lt;div class="status">&lt;/div>&lt;/div>
&lt;div class="title">js&lt;/div>
&lt;div class="oper">&lt;button class="codeCopy">复制&lt;/button>&lt;/div>
&lt;/summary>
&lt;/details>
&lt;div class="codeBlockContent">
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt" id="hl-3-1">&lt;a class="lnlinks" href="#hl-3-1"> 1&lt;/a>
&lt;/span>&lt;span class="lnt" id="hl-3-2">&lt;a class="lnlinks" href="#hl-3-2"> 2&lt;/a>
&lt;/span>&lt;span class="lnt" id="hl-3-3">&lt;a class="lnlinks" href="#hl-3-3"> 3&lt;/a>
&lt;/span>&lt;span class="lnt" id="hl-3-4">&lt;a class="lnlinks" href="#hl-3-4"> 4&lt;/a>
&lt;/span>&lt;span class="lnt" id="hl-3-5">&lt;a class="lnlinks" href="#hl-3-5"> 5&lt;/a>
&lt;/span>&lt;span class="lnt" id="hl-3-6">&lt;a class="lnlinks" href="#hl-3-6"> 6&lt;/a>
&lt;/span>&lt;span class="lnt" id="hl-3-7">&lt;a class="lnlinks" href="#hl-3-7"> 7&lt;/a>
&lt;/span>&lt;span class="lnt" id="hl-3-8">&lt;a class="lnlinks" href="#hl-3-8"> 8&lt;/a>
&lt;/span>&lt;span class="lnt" id="hl-3-9">&lt;a class="lnlinks" href="#hl-3-9"> 9&lt;/a>
&lt;/span>&lt;span class="lnt" id="hl-3-10">&lt;a class="lnlinks" href="#hl-3-10">10&lt;/a>
&lt;/span>&lt;span class="lnt" id="hl-3-11">&lt;a class="lnlinks" href="#hl-3-11">11&lt;/a>
&lt;/span>&lt;span class="lnt" id="hl-3-12">&lt;a class="lnlinks" href="#hl-3-12">12&lt;/a>
&lt;/span>&lt;span class="lnt" id="hl-3-13">&lt;a class="lnlinks" href="#hl-3-13">13&lt;/a>
&lt;/span>&lt;span class="lnt" id="hl-3-14">&lt;a class="lnlinks" href="#hl-3-14">14&lt;/a>
&lt;/span>&lt;span class="lnt" id="hl-3-15">&lt;a class="lnlinks" href="#hl-3-15">15&lt;/a>
&lt;/span>&lt;span class="lnt" id="hl-3-16">&lt;a class="lnlinks" href="#hl-3-16">16&lt;/a>
&lt;/span>&lt;span class="lnt" id="hl-3-17">&lt;a class="lnlinks" href="#hl-3-17">17&lt;/a>
&lt;/span>&lt;span class="lnt" id="hl-3-18">&lt;a class="lnlinks" href="#hl-3-18">18&lt;/a>
&lt;/span>&lt;span class="lnt" id="hl-3-19">&lt;a class="lnlinks" href="#hl-3-19">19&lt;/a>
&lt;/span>&lt;span class="lnt" id="hl-3-20">&lt;a class="lnlinks" href="#hl-3-20">20&lt;/a>
&lt;/span>&lt;span class="lnt" id="hl-3-21">&lt;a class="lnlinks" href="#hl-3-21">21&lt;/a>
&lt;/span>&lt;span class="lnt" id="hl-3-22">&lt;a class="lnlinks" href="#hl-3-22">22&lt;/a>
&lt;/span>&lt;span class="lnt" id="hl-3-23">&lt;a class="lnlinks" href="#hl-3-23">23&lt;/a>
&lt;/span>&lt;span class="lnt" id="hl-3-24">&lt;a class="lnlinks" href="#hl-3-24">24&lt;/a>
&lt;/span>&lt;span class="lnt" id="hl-3-25">&lt;a class="lnlinks" href="#hl-3-25">25&lt;/a>
&lt;/span>&lt;span class="lnt" id="hl-3-26">&lt;a class="lnlinks" href="#hl-3-26">26&lt;/a>
&lt;/span>&lt;span class="lnt" id="hl-3-27">&lt;a class="lnlinks" href="#hl-3-27">27&lt;/a>
&lt;/span>&lt;span class="lnt" id="hl-3-28">&lt;a class="lnlinks" href="#hl-3-28">28&lt;/a>
&lt;/span>&lt;span class="lnt" id="hl-3-29">&lt;a class="lnlinks" href="#hl-3-29">29&lt;/a>
&lt;/span>&lt;span class="lnt" id="hl-3-30">&lt;a class="lnlinks" href="#hl-3-30">30&lt;/a>
&lt;/span>&lt;span class="lnt" id="hl-3-31">&lt;a class="lnlinks" href="#hl-3-31">31&lt;/a>
&lt;/span>&lt;span class="lnt" id="hl-3-32">&lt;a class="lnlinks" href="#hl-3-32">32&lt;/a>
&lt;/span>&lt;span class="lnt" id="hl-3-33">&lt;a class="lnlinks" href="#hl-3-33">33&lt;/a>
&lt;/span>&lt;span class="lnt" id="hl-3-34">&lt;a class="lnlinks" href="#hl-3-34">34&lt;/a>
&lt;/span>&lt;span class="lnt" id="hl-3-35">&lt;a class="lnlinks" href="#hl-3-35">35&lt;/a>
&lt;/span>&lt;span class="lnt" id="hl-3-36">&lt;a class="lnlinks" href="#hl-3-36">36&lt;/a>
&lt;/span>&lt;span class="lnt" id="hl-3-37">&lt;a class="lnlinks" href="#hl-3-37">37&lt;/a>
&lt;/span>&lt;span class="lnt" id="hl-3-38">&lt;a class="lnlinks" href="#hl-3-38">38&lt;/a>
&lt;/span>&lt;span class="lnt" id="hl-3-39">&lt;a class="lnlinks" href="#hl-3-39">39&lt;/a>
&lt;/span>&lt;span class="lnt" id="hl-3-40">&lt;a class="lnlinks" href="#hl-3-40">40&lt;/a>
&lt;/span>&lt;span class="lnt" id="hl-3-41">&lt;a class="lnlinks" href="#hl-3-41">41&lt;/a>
&lt;/span>&lt;span class="lnt" id="hl-3-42">&lt;a class="lnlinks" href="#hl-3-42">42&lt;/a>
&lt;/span>&lt;span class="lnt" id="hl-3-43">&lt;a class="lnlinks" href="#hl-3-43">43&lt;/a>
&lt;/span>&lt;span class="lnt" id="hl-3-44">&lt;a class="lnlinks" href="#hl-3-44">44&lt;/a>
&lt;/span>&lt;span class="lnt" id="hl-3-45">&lt;a class="lnlinks" href="#hl-3-45">45&lt;/a>
&lt;/span>&lt;span class="lnt" id="hl-3-46">&lt;a class="lnlinks" href="#hl-3-46">46&lt;/a>
&lt;/span>&lt;span class="lnt" id="hl-3-47">&lt;a class="lnlinks" href="#hl-3-47">47&lt;/a>
&lt;/span>&lt;span class="lnt" id="hl-3-48">&lt;a class="lnlinks" href="#hl-3-48">48&lt;/a>
&lt;/span>&lt;span class="lnt" id="hl-3-49">&lt;a class="lnlinks" href="#hl-3-49">49&lt;/a>
&lt;/span>&lt;span class="lnt" id="hl-3-50">&lt;a class="lnlinks" href="#hl-3-50">50&lt;/a>
&lt;/span>&lt;span class="lnt" id="hl-3-51">&lt;a class="lnlinks" href="#hl-3-51">51&lt;/a>
&lt;/span>&lt;span class="lnt" id="hl-3-52">&lt;a class="lnlinks" href="#hl-3-52">52&lt;/a>
&lt;/span>&lt;span class="lnt" id="hl-3-53">&lt;a class="lnlinks" href="#hl-3-53">53&lt;/a>
&lt;/span>&lt;span class="lnt" id="hl-3-54">&lt;a class="lnlinks" href="#hl-3-54">54&lt;/a>
&lt;/span>&lt;span class="lnt" id="hl-3-55">&lt;a class="lnlinks" href="#hl-3-55">55&lt;/a>
&lt;/span>&lt;span class="lnt" id="hl-3-56">&lt;a class="lnlinks" href="#hl-3-56">56&lt;/a>
&lt;/span>&lt;span class="lnt" id="hl-3-57">&lt;a class="lnlinks" href="#hl-3-57">57&lt;/a>
&lt;/span>&lt;span class="lnt" id="hl-3-58">&lt;a class="lnlinks" href="#hl-3-58">58&lt;/a>
&lt;/span>&lt;span class="lnt" id="hl-3-59">&lt;a class="lnlinks" href="#hl-3-59">59&lt;/a>
&lt;/span>&lt;span class="lnt" id="hl-3-60">&lt;a class="lnlinks" href="#hl-3-60">60&lt;/a>
&lt;/span>&lt;span class="lnt" id="hl-3-61">&lt;a class="lnlinks" href="#hl-3-61">61&lt;/a>
&lt;/span>&lt;span class="lnt" id="hl-3-62">&lt;a class="lnlinks" href="#hl-3-62">62&lt;/a>
&lt;/span>&lt;span class="lnt" id="hl-3-63">&lt;a class="lnlinks" href="#hl-3-63">63&lt;/a>
&lt;/span>&lt;span class="lnt" id="hl-3-64">&lt;a class="lnlinks" href="#hl-3-64">64&lt;/a>
&lt;/span>&lt;span class="lnt" id="hl-3-65">&lt;a class="lnlinks" href="#hl-3-65">65&lt;/a>
&lt;/span>&lt;span class="lnt" id="hl-3-66">&lt;a class="lnlinks" href="#hl-3-66">66&lt;/a>
&lt;/span>&lt;span class="lnt" id="hl-3-67">&lt;a class="lnlinks" href="#hl-3-67">67&lt;/a>
&lt;/span>&lt;span class="lnt" id="hl-3-68">&lt;a class="lnlinks" href="#hl-3-68">68&lt;/a>
&lt;/span>&lt;span class="lnt" id="hl-3-69">&lt;a class="lnlinks" href="#hl-3-69">69&lt;/a>
&lt;/span>&lt;span class="lnt" id="hl-3-70">&lt;a class="lnlinks" href="#hl-3-70">70&lt;/a>
&lt;/span>&lt;span class="lnt" id="hl-3-71">&lt;a class="lnlinks" href="#hl-3-71">71&lt;/a>
&lt;/span>&lt;span class="lnt" id="hl-3-72">&lt;a class="lnlinks" href="#hl-3-72">72&lt;/a>
&lt;/span>&lt;span class="lnt" id="hl-3-73">&lt;a class="lnlinks" href="#hl-3-73">73&lt;/a>
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-js" data-lang="js">&lt;span class="line">&lt;span class="cl">&lt;span class="kr">class&lt;/span> &lt;span class="nx">MyPromise&lt;/span> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">constructor&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="nx">executor&lt;/span>&lt;span class="p">)&lt;/span> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="c1">// executor执行器
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">&lt;/span> &lt;span class="k">this&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">status&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="s2">&amp;#34;pending&amp;#34;&lt;/span>&lt;span class="p">;&lt;/span> &lt;span class="c1">// 等待状态
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">&lt;/span> &lt;span class="k">this&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">value&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="kc">null&lt;/span>&lt;span class="p">;&lt;/span> &lt;span class="c1">// 成功或失败的参数
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">&lt;/span> &lt;span class="k">this&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">fulfilledCallbacks&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="p">[];&lt;/span> &lt;span class="c1">// 成功的函数队列
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">&lt;/span> &lt;span class="k">this&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">rejectedCallbacks&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="p">[];&lt;/span> &lt;span class="c1">// 失败的函数队列
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">&lt;/span> &lt;span class="kr">const&lt;/span> &lt;span class="nx">that&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="k">this&lt;/span>&lt;span class="p">;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="kd">function&lt;/span> &lt;span class="nx">resolve&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="nx">value&lt;/span>&lt;span class="p">)&lt;/span> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="c1">// 成功的方法
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">&lt;/span> &lt;span class="k">if&lt;/span> &lt;span class="p">(&lt;/span>&lt;span class="nx">that&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">status&lt;/span> &lt;span class="o">===&lt;/span> &lt;span class="s2">&amp;#34;pending&amp;#34;&lt;/span>&lt;span class="p">)&lt;/span> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">that&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">status&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="s2">&amp;#34;resolved&amp;#34;&lt;/span>&lt;span class="p">;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">that&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">value&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="nx">value&lt;/span>&lt;span class="p">;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">that&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">fulfilledCallbacks&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">forEach&lt;/span>&lt;span class="p">((&lt;/span>&lt;span class="nx">myFn&lt;/span>&lt;span class="p">)&lt;/span> &lt;span class="p">=&amp;gt;&lt;/span> &lt;span class="nx">myFn&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="nx">that&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">value&lt;/span>&lt;span class="p">));&lt;/span> &lt;span class="c1">//执行回调方法
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">&lt;/span> &lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="kd">function&lt;/span> &lt;span class="nx">reject&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="nx">value&lt;/span>&lt;span class="p">)&lt;/span> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="c1">//失败的方法
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">&lt;/span> &lt;span class="k">if&lt;/span> &lt;span class="p">(&lt;/span>&lt;span class="nx">that&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">status&lt;/span> &lt;span class="o">===&lt;/span> &lt;span class="s2">&amp;#34;pending&amp;#34;&lt;/span>&lt;span class="p">)&lt;/span> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">that&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">status&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="s2">&amp;#34;rejected&amp;#34;&lt;/span>&lt;span class="p">;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">that&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">value&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="nx">value&lt;/span>&lt;span class="p">;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">that&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">rejectedCallbacks&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">forEach&lt;/span>&lt;span class="p">((&lt;/span>&lt;span class="nx">myFn&lt;/span>&lt;span class="p">)&lt;/span> &lt;span class="p">=&amp;gt;&lt;/span> &lt;span class="nx">myFn&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="nx">that&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">value&lt;/span>&lt;span class="p">));&lt;/span> &lt;span class="c1">//执行回调方法
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">&lt;/span> &lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">try&lt;/span> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">executor&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="nx">resolve&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="nx">reject&lt;/span>&lt;span class="p">);&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">}&lt;/span> &lt;span class="k">catch&lt;/span> &lt;span class="p">(&lt;/span>&lt;span class="nx">err&lt;/span>&lt;span class="p">)&lt;/span> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">reject&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="nx">err&lt;/span>&lt;span class="p">);&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">then&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="nx">onFulfilled&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="nx">onRejected&lt;/span>&lt;span class="p">)&lt;/span> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">if&lt;/span> &lt;span class="p">(&lt;/span>&lt;span class="k">this&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">status&lt;/span> &lt;span class="o">===&lt;/span> &lt;span class="s2">&amp;#34;pending&amp;#34;&lt;/span>&lt;span class="p">)&lt;/span> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="c1">// 等待状态，添加回调函数到成功的函数队列
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">&lt;/span> &lt;span class="k">this&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">fulfilledCallbacks&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">push&lt;/span>&lt;span class="p">(()&lt;/span> &lt;span class="p">=&amp;gt;&lt;/span> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">onFulfilled&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="k">this&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">value&lt;/span>&lt;span class="p">);&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">});&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="c1">// 等待状态，添加回调函数到失败的函数队列
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">&lt;/span> &lt;span class="k">this&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">rejectedCallbacks&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">push&lt;/span>&lt;span class="p">(()&lt;/span> &lt;span class="p">=&amp;gt;&lt;/span> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">onRejected&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="k">this&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">value&lt;/span>&lt;span class="p">);&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">});&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">if&lt;/span> &lt;span class="p">(&lt;/span>&lt;span class="k">this&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">status&lt;/span> &lt;span class="o">===&lt;/span> &lt;span class="s2">&amp;#34;resolved&amp;#34;&lt;/span>&lt;span class="p">)&lt;/span> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="c1">// 支持同步调用
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">&lt;/span> &lt;span class="nx">console&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">log&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s2">&amp;#34;this&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="k">this&lt;/span>&lt;span class="p">);&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">onFulfilled&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="k">this&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">value&lt;/span>&lt;span class="p">);&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">if&lt;/span> &lt;span class="p">(&lt;/span>&lt;span class="k">this&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">status&lt;/span> &lt;span class="o">===&lt;/span> &lt;span class="s2">&amp;#34;rejected&amp;#34;&lt;/span>&lt;span class="p">)&lt;/span> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="c1">// 支持同步调用
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">&lt;/span> &lt;span class="nx">onRejected&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="k">this&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">value&lt;/span>&lt;span class="p">);&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">// 测试
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">&lt;/span>&lt;span class="kd">function&lt;/span> &lt;span class="nx">fn&lt;/span>&lt;span class="p">()&lt;/span> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">return&lt;/span> &lt;span class="k">new&lt;/span> &lt;span class="nx">MyPromise&lt;/span>&lt;span class="p">((&lt;/span>&lt;span class="nx">resolve&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="nx">reject&lt;/span>&lt;span class="p">)&lt;/span> &lt;span class="p">=&amp;gt;&lt;/span> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">setTimeout&lt;/span>&lt;span class="p">(()&lt;/span> &lt;span class="p">=&amp;gt;&lt;/span> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">if&lt;/span> &lt;span class="p">(&lt;/span>&lt;span class="nb">Math&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">random&lt;/span>&lt;span class="p">()&lt;/span> &lt;span class="o">&amp;gt;&lt;/span> &lt;span class="mf">0.6&lt;/span>&lt;span class="p">)&lt;/span> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">resolve&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="mi">1&lt;/span>&lt;span class="p">);&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">}&lt;/span> &lt;span class="k">else&lt;/span> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">reject&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="mi">2&lt;/span>&lt;span class="p">);&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">},&lt;/span> &lt;span class="mi">1000&lt;/span>&lt;span class="p">);&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">});&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="nx">fn&lt;/span>&lt;span class="p">().&lt;/span>&lt;span class="nx">then&lt;/span>&lt;span class="p">(&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">(&lt;/span>&lt;span class="nx">res&lt;/span>&lt;span class="p">)&lt;/span> &lt;span class="p">=&amp;gt;&lt;/span> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">console&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">log&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s2">&amp;#34;res&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="nx">res&lt;/span>&lt;span class="p">);&lt;/span> &lt;span class="c1">// res 1
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">&lt;/span> &lt;span class="p">},&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">(&lt;/span>&lt;span class="nx">err&lt;/span>&lt;span class="p">)&lt;/span> &lt;span class="p">=&amp;gt;&lt;/span> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">console&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">log&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s2">&amp;#34;err&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="nx">err&lt;/span>&lt;span class="p">);&lt;/span> &lt;span class="c1">// err 2
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">&lt;/span> &lt;span class="p">},&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="p">);&lt;/span>&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>
&lt;/div>
&lt;/div>
&lt;h2 id="异步控制并发数" >异步控制并发数
&lt;a hidden class="anchor" aria-hidden="true" href="#%e5%bc%82%e6%ad%a5%e6%8e%a7%e5%88%b6%e5%b9%b6%e5%8f%91%e6%95%b0">#&lt;/a>
&lt;/h2>
&lt;div class="codeBlock">
&lt;details open>
&lt;summary>
&lt;div class="oper">&lt;div class="status">&lt;/div>&lt;/div>
&lt;div class="title">js&lt;/div>
&lt;div class="oper">&lt;button class="codeCopy">复制&lt;/button>&lt;/div>
&lt;/summary>
&lt;/details>
&lt;div class="codeBlockContent">
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt" id="hl-4-1">&lt;a class="lnlinks" href="#hl-4-1"> 1&lt;/a>
&lt;/span>&lt;span class="lnt" id="hl-4-2">&lt;a class="lnlinks" href="#hl-4-2"> 2&lt;/a>
&lt;/span>&lt;span class="lnt" id="hl-4-3">&lt;a class="lnlinks" href="#hl-4-3"> 3&lt;/a>
&lt;/span>&lt;span class="lnt" id="hl-4-4">&lt;a class="lnlinks" href="#hl-4-4"> 4&lt;/a>
&lt;/span>&lt;span class="lnt" id="hl-4-5">&lt;a class="lnlinks" href="#hl-4-5"> 5&lt;/a>
&lt;/span>&lt;span class="lnt" id="hl-4-6">&lt;a class="lnlinks" href="#hl-4-6"> 6&lt;/a>
&lt;/span>&lt;span class="lnt" id="hl-4-7">&lt;a class="lnlinks" href="#hl-4-7"> 7&lt;/a>
&lt;/span>&lt;span class="lnt" id="hl-4-8">&lt;a class="lnlinks" href="#hl-4-8"> 8&lt;/a>
&lt;/span>&lt;span class="lnt" id="hl-4-9">&lt;a class="lnlinks" href="#hl-4-9"> 9&lt;/a>
&lt;/span>&lt;span class="lnt" id="hl-4-10">&lt;a class="lnlinks" href="#hl-4-10">10&lt;/a>
&lt;/span>&lt;span class="lnt" id="hl-4-11">&lt;a class="lnlinks" href="#hl-4-11">11&lt;/a>
&lt;/span>&lt;span class="lnt" id="hl-4-12">&lt;a class="lnlinks" href="#hl-4-12">12&lt;/a>
&lt;/span>&lt;span class="lnt" id="hl-4-13">&lt;a class="lnlinks" href="#hl-4-13">13&lt;/a>
&lt;/span>&lt;span class="lnt" id="hl-4-14">&lt;a class="lnlinks" href="#hl-4-14">14&lt;/a>
&lt;/span>&lt;span class="lnt" id="hl-4-15">&lt;a class="lnlinks" href="#hl-4-15">15&lt;/a>
&lt;/span>&lt;span class="lnt" id="hl-4-16">&lt;a class="lnlinks" href="#hl-4-16">16&lt;/a>
&lt;/span>&lt;span class="lnt" id="hl-4-17">&lt;a class="lnlinks" href="#hl-4-17">17&lt;/a>
&lt;/span>&lt;span class="lnt" id="hl-4-18">&lt;a class="lnlinks" href="#hl-4-18">18&lt;/a>
&lt;/span>&lt;span class="lnt" id="hl-4-19">&lt;a class="lnlinks" href="#hl-4-19">19&lt;/a>
&lt;/span>&lt;span class="lnt" id="hl-4-20">&lt;a class="lnlinks" href="#hl-4-20">20&lt;/a>
&lt;/span>&lt;span class="lnt" id="hl-4-21">&lt;a class="lnlinks" href="#hl-4-21">21&lt;/a>
&lt;/span>&lt;span class="lnt" id="hl-4-22">&lt;a class="lnlinks" href="#hl-4-22">22&lt;/a>
&lt;/span>&lt;span class="lnt" id="hl-4-23">&lt;a class="lnlinks" href="#hl-4-23">23&lt;/a>
&lt;/span>&lt;span class="lnt" id="hl-4-24">&lt;a class="lnlinks" href="#hl-4-24">24&lt;/a>
&lt;/span>&lt;span class="lnt" id="hl-4-25">&lt;a class="lnlinks" href="#hl-4-25">25&lt;/a>
&lt;/span>&lt;span class="lnt" id="hl-4-26">&lt;a class="lnlinks" href="#hl-4-26">26&lt;/a>
&lt;/span>&lt;span class="lnt" id="hl-4-27">&lt;a class="lnlinks" href="#hl-4-27">27&lt;/a>
&lt;/span>&lt;span class="lnt" id="hl-4-28">&lt;a class="lnlinks" href="#hl-4-28">28&lt;/a>
&lt;/span>&lt;span class="lnt" id="hl-4-29">&lt;a class="lnlinks" href="#hl-4-29">29&lt;/a>
&lt;/span>&lt;span class="lnt" id="hl-4-30">&lt;a class="lnlinks" href="#hl-4-30">30&lt;/a>
&lt;/span>&lt;span class="lnt" id="hl-4-31">&lt;a class="lnlinks" href="#hl-4-31">31&lt;/a>
&lt;/span>&lt;span class="lnt" id="hl-4-32">&lt;a class="lnlinks" href="#hl-4-32">32&lt;/a>
&lt;/span>&lt;span class="lnt" id="hl-4-33">&lt;a class="lnlinks" href="#hl-4-33">33&lt;/a>
&lt;/span>&lt;span class="lnt" id="hl-4-34">&lt;a class="lnlinks" href="#hl-4-34">34&lt;/a>
&lt;/span>&lt;span class="lnt" id="hl-4-35">&lt;a class="lnlinks" href="#hl-4-35">35&lt;/a>
&lt;/span>&lt;span class="lnt" id="hl-4-36">&lt;a class="lnlinks" href="#hl-4-36">36&lt;/a>
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-js" data-lang="js">&lt;span class="line">&lt;span class="cl">&lt;span class="kd">function&lt;/span> &lt;span class="nx">limitRequest&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="nx">urls&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="p">[],&lt;/span> &lt;span class="nx">limit&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="mi">5&lt;/span>&lt;span class="p">)&lt;/span> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">return&lt;/span> &lt;span class="k">new&lt;/span> &lt;span class="nb">Promise&lt;/span>&lt;span class="p">((&lt;/span>&lt;span class="nx">resolve&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="nx">reject&lt;/span>&lt;span class="p">)&lt;/span> &lt;span class="p">=&amp;gt;&lt;/span> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="kr">const&lt;/span> &lt;span class="nx">len&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="nx">urls&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">length&lt;/span>&lt;span class="p">;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="kd">let&lt;/span> &lt;span class="nx">count&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="mi">0&lt;/span>&lt;span class="p">;&lt;/span> &lt;span class="c1">// 当前进行到第几个任务
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="kr">const&lt;/span> &lt;span class="nx">start&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="kr">async&lt;/span> &lt;span class="p">()&lt;/span> &lt;span class="p">=&amp;gt;&lt;/span> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="kr">const&lt;/span> &lt;span class="nx">url&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="nx">urls&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">shift&lt;/span>&lt;span class="p">();&lt;/span> &lt;span class="c1">// 从数组中拿取第一个任务
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">&lt;/span> &lt;span class="k">if&lt;/span> &lt;span class="p">(&lt;/span>&lt;span class="nx">url&lt;/span>&lt;span class="p">)&lt;/span> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">try&lt;/span> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="kr">await&lt;/span> &lt;span class="nx">axios&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">post&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="nx">url&lt;/span>&lt;span class="p">);&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">if&lt;/span> &lt;span class="p">(&lt;/span>&lt;span class="nx">count&lt;/span> &lt;span class="o">==&lt;/span> &lt;span class="nx">len&lt;/span> &lt;span class="o">-&lt;/span> &lt;span class="mi">1&lt;/span>&lt;span class="p">)&lt;/span> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="c1">// 最后一个任务
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">&lt;/span> &lt;span class="nx">resolve&lt;/span>&lt;span class="p">();&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">}&lt;/span> &lt;span class="k">else&lt;/span> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">count&lt;/span>&lt;span class="o">++&lt;/span>&lt;span class="p">;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="c1">// 成功，启动下一个任务
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">&lt;/span> &lt;span class="nx">start&lt;/span>&lt;span class="p">();&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">}&lt;/span> &lt;span class="k">catch&lt;/span> &lt;span class="p">(&lt;/span>&lt;span class="nx">e&lt;/span>&lt;span class="p">)&lt;/span> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">count&lt;/span>&lt;span class="o">++&lt;/span>&lt;span class="p">;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="c1">// 失败，也启动下一个任务
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">&lt;/span> &lt;span class="nx">start&lt;/span>&lt;span class="p">();&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">};&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="c1">// 启动limit个任务
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">&lt;/span> &lt;span class="k">while&lt;/span> &lt;span class="p">(&lt;/span>&lt;span class="nx">limit&lt;/span> &lt;span class="o">&amp;gt;&lt;/span> &lt;span class="mi">0&lt;/span>&lt;span class="p">)&lt;/span> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">start&lt;/span>&lt;span class="p">();&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">limit&lt;/span> &lt;span class="o">-=&lt;/span> &lt;span class="mi">1&lt;/span>&lt;span class="p">;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">});&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">// 测试
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">&lt;/span>&lt;span class="nx">limitRequest&lt;/span>&lt;span class="p">([&lt;/span>&lt;span class="s2">&amp;#34;http://xxa&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="s2">&amp;#34;http://xxb&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="s2">&amp;#34;http://xxc&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="s2">&amp;#34;http://xxd&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="s2">&amp;#34;http://xxe&amp;#34;&lt;/span>&lt;span class="p">]);&lt;/span>&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>
&lt;/div>
&lt;/div>
&lt;h2 id="继承" >继承
&lt;a hidden class="anchor" aria-hidden="true" href="#%e7%bb%a7%e6%89%bf">#&lt;/a>
&lt;/h2>
&lt;h3 id="es5-继承" >ES5 继承
&lt;a hidden class="anchor" aria-hidden="true" href="#es5-%e7%bb%a7%e6%89%bf">#&lt;/a>
&lt;/h3>
&lt;div class="codeBlock">
&lt;details open>
&lt;summary>
&lt;div class="oper">&lt;div class="status">&lt;/div>&lt;/div>
&lt;div class="title">js&lt;/div>
&lt;div class="oper">&lt;button class="codeCopy">复制&lt;/button>&lt;/div>
&lt;/summary>
&lt;/details>
&lt;div class="codeBlockContent">
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt" id="hl-5-1">&lt;a class="lnlinks" href="#hl-5-1"> 1&lt;/a>
&lt;/span>&lt;span class="lnt" id="hl-5-2">&lt;a class="lnlinks" href="#hl-5-2"> 2&lt;/a>
&lt;/span>&lt;span class="lnt" id="hl-5-3">&lt;a class="lnlinks" href="#hl-5-3"> 3&lt;/a>
&lt;/span>&lt;span class="lnt" id="hl-5-4">&lt;a class="lnlinks" href="#hl-5-4"> 4&lt;/a>
&lt;/span>&lt;span class="lnt" id="hl-5-5">&lt;a class="lnlinks" href="#hl-5-5"> 5&lt;/a>
&lt;/span>&lt;span class="lnt" id="hl-5-6">&lt;a class="lnlinks" href="#hl-5-6"> 6&lt;/a>
&lt;/span>&lt;span class="lnt" id="hl-5-7">&lt;a class="lnlinks" href="#hl-5-7"> 7&lt;/a>
&lt;/span>&lt;span class="lnt" id="hl-5-8">&lt;a class="lnlinks" href="#hl-5-8"> 8&lt;/a>
&lt;/span>&lt;span class="lnt" id="hl-5-9">&lt;a class="lnlinks" href="#hl-5-9"> 9&lt;/a>
&lt;/span>&lt;span class="lnt" id="hl-5-10">&lt;a class="lnlinks" href="#hl-5-10">10&lt;/a>
&lt;/span>&lt;span class="lnt" id="hl-5-11">&lt;a class="lnlinks" href="#hl-5-11">11&lt;/a>
&lt;/span>&lt;span class="lnt" id="hl-5-12">&lt;a class="lnlinks" href="#hl-5-12">12&lt;/a>
&lt;/span>&lt;span class="lnt" id="hl-5-13">&lt;a class="lnlinks" href="#hl-5-13">13&lt;/a>
&lt;/span>&lt;span class="lnt" id="hl-5-14">&lt;a class="lnlinks" href="#hl-5-14">14&lt;/a>
&lt;/span>&lt;span class="lnt" id="hl-5-15">&lt;a class="lnlinks" href="#hl-5-15">15&lt;/a>
&lt;/span>&lt;span class="lnt" id="hl-5-16">&lt;a class="lnlinks" href="#hl-5-16">16&lt;/a>
&lt;/span>&lt;span class="lnt" id="hl-5-17">&lt;a class="lnlinks" href="#hl-5-17">17&lt;/a>
&lt;/span>&lt;span class="lnt" id="hl-5-18">&lt;a class="lnlinks" href="#hl-5-18">18&lt;/a>
&lt;/span>&lt;span class="lnt" id="hl-5-19">&lt;a class="lnlinks" href="#hl-5-19">19&lt;/a>
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-js" data-lang="js">&lt;span class="line">&lt;span class="cl">&lt;span class="kd">function&lt;/span> &lt;span class="nx">Parent&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="nx">name&lt;/span>&lt;span class="p">)&lt;/span> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">this&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">name&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="nx">name&lt;/span>&lt;span class="p">;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="nx">Parent&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">prototype&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">eat&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="kd">function&lt;/span> &lt;span class="p">()&lt;/span> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">console&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">log&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="k">this&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">name&lt;/span> &lt;span class="o">+&lt;/span> &lt;span class="s2">&amp;#34; is eating&amp;#34;&lt;/span>&lt;span class="p">);&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="p">};&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="kd">function&lt;/span> &lt;span class="nx">Child&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="nx">name&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="nx">age&lt;/span>&lt;span class="p">)&lt;/span> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">Parent&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">call&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="k">this&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="nx">name&lt;/span>&lt;span class="p">);&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">this&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">age&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="nx">age&lt;/span>&lt;span class="p">;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="nx">Child&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">prototype&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="nb">Object&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">create&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="nx">Parent&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">prototype&lt;/span>&lt;span class="p">);&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="nx">Child&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">prototype&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">constructor&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="nx">Child&lt;/span>&lt;span class="p">;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">// 测试
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">&lt;/span>&lt;span class="kd">let&lt;/span> &lt;span class="nx">xm&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="k">new&lt;/span> &lt;span class="nx">Child&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s2">&amp;#34;xiaoming&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="mi">12&lt;/span>&lt;span class="p">);&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="nx">console&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">log&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="nx">xm&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">name&lt;/span>&lt;span class="p">);&lt;/span> &lt;span class="c1">// xiaoming
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">&lt;/span>&lt;span class="nx">console&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">log&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="nx">xm&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">age&lt;/span>&lt;span class="p">);&lt;/span> &lt;span class="c1">// 12
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">&lt;/span>&lt;span class="nx">xm&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">eat&lt;/span>&lt;span class="p">();&lt;/span> &lt;span class="c1">// xiaoming is eating
&lt;/span>&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>
&lt;/div>
&lt;/div>
&lt;h3 id="es6-继承" >ES6 继承
&lt;a hidden class="anchor" aria-hidden="true" href="#es6-%e7%bb%a7%e6%89%bf">#&lt;/a>
&lt;/h3>
&lt;div class="codeBlock">
&lt;details open>
&lt;summary>
&lt;div class="oper">&lt;div class="status">&lt;/div>&lt;/div>
&lt;div class="title">js&lt;/div>
&lt;div class="oper">&lt;button class="codeCopy">复制&lt;/button>&lt;/div>
&lt;/summary>
&lt;/details>
&lt;div class="codeBlockContent">
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt" id="hl-6-1">&lt;a class="lnlinks" href="#hl-6-1"> 1&lt;/a>
&lt;/span>&lt;span class="lnt" id="hl-6-2">&lt;a class="lnlinks" href="#hl-6-2"> 2&lt;/a>
&lt;/span>&lt;span class="lnt" id="hl-6-3">&lt;a class="lnlinks" href="#hl-6-3"> 3&lt;/a>
&lt;/span>&lt;span class="lnt" id="hl-6-4">&lt;a class="lnlinks" href="#hl-6-4"> 4&lt;/a>
&lt;/span>&lt;span class="lnt" id="hl-6-5">&lt;a class="lnlinks" href="#hl-6-5"> 5&lt;/a>
&lt;/span>&lt;span class="lnt" id="hl-6-6">&lt;a class="lnlinks" href="#hl-6-6"> 6&lt;/a>
&lt;/span>&lt;span class="lnt" id="hl-6-7">&lt;a class="lnlinks" href="#hl-6-7"> 7&lt;/a>
&lt;/span>&lt;span class="lnt" id="hl-6-8">&lt;a class="lnlinks" href="#hl-6-8"> 8&lt;/a>
&lt;/span>&lt;span class="lnt" id="hl-6-9">&lt;a class="lnlinks" href="#hl-6-9"> 9&lt;/a>
&lt;/span>&lt;span class="lnt" id="hl-6-10">&lt;a class="lnlinks" href="#hl-6-10">10&lt;/a>
&lt;/span>&lt;span class="lnt" id="hl-6-11">&lt;a class="lnlinks" href="#hl-6-11">11&lt;/a>
&lt;/span>&lt;span class="lnt" id="hl-6-12">&lt;a class="lnlinks" href="#hl-6-12">12&lt;/a>
&lt;/span>&lt;span class="lnt" id="hl-6-13">&lt;a class="lnlinks" href="#hl-6-13">13&lt;/a>
&lt;/span>&lt;span class="lnt" id="hl-6-14">&lt;a class="lnlinks" href="#hl-6-14">14&lt;/a>
&lt;/span>&lt;span class="lnt" id="hl-6-15">&lt;a class="lnlinks" href="#hl-6-15">15&lt;/a>
&lt;/span>&lt;span class="lnt" id="hl-6-16">&lt;a class="lnlinks" href="#hl-6-16">16&lt;/a>
&lt;/span>&lt;span class="lnt" id="hl-6-17">&lt;a class="lnlinks" href="#hl-6-17">17&lt;/a>
&lt;/span>&lt;span class="lnt" id="hl-6-18">&lt;a class="lnlinks" href="#hl-6-18">18&lt;/a>
&lt;/span>&lt;span class="lnt" id="hl-6-19">&lt;a class="lnlinks" href="#hl-6-19">19&lt;/a>
&lt;/span>&lt;span class="lnt" id="hl-6-20">&lt;a class="lnlinks" href="#hl-6-20">20&lt;/a>
&lt;/span>&lt;span class="lnt" id="hl-6-21">&lt;a class="lnlinks" href="#hl-6-21">21&lt;/a>
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-js" data-lang="js">&lt;span class="line">&lt;span class="cl">&lt;span class="kr">class&lt;/span> &lt;span class="nx">Parent&lt;/span> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">constructor&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="nx">name&lt;/span>&lt;span class="p">)&lt;/span> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">this&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">name&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="nx">name&lt;/span>&lt;span class="p">;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">eat&lt;/span>&lt;span class="p">()&lt;/span> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">console&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">log&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="k">this&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">name&lt;/span> &lt;span class="o">+&lt;/span> &lt;span class="s2">&amp;#34; is eating&amp;#34;&lt;/span>&lt;span class="p">);&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="kr">class&lt;/span> &lt;span class="nx">Child&lt;/span> &lt;span class="kr">extends&lt;/span> &lt;span class="nx">Parent&lt;/span> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">constructor&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="nx">name&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="nx">age&lt;/span>&lt;span class="p">)&lt;/span> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="kr">super&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="nx">name&lt;/span>&lt;span class="p">);&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">this&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">age&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="nx">age&lt;/span>&lt;span class="p">;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">// 测试
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">&lt;/span>&lt;span class="kd">let&lt;/span> &lt;span class="nx">xm&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="k">new&lt;/span> &lt;span class="nx">Child&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s2">&amp;#34;xiaoming&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="mi">12&lt;/span>&lt;span class="p">);&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="nx">console&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">log&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="nx">xm&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">name&lt;/span>&lt;span class="p">);&lt;/span> &lt;span class="c1">// xiaoming
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">&lt;/span>&lt;span class="nx">console&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">log&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="nx">xm&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">age&lt;/span>&lt;span class="p">);&lt;/span> &lt;span class="c1">// 12
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">&lt;/span>&lt;span class="nx">xm&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">eat&lt;/span>&lt;span class="p">();&lt;/span> &lt;span class="c1">// xiaoming is eating
&lt;/span>&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>
&lt;/div>
&lt;/div>
&lt;h2 id="数组排序" >数组排序
&lt;a hidden class="anchor" aria-hidden="true" href="#%e6%95%b0%e7%bb%84%e6%8e%92%e5%ba%8f">#&lt;/a>
&lt;/h2>
&lt;h3 id="sort-排序" >sort 排序
&lt;a hidden class="anchor" aria-hidden="true" href="#sort-%e6%8e%92%e5%ba%8f">#&lt;/a>
&lt;/h3>
&lt;div class="codeBlock">
&lt;details open>
&lt;summary>
&lt;div class="oper">&lt;div class="status">&lt;/div>&lt;/div>
&lt;div class="title">js&lt;/div>
&lt;div class="oper">&lt;button class="codeCopy">复制&lt;/button>&lt;/div>
&lt;/summary>
&lt;/details>
&lt;div class="codeBlockContent">
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt" id="hl-7-1">&lt;a class="lnlinks" href="#hl-7-1">1&lt;/a>
&lt;/span>&lt;span class="lnt" id="hl-7-2">&lt;a class="lnlinks" href="#hl-7-2">2&lt;/a>
&lt;/span>&lt;span class="lnt" id="hl-7-3">&lt;a class="lnlinks" href="#hl-7-3">3&lt;/a>
&lt;/span>&lt;span class="lnt" id="hl-7-4">&lt;a class="lnlinks" href="#hl-7-4">4&lt;/a>
&lt;/span>&lt;span class="lnt" id="hl-7-5">&lt;a class="lnlinks" href="#hl-7-5">5&lt;/a>
&lt;/span>&lt;span class="lnt" id="hl-7-6">&lt;a class="lnlinks" href="#hl-7-6">6&lt;/a>
&lt;/span>&lt;span class="lnt" id="hl-7-7">&lt;a class="lnlinks" href="#hl-7-7">7&lt;/a>
&lt;/span>&lt;span class="lnt" id="hl-7-8">&lt;a class="lnlinks" href="#hl-7-8">8&lt;/a>
&lt;/span>&lt;span class="lnt" id="hl-7-9">&lt;a class="lnlinks" href="#hl-7-9">9&lt;/a>
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-js" data-lang="js">&lt;span class="line">&lt;span class="cl">&lt;span class="c1">// 对数字进行排序，简写
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">&lt;/span>&lt;span class="kr">const&lt;/span> &lt;span class="nx">arr&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="p">[&lt;/span>&lt;span class="mi">3&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="mi">2&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="mi">4&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="mi">1&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="mi">5&lt;/span>&lt;span class="p">];&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="nx">arr&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">sort&lt;/span>&lt;span class="p">((&lt;/span>&lt;span class="nx">a&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="nx">b&lt;/span>&lt;span class="p">)&lt;/span> &lt;span class="p">=&amp;gt;&lt;/span> &lt;span class="nx">a&lt;/span> &lt;span class="o">-&lt;/span> &lt;span class="nx">b&lt;/span>&lt;span class="p">);&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="nx">console&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">log&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="nx">arr&lt;/span>&lt;span class="p">);&lt;/span> &lt;span class="c1">// [1, 2, 3, 4, 5]
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">// 对字母进行排序，简写
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">&lt;/span>&lt;span class="kr">const&lt;/span> &lt;span class="nx">arr&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="p">[&lt;/span>&lt;span class="s2">&amp;#34;b&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="s2">&amp;#34;c&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="s2">&amp;#34;a&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="s2">&amp;#34;e&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="s2">&amp;#34;d&amp;#34;&lt;/span>&lt;span class="p">];&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="nx">arr&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">sort&lt;/span>&lt;span class="p">();&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="nx">console&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">log&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="nx">arr&lt;/span>&lt;span class="p">);&lt;/span> &lt;span class="c1">// [&amp;#39;a&amp;#39;, &amp;#39;b&amp;#39;, &amp;#39;c&amp;#39;, &amp;#39;d&amp;#39;, &amp;#39;e&amp;#39;]
&lt;/span>&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>
&lt;/div>
&lt;/div>
&lt;h3 id="冒泡排序" >冒泡排序
&lt;a hidden class="anchor" aria-hidden="true" href="#%e5%86%92%e6%b3%a1%e6%8e%92%e5%ba%8f">#&lt;/a>
&lt;/h3>
&lt;div class="codeBlock">
&lt;details open>
&lt;summary>
&lt;div class="oper">&lt;div class="status">&lt;/div>&lt;/div>
&lt;div class="title">js&lt;/div>
&lt;div class="oper">&lt;button class="codeCopy">复制&lt;/button>&lt;/div>
&lt;/summary>
&lt;/details>
&lt;div class="codeBlockContent">
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt" id="hl-8-1">&lt;a class="lnlinks" href="#hl-8-1"> 1&lt;/a>
&lt;/span>&lt;span class="lnt" id="hl-8-2">&lt;a class="lnlinks" href="#hl-8-2"> 2&lt;/a>
&lt;/span>&lt;span class="lnt" id="hl-8-3">&lt;a class="lnlinks" href="#hl-8-3"> 3&lt;/a>
&lt;/span>&lt;span class="lnt" id="hl-8-4">&lt;a class="lnlinks" href="#hl-8-4"> 4&lt;/a>
&lt;/span>&lt;span class="lnt" id="hl-8-5">&lt;a class="lnlinks" href="#hl-8-5"> 5&lt;/a>
&lt;/span>&lt;span class="lnt" id="hl-8-6">&lt;a class="lnlinks" href="#hl-8-6"> 6&lt;/a>
&lt;/span>&lt;span class="lnt" id="hl-8-7">&lt;a class="lnlinks" href="#hl-8-7"> 7&lt;/a>
&lt;/span>&lt;span class="lnt" id="hl-8-8">&lt;a class="lnlinks" href="#hl-8-8"> 8&lt;/a>
&lt;/span>&lt;span class="lnt" id="hl-8-9">&lt;a class="lnlinks" href="#hl-8-9"> 9&lt;/a>
&lt;/span>&lt;span class="lnt" id="hl-8-10">&lt;a class="lnlinks" href="#hl-8-10">10&lt;/a>
&lt;/span>&lt;span class="lnt" id="hl-8-11">&lt;a class="lnlinks" href="#hl-8-11">11&lt;/a>
&lt;/span>&lt;span class="lnt" id="hl-8-12">&lt;a class="lnlinks" href="#hl-8-12">12&lt;/a>
&lt;/span>&lt;span class="lnt" id="hl-8-13">&lt;a class="lnlinks" href="#hl-8-13">13&lt;/a>
&lt;/span>&lt;span class="lnt" id="hl-8-14">&lt;a class="lnlinks" href="#hl-8-14">14&lt;/a>
&lt;/span>&lt;span class="lnt" id="hl-8-15">&lt;a class="lnlinks" href="#hl-8-15">15&lt;/a>
&lt;/span>&lt;span class="lnt" id="hl-8-16">&lt;a class="lnlinks" href="#hl-8-16">16&lt;/a>
&lt;/span>&lt;span class="lnt" id="hl-8-17">&lt;a class="lnlinks" href="#hl-8-17">17&lt;/a>
&lt;/span>&lt;span class="lnt" id="hl-8-18">&lt;a class="lnlinks" href="#hl-8-18">18&lt;/a>
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-js" data-lang="js">&lt;span class="line">&lt;span class="cl">&lt;span class="kd">function&lt;/span> &lt;span class="nx">bubbleSort&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="nx">arr&lt;/span>&lt;span class="p">)&lt;/span> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="kd">let&lt;/span> &lt;span class="nx">len&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="nx">arr&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">length&lt;/span>&lt;span class="p">;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">for&lt;/span> &lt;span class="p">(&lt;/span>&lt;span class="kd">let&lt;/span> &lt;span class="nx">i&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="mi">0&lt;/span>&lt;span class="p">;&lt;/span> &lt;span class="nx">i&lt;/span> &lt;span class="o">&amp;lt;&lt;/span> &lt;span class="nx">len&lt;/span> &lt;span class="o">-&lt;/span> &lt;span class="mi">1&lt;/span>&lt;span class="p">;&lt;/span> &lt;span class="nx">i&lt;/span>&lt;span class="o">++&lt;/span>&lt;span class="p">)&lt;/span> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="c1">// 从第一个元素开始，比较相邻的两个元素，前者大就交换位置
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">&lt;/span> &lt;span class="k">for&lt;/span> &lt;span class="p">(&lt;/span>&lt;span class="kd">let&lt;/span> &lt;span class="nx">j&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="mi">0&lt;/span>&lt;span class="p">;&lt;/span> &lt;span class="nx">j&lt;/span> &lt;span class="o">&amp;lt;&lt;/span> &lt;span class="nx">len&lt;/span> &lt;span class="o">-&lt;/span> &lt;span class="mi">1&lt;/span> &lt;span class="o">-&lt;/span> &lt;span class="nx">i&lt;/span>&lt;span class="p">;&lt;/span> &lt;span class="nx">j&lt;/span>&lt;span class="o">++&lt;/span>&lt;span class="p">)&lt;/span> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">if&lt;/span> &lt;span class="p">(&lt;/span>&lt;span class="nx">arr&lt;/span>&lt;span class="p">[&lt;/span>&lt;span class="nx">j&lt;/span>&lt;span class="p">]&lt;/span> &lt;span class="o">&amp;gt;&lt;/span> &lt;span class="nx">arr&lt;/span>&lt;span class="p">[&lt;/span>&lt;span class="nx">j&lt;/span> &lt;span class="o">+&lt;/span> &lt;span class="mi">1&lt;/span>&lt;span class="p">])&lt;/span> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="kd">let&lt;/span> &lt;span class="nx">num&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="nx">arr&lt;/span>&lt;span class="p">[&lt;/span>&lt;span class="nx">j&lt;/span>&lt;span class="p">];&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">arr&lt;/span>&lt;span class="p">[&lt;/span>&lt;span class="nx">j&lt;/span>&lt;span class="p">]&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="nx">arr&lt;/span>&lt;span class="p">[&lt;/span>&lt;span class="nx">j&lt;/span> &lt;span class="o">+&lt;/span> &lt;span class="mi">1&lt;/span>&lt;span class="p">];&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">arr&lt;/span>&lt;span class="p">[&lt;/span>&lt;span class="nx">j&lt;/span> &lt;span class="o">+&lt;/span> &lt;span class="mi">1&lt;/span>&lt;span class="p">]&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="nx">num&lt;/span>&lt;span class="p">;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="c1">// 每次遍历结束，都能找到一个最大值，放在数组最后
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">&lt;/span> &lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">return&lt;/span> &lt;span class="nx">arr&lt;/span>&lt;span class="p">;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">//测试
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">&lt;/span>&lt;span class="nx">console&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">log&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="nx">bubbleSort&lt;/span>&lt;span class="p">([&lt;/span>&lt;span class="mi">2&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="mi">3&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="mi">1&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="mi">5&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="mi">4&lt;/span>&lt;span class="p">]));&lt;/span> &lt;span class="c1">// [1, 2, 3, 4, 5]
&lt;/span>&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>
&lt;/div>
&lt;/div>
&lt;h2 id="数组去重" >数组去重
&lt;a hidden class="anchor" aria-hidden="true" href="#%e6%95%b0%e7%bb%84%e5%8e%bb%e9%87%8d">#&lt;/a>
&lt;/h2>
&lt;h3 id="set-去重" >Set 去重
&lt;a hidden class="anchor" aria-hidden="true" href="#set-%e5%8e%bb%e9%87%8d">#&lt;/a>
&lt;/h3>
&lt;div class="codeBlock">
&lt;details open>
&lt;summary>
&lt;div class="oper">&lt;div class="status">&lt;/div>&lt;/div>
&lt;div class="title">js&lt;/div>
&lt;div class="oper">&lt;button class="codeCopy">复制&lt;/button>&lt;/div>
&lt;/summary>
&lt;/details>
&lt;div class="codeBlockContent">
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt" id="hl-9-1">&lt;a class="lnlinks" href="#hl-9-1">1&lt;/a>
&lt;/span>&lt;span class="lnt" id="hl-9-2">&lt;a class="lnlinks" href="#hl-9-2">2&lt;/a>
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-js" data-lang="js">&lt;span class="line">&lt;span class="cl">&lt;span class="nx">cosnt&lt;/span> &lt;span class="nx">newArr&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="p">[...&lt;/span>&lt;span class="k">new&lt;/span> &lt;span class="nx">Set&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="nx">arr&lt;/span>&lt;span class="p">)];&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="kr">const&lt;/span> &lt;span class="nx">newArr&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="nb">Array&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">from&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="k">new&lt;/span> &lt;span class="nx">Set&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="nx">arr&lt;/span>&lt;span class="p">));&lt;/span>&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>
&lt;/div>
&lt;/div>
&lt;h3 id="indexof-去重" >indexOf 去重
&lt;a hidden class="anchor" aria-hidden="true" href="#indexof-%e5%8e%bb%e9%87%8d">#&lt;/a>
&lt;/h3>
&lt;div class="codeBlock">
&lt;details open>
&lt;summary>
&lt;div class="oper">&lt;div class="status">&lt;/div>&lt;/div>
&lt;div class="title">js&lt;/div>
&lt;div class="oper">&lt;button class="codeCopy">复制&lt;/button>&lt;/div>
&lt;/summary>
&lt;/details>
&lt;div class="codeBlockContent">
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt" id="hl-10-1">&lt;a class="lnlinks" href="#hl-10-1"> 1&lt;/a>
&lt;/span>&lt;span class="lnt" id="hl-10-2">&lt;a class="lnlinks" href="#hl-10-2"> 2&lt;/a>
&lt;/span>&lt;span class="lnt" id="hl-10-3">&lt;a class="lnlinks" href="#hl-10-3"> 3&lt;/a>
&lt;/span>&lt;span class="lnt" id="hl-10-4">&lt;a class="lnlinks" href="#hl-10-4"> 4&lt;/a>
&lt;/span>&lt;span class="lnt" id="hl-10-5">&lt;a class="lnlinks" href="#hl-10-5"> 5&lt;/a>
&lt;/span>&lt;span class="lnt" id="hl-10-6">&lt;a class="lnlinks" href="#hl-10-6"> 6&lt;/a>
&lt;/span>&lt;span class="lnt" id="hl-10-7">&lt;a class="lnlinks" href="#hl-10-7"> 7&lt;/a>
&lt;/span>&lt;span class="lnt" id="hl-10-8">&lt;a class="lnlinks" href="#hl-10-8"> 8&lt;/a>
&lt;/span>&lt;span class="lnt" id="hl-10-9">&lt;a class="lnlinks" href="#hl-10-9"> 9&lt;/a>
&lt;/span>&lt;span class="lnt" id="hl-10-10">&lt;a class="lnlinks" href="#hl-10-10">10&lt;/a>
&lt;/span>&lt;span class="lnt" id="hl-10-11">&lt;a class="lnlinks" href="#hl-10-11">11&lt;/a>
&lt;/span>&lt;span class="lnt" id="hl-10-12">&lt;a class="lnlinks" href="#hl-10-12">12&lt;/a>
&lt;/span>&lt;span class="lnt" id="hl-10-13">&lt;a class="lnlinks" href="#hl-10-13">13&lt;/a>
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-js" data-lang="js">&lt;span class="line">&lt;span class="cl">&lt;span class="kd">function&lt;/span> &lt;span class="nx">resetArr&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="nx">arr&lt;/span>&lt;span class="p">)&lt;/span> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="kd">let&lt;/span> &lt;span class="nx">res&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="p">[];&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">arr&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">forEach&lt;/span>&lt;span class="p">((&lt;/span>&lt;span class="nx">item&lt;/span>&lt;span class="p">)&lt;/span> &lt;span class="p">=&amp;gt;&lt;/span> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">if&lt;/span> &lt;span class="p">(&lt;/span>&lt;span class="nx">res&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">indexOf&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="nx">item&lt;/span>&lt;span class="p">)&lt;/span> &lt;span class="o">===&lt;/span> &lt;span class="o">-&lt;/span>&lt;span class="mi">1&lt;/span>&lt;span class="p">)&lt;/span> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">res&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">push&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="nx">item&lt;/span>&lt;span class="p">);&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">});&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">return&lt;/span> &lt;span class="nx">res&lt;/span>&lt;span class="p">;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">// 测试
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">&lt;/span>&lt;span class="kr">const&lt;/span> &lt;span class="nx">arr&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="p">[&lt;/span>&lt;span class="mi">1&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="mi">1&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="mi">2&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="mi">3&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="mi">3&lt;/span>&lt;span class="p">];&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="nx">console&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">log&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="nx">resetArr&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="nx">arr&lt;/span>&lt;span class="p">));&lt;/span> &lt;span class="c1">// [1, 2, 3]
&lt;/span>&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>
&lt;/div>
&lt;/div>
&lt;h2 id="获取-url-参数" >获取 url 参数
&lt;a hidden class="anchor" aria-hidden="true" href="#%e8%8e%b7%e5%8f%96-url-%e5%8f%82%e6%95%b0">#&lt;/a>
&lt;/h2>
&lt;h3 id="urlsearchparams-方法" >URLSearchParams 方法
&lt;a hidden class="anchor" aria-hidden="true" href="#urlsearchparams-%e6%96%b9%e6%b3%95">#&lt;/a>
&lt;/h3>
&lt;div class="codeBlock">
&lt;details open>
&lt;summary>
&lt;div class="oper">&lt;div class="status">&lt;/div>&lt;/div>
&lt;div class="title">js&lt;/div>
&lt;div class="oper">&lt;button class="codeCopy">复制&lt;/button>&lt;/div>
&lt;/summary>
&lt;/details>
&lt;div class="codeBlockContent">
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt" id="hl-11-1">&lt;a class="lnlinks" href="#hl-11-1">1&lt;/a>
&lt;/span>&lt;span class="lnt" id="hl-11-2">&lt;a class="lnlinks" href="#hl-11-2">2&lt;/a>
&lt;/span>&lt;span class="lnt" id="hl-11-3">&lt;a class="lnlinks" href="#hl-11-3">3&lt;/a>
&lt;/span>&lt;span class="lnt" id="hl-11-4">&lt;a class="lnlinks" href="#hl-11-4">4&lt;/a>
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-js" data-lang="js">&lt;span class="line">&lt;span class="cl">&lt;span class="c1">// 创建一个URLSearchParams实例
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">&lt;/span>&lt;span class="kr">const&lt;/span> &lt;span class="nx">urlSearchParams&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="k">new&lt;/span> &lt;span class="nx">URLSearchParams&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="nb">window&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">location&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">search&lt;/span>&lt;span class="p">);&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">// 把键值对列表转换为一个对象
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">&lt;/span>&lt;span class="kr">const&lt;/span> &lt;span class="nx">params&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="nb">Object&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">fromEntries&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="nx">urlSearchParams&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">entries&lt;/span>&lt;span class="p">());&lt;/span>&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>
&lt;/div>
&lt;/div>
&lt;h3 id="split-方法" >split 方法
&lt;a hidden class="anchor" aria-hidden="true" href="#split-%e6%96%b9%e6%b3%95">#&lt;/a>
&lt;/h3>
&lt;div class="codeBlock">
&lt;details open>
&lt;summary>
&lt;div class="oper">&lt;div class="status">&lt;/div>&lt;/div>
&lt;div class="title">js&lt;/div>
&lt;div class="oper">&lt;button class="codeCopy">复制&lt;/button>&lt;/div>
&lt;/summary>
&lt;/details>
&lt;div class="codeBlockContent">
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt" id="hl-12-1">&lt;a class="lnlinks" href="#hl-12-1"> 1&lt;/a>
&lt;/span>&lt;span class="lnt" id="hl-12-2">&lt;a class="lnlinks" href="#hl-12-2"> 2&lt;/a>
&lt;/span>&lt;span class="lnt" id="hl-12-3">&lt;a class="lnlinks" href="#hl-12-3"> 3&lt;/a>
&lt;/span>&lt;span class="lnt" id="hl-12-4">&lt;a class="lnlinks" href="#hl-12-4"> 4&lt;/a>
&lt;/span>&lt;span class="lnt" id="hl-12-5">&lt;a class="lnlinks" href="#hl-12-5"> 5&lt;/a>
&lt;/span>&lt;span class="lnt" id="hl-12-6">&lt;a class="lnlinks" href="#hl-12-6"> 6&lt;/a>
&lt;/span>&lt;span class="lnt" id="hl-12-7">&lt;a class="lnlinks" href="#hl-12-7"> 7&lt;/a>
&lt;/span>&lt;span class="lnt" id="hl-12-8">&lt;a class="lnlinks" href="#hl-12-8"> 8&lt;/a>
&lt;/span>&lt;span class="lnt" id="hl-12-9">&lt;a class="lnlinks" href="#hl-12-9"> 9&lt;/a>
&lt;/span>&lt;span class="lnt" id="hl-12-10">&lt;a class="lnlinks" href="#hl-12-10">10&lt;/a>
&lt;/span>&lt;span class="lnt" id="hl-12-11">&lt;a class="lnlinks" href="#hl-12-11">11&lt;/a>
&lt;/span>&lt;span class="lnt" id="hl-12-12">&lt;a class="lnlinks" href="#hl-12-12">12&lt;/a>
&lt;/span>&lt;span class="lnt" id="hl-12-13">&lt;a class="lnlinks" href="#hl-12-13">13&lt;/a>
&lt;/span>&lt;span class="lnt" id="hl-12-14">&lt;a class="lnlinks" href="#hl-12-14">14&lt;/a>
&lt;/span>&lt;span class="lnt" id="hl-12-15">&lt;a class="lnlinks" href="#hl-12-15">15&lt;/a>
&lt;/span>&lt;span class="lnt" id="hl-12-16">&lt;a class="lnlinks" href="#hl-12-16">16&lt;/a>
&lt;/span>&lt;span class="lnt" id="hl-12-17">&lt;a class="lnlinks" href="#hl-12-17">17&lt;/a>
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-js" data-lang="js">&lt;span class="line">&lt;span class="cl">&lt;span class="kd">function&lt;/span> &lt;span class="nx">getParams&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="nx">url&lt;/span>&lt;span class="p">)&lt;/span> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="kr">const&lt;/span> &lt;span class="nx">res&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="p">{};&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">if&lt;/span> &lt;span class="p">(&lt;/span>&lt;span class="nx">url&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">includes&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s2">&amp;#34;?&amp;#34;&lt;/span>&lt;span class="p">))&lt;/span> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="kr">const&lt;/span> &lt;span class="nx">str&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="nx">url&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">split&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s2">&amp;#34;?&amp;#34;&lt;/span>&lt;span class="p">)[&lt;/span>&lt;span class="mi">1&lt;/span>&lt;span class="p">];&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="kr">const&lt;/span> &lt;span class="nx">arr&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="nx">str&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">split&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s2">&amp;#34;&amp;amp;&amp;#34;&lt;/span>&lt;span class="p">);&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">arr&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">forEach&lt;/span>&lt;span class="p">((&lt;/span>&lt;span class="nx">item&lt;/span>&lt;span class="p">)&lt;/span> &lt;span class="p">=&amp;gt;&lt;/span> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="kr">const&lt;/span> &lt;span class="nx">key&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="nx">item&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">split&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s2">&amp;#34;=&amp;#34;&lt;/span>&lt;span class="p">)[&lt;/span>&lt;span class="mi">0&lt;/span>&lt;span class="p">];&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="kr">const&lt;/span> &lt;span class="nx">val&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="nx">item&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">split&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s2">&amp;#34;=&amp;#34;&lt;/span>&lt;span class="p">)[&lt;/span>&lt;span class="mi">1&lt;/span>&lt;span class="p">];&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">res&lt;/span>&lt;span class="p">[&lt;/span>&lt;span class="nx">key&lt;/span>&lt;span class="p">]&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="nb">decodeURIComponent&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="nx">val&lt;/span>&lt;span class="p">);&lt;/span> &lt;span class="c1">// 解码
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">&lt;/span> &lt;span class="p">});&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">return&lt;/span> &lt;span class="nx">res&lt;/span>&lt;span class="p">;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">// 测试
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">&lt;/span>&lt;span class="kr">const&lt;/span> &lt;span class="nx">user&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="nx">getParams&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s2">&amp;#34;http://www.baidu.com?user=%E9%98%BF%E9%A3%9E&amp;amp;age=16&amp;#34;&lt;/span>&lt;span class="p">);&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="nx">console&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">log&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="nx">user&lt;/span>&lt;span class="p">);&lt;/span> &lt;span class="c1">// { user: &amp;#39;阿飞&amp;#39;, age: &amp;#39;16&amp;#39; }
&lt;/span>&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>
&lt;/div>
&lt;/div>
&lt;h2 id="发布订阅模式" >发布订阅模式
&lt;a hidden class="anchor" aria-hidden="true" href="#%e5%8f%91%e5%b8%83%e8%ae%a2%e9%98%85%e6%a8%a1%e5%bc%8f">#&lt;/a>
&lt;/h2>
&lt;div class="codeBlock">
&lt;details open>
&lt;summary>
&lt;div class="oper">&lt;div class="status">&lt;/div>&lt;/div>
&lt;div class="title">js&lt;/div>
&lt;div class="oper">&lt;button class="codeCopy">复制&lt;/button>&lt;/div>
&lt;/summary>
&lt;/details>
&lt;div class="codeBlockContent">
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt" id="hl-13-1">&lt;a class="lnlinks" href="#hl-13-1"> 1&lt;/a>
&lt;/span>&lt;span class="lnt" id="hl-13-2">&lt;a class="lnlinks" href="#hl-13-2"> 2&lt;/a>
&lt;/span>&lt;span class="lnt" id="hl-13-3">&lt;a class="lnlinks" href="#hl-13-3"> 3&lt;/a>
&lt;/span>&lt;span class="lnt" id="hl-13-4">&lt;a class="lnlinks" href="#hl-13-4"> 4&lt;/a>
&lt;/span>&lt;span class="lnt" id="hl-13-5">&lt;a class="lnlinks" href="#hl-13-5"> 5&lt;/a>
&lt;/span>&lt;span class="lnt" id="hl-13-6">&lt;a class="lnlinks" href="#hl-13-6"> 6&lt;/a>
&lt;/span>&lt;span class="lnt" id="hl-13-7">&lt;a class="lnlinks" href="#hl-13-7"> 7&lt;/a>
&lt;/span>&lt;span class="lnt" id="hl-13-8">&lt;a class="lnlinks" href="#hl-13-8"> 8&lt;/a>
&lt;/span>&lt;span class="lnt" id="hl-13-9">&lt;a class="lnlinks" href="#hl-13-9"> 9&lt;/a>
&lt;/span>&lt;span class="lnt" id="hl-13-10">&lt;a class="lnlinks" href="#hl-13-10">10&lt;/a>
&lt;/span>&lt;span class="lnt" id="hl-13-11">&lt;a class="lnlinks" href="#hl-13-11">11&lt;/a>
&lt;/span>&lt;span class="lnt" id="hl-13-12">&lt;a class="lnlinks" href="#hl-13-12">12&lt;/a>
&lt;/span>&lt;span class="lnt" id="hl-13-13">&lt;a class="lnlinks" href="#hl-13-13">13&lt;/a>
&lt;/span>&lt;span class="lnt" id="hl-13-14">&lt;a class="lnlinks" href="#hl-13-14">14&lt;/a>
&lt;/span>&lt;span class="lnt" id="hl-13-15">&lt;a class="lnlinks" href="#hl-13-15">15&lt;/a>
&lt;/span>&lt;span class="lnt" id="hl-13-16">&lt;a class="lnlinks" href="#hl-13-16">16&lt;/a>
&lt;/span>&lt;span class="lnt" id="hl-13-17">&lt;a class="lnlinks" href="#hl-13-17">17&lt;/a>
&lt;/span>&lt;span class="lnt" id="hl-13-18">&lt;a class="lnlinks" href="#hl-13-18">18&lt;/a>
&lt;/span>&lt;span class="lnt" id="hl-13-19">&lt;a class="lnlinks" href="#hl-13-19">19&lt;/a>
&lt;/span>&lt;span class="lnt" id="hl-13-20">&lt;a class="lnlinks" href="#hl-13-20">20&lt;/a>
&lt;/span>&lt;span class="lnt" id="hl-13-21">&lt;a class="lnlinks" href="#hl-13-21">21&lt;/a>
&lt;/span>&lt;span class="lnt" id="hl-13-22">&lt;a class="lnlinks" href="#hl-13-22">22&lt;/a>
&lt;/span>&lt;span class="lnt" id="hl-13-23">&lt;a class="lnlinks" href="#hl-13-23">23&lt;/a>
&lt;/span>&lt;span class="lnt" id="hl-13-24">&lt;a class="lnlinks" href="#hl-13-24">24&lt;/a>
&lt;/span>&lt;span class="lnt" id="hl-13-25">&lt;a class="lnlinks" href="#hl-13-25">25&lt;/a>
&lt;/span>&lt;span class="lnt" id="hl-13-26">&lt;a class="lnlinks" href="#hl-13-26">26&lt;/a>
&lt;/span>&lt;span class="lnt" id="hl-13-27">&lt;a class="lnlinks" href="#hl-13-27">27&lt;/a>
&lt;/span>&lt;span class="lnt" id="hl-13-28">&lt;a class="lnlinks" href="#hl-13-28">28&lt;/a>
&lt;/span>&lt;span class="lnt" id="hl-13-29">&lt;a class="lnlinks" href="#hl-13-29">29&lt;/a>
&lt;/span>&lt;span class="lnt" id="hl-13-30">&lt;a class="lnlinks" href="#hl-13-30">30&lt;/a>
&lt;/span>&lt;span class="lnt" id="hl-13-31">&lt;a class="lnlinks" href="#hl-13-31">31&lt;/a>
&lt;/span>&lt;span class="lnt" id="hl-13-32">&lt;a class="lnlinks" href="#hl-13-32">32&lt;/a>
&lt;/span>&lt;span class="lnt" id="hl-13-33">&lt;a class="lnlinks" href="#hl-13-33">33&lt;/a>
&lt;/span>&lt;span class="lnt" id="hl-13-34">&lt;a class="lnlinks" href="#hl-13-34">34&lt;/a>
&lt;/span>&lt;span class="lnt" id="hl-13-35">&lt;a class="lnlinks" href="#hl-13-35">35&lt;/a>
&lt;/span>&lt;span class="lnt" id="hl-13-36">&lt;a class="lnlinks" href="#hl-13-36">36&lt;/a>
&lt;/span>&lt;span class="lnt" id="hl-13-37">&lt;a class="lnlinks" href="#hl-13-37">37&lt;/a>
&lt;/span>&lt;span class="lnt" id="hl-13-38">&lt;a class="lnlinks" href="#hl-13-38">38&lt;/a>
&lt;/span>&lt;span class="lnt" id="hl-13-39">&lt;a class="lnlinks" href="#hl-13-39">39&lt;/a>
&lt;/span>&lt;span class="lnt" id="hl-13-40">&lt;a class="lnlinks" href="#hl-13-40">40&lt;/a>
&lt;/span>&lt;span class="lnt" id="hl-13-41">&lt;a class="lnlinks" href="#hl-13-41">41&lt;/a>
&lt;/span>&lt;span class="lnt" id="hl-13-42">&lt;a class="lnlinks" href="#hl-13-42">42&lt;/a>
&lt;/span>&lt;span class="lnt" id="hl-13-43">&lt;a class="lnlinks" href="#hl-13-43">43&lt;/a>
&lt;/span>&lt;span class="lnt" id="hl-13-44">&lt;a class="lnlinks" href="#hl-13-44">44&lt;/a>
&lt;/span>&lt;span class="lnt" id="hl-13-45">&lt;a class="lnlinks" href="#hl-13-45">45&lt;/a>
&lt;/span>&lt;span class="lnt" id="hl-13-46">&lt;a class="lnlinks" href="#hl-13-46">46&lt;/a>
&lt;/span>&lt;span class="lnt" id="hl-13-47">&lt;a class="lnlinks" href="#hl-13-47">47&lt;/a>
&lt;/span>&lt;span class="lnt" id="hl-13-48">&lt;a class="lnlinks" href="#hl-13-48">48&lt;/a>
&lt;/span>&lt;span class="lnt" id="hl-13-49">&lt;a class="lnlinks" href="#hl-13-49">49&lt;/a>
&lt;/span>&lt;span class="lnt" id="hl-13-50">&lt;a class="lnlinks" href="#hl-13-50">50&lt;/a>
&lt;/span>&lt;span class="lnt" id="hl-13-51">&lt;a class="lnlinks" href="#hl-13-51">51&lt;/a>
&lt;/span>&lt;span class="lnt" id="hl-13-52">&lt;a class="lnlinks" href="#hl-13-52">52&lt;/a>
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-js" data-lang="js">&lt;span class="line">&lt;span class="cl">&lt;span class="kr">class&lt;/span> &lt;span class="nx">EventEmitter&lt;/span> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">constructor&lt;/span>&lt;span class="p">()&lt;/span> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">this&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">cache&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="p">{};&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">on&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="nx">name&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="nx">fn&lt;/span>&lt;span class="p">)&lt;/span> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">if&lt;/span> &lt;span class="p">(&lt;/span>&lt;span class="k">this&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">cache&lt;/span>&lt;span class="p">[&lt;/span>&lt;span class="nx">name&lt;/span>&lt;span class="p">])&lt;/span> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">this&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">cache&lt;/span>&lt;span class="p">[&lt;/span>&lt;span class="nx">name&lt;/span>&lt;span class="p">].&lt;/span>&lt;span class="nx">push&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="nx">fn&lt;/span>&lt;span class="p">);&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">}&lt;/span> &lt;span class="k">else&lt;/span> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">this&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">cache&lt;/span>&lt;span class="p">[&lt;/span>&lt;span class="nx">name&lt;/span>&lt;span class="p">]&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="p">[&lt;/span>&lt;span class="nx">fn&lt;/span>&lt;span class="p">];&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">off&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="nx">name&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="nx">fn&lt;/span>&lt;span class="p">)&lt;/span> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="kr">const&lt;/span> &lt;span class="nx">tasks&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="k">this&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">cache&lt;/span>&lt;span class="p">[&lt;/span>&lt;span class="nx">name&lt;/span>&lt;span class="p">];&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">if&lt;/span> &lt;span class="p">(&lt;/span>&lt;span class="nx">tasks&lt;/span>&lt;span class="p">)&lt;/span> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="kr">const&lt;/span> &lt;span class="nx">index&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="nx">tasks&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">findIndex&lt;/span>&lt;span class="p">((&lt;/span>&lt;span class="nx">f&lt;/span>&lt;span class="p">)&lt;/span> &lt;span class="p">=&amp;gt;&lt;/span> &lt;span class="nx">f&lt;/span> &lt;span class="o">===&lt;/span> &lt;span class="nx">fn&lt;/span> &lt;span class="o">||&lt;/span> &lt;span class="nx">f&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">callback&lt;/span> &lt;span class="o">===&lt;/span> &lt;span class="nx">fn&lt;/span>&lt;span class="p">);&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">if&lt;/span> &lt;span class="p">(&lt;/span>&lt;span class="nx">index&lt;/span> &lt;span class="o">&amp;gt;=&lt;/span> &lt;span class="mi">0&lt;/span>&lt;span class="p">)&lt;/span> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">tasks&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">splice&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="nx">index&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="mi">1&lt;/span>&lt;span class="p">);&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">emit&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="nx">name&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="nx">once&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="kc">false&lt;/span>&lt;span class="p">)&lt;/span> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">if&lt;/span> &lt;span class="p">(&lt;/span>&lt;span class="k">this&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">cache&lt;/span>&lt;span class="p">[&lt;/span>&lt;span class="nx">name&lt;/span>&lt;span class="p">])&lt;/span> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="c1">// 创建副本，如果回调函数内继续注册相同事件，会造成死循环
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">&lt;/span> &lt;span class="kr">const&lt;/span> &lt;span class="nx">tasks&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="k">this&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">cache&lt;/span>&lt;span class="p">[&lt;/span>&lt;span class="nx">name&lt;/span>&lt;span class="p">].&lt;/span>&lt;span class="nx">slice&lt;/span>&lt;span class="p">();&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">for&lt;/span> &lt;span class="p">(&lt;/span>&lt;span class="kd">let&lt;/span> &lt;span class="nx">fn&lt;/span> &lt;span class="k">of&lt;/span> &lt;span class="nx">tasks&lt;/span>&lt;span class="p">)&lt;/span> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">fn&lt;/span>&lt;span class="p">();&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">if&lt;/span> &lt;span class="p">(&lt;/span>&lt;span class="nx">once&lt;/span>&lt;span class="p">)&lt;/span> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">delete&lt;/span> &lt;span class="k">this&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">cache&lt;/span>&lt;span class="p">[&lt;/span>&lt;span class="nx">name&lt;/span>&lt;span class="p">];&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">// 测试
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">&lt;/span>&lt;span class="kr">const&lt;/span> &lt;span class="nx">eventBus&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="k">new&lt;/span> &lt;span class="nx">EventEmitter&lt;/span>&lt;span class="p">();&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="kr">const&lt;/span> &lt;span class="nx">task1&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="p">()&lt;/span> &lt;span class="p">=&amp;gt;&lt;/span> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">console&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">log&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s2">&amp;#34;task1&amp;#34;&lt;/span>&lt;span class="p">);&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="p">};&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="kr">const&lt;/span> &lt;span class="nx">task2&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="p">()&lt;/span> &lt;span class="p">=&amp;gt;&lt;/span> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">console&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">log&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s2">&amp;#34;task2&amp;#34;&lt;/span>&lt;span class="p">);&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="p">};&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="nx">eventBus&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">on&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s2">&amp;#34;task&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="nx">task1&lt;/span>&lt;span class="p">);&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="nx">eventBus&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">on&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s2">&amp;#34;task&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="nx">task2&lt;/span>&lt;span class="p">);&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="nx">eventBus&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">off&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s2">&amp;#34;task&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="nx">task1&lt;/span>&lt;span class="p">);&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="nx">setTimeout&lt;/span>&lt;span class="p">(()&lt;/span> &lt;span class="p">=&amp;gt;&lt;/span> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">eventBus&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">emit&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s2">&amp;#34;task&amp;#34;&lt;/span>&lt;span class="p">);&lt;/span> &lt;span class="c1">// task2
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">&lt;/span>&lt;span class="p">},&lt;/span> &lt;span class="mi">1000&lt;/span>&lt;span class="p">);&lt;/span>&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>
&lt;/div>
&lt;/div></description></item><item><title>常用js</title><link>https://linlccc.com/posts/commonlyusedjs/</link><pubDate>Sun, 16 Jun 2024 23:33:27 +0800</pubDate><author>[Linlccc]</author><guid>https://linlccc.com/posts/commonlyusedjs/</guid><description>&lt;h2 id="防抖" >防抖
&lt;a hidden class="anchor" aria-hidden="true" href="#%e9%98%b2%e6%8a%96">#&lt;/a>
&lt;/h2>
&lt;div class="codeBlock">
&lt;details open>
&lt;summary>
&lt;div class="oper">&lt;div class="status">&lt;/div>&lt;/div>
&lt;div class="title">js&lt;/div>
&lt;div class="oper">&lt;button class="codeCopy">复制&lt;/button>&lt;/div>
&lt;/summary>
&lt;/details>
&lt;div class="codeBlockContent">
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt" id="hl-0-1">&lt;a class="lnlinks" href="#hl-0-1"> 1&lt;/a>
&lt;/span>&lt;span class="lnt" id="hl-0-2">&lt;a class="lnlinks" href="#hl-0-2"> 2&lt;/a>
&lt;/span>&lt;span class="lnt" id="hl-0-3">&lt;a class="lnlinks" href="#hl-0-3"> 3&lt;/a>
&lt;/span>&lt;span class="lnt" id="hl-0-4">&lt;a class="lnlinks" href="#hl-0-4"> 4&lt;/a>
&lt;/span>&lt;span class="lnt" id="hl-0-5">&lt;a class="lnlinks" href="#hl-0-5"> 5&lt;/a>
&lt;/span>&lt;span class="lnt" id="hl-0-6">&lt;a class="lnlinks" href="#hl-0-6"> 6&lt;/a>
&lt;/span>&lt;span class="lnt" id="hl-0-7">&lt;a class="lnlinks" href="#hl-0-7"> 7&lt;/a>
&lt;/span>&lt;span class="lnt" id="hl-0-8">&lt;a class="lnlinks" href="#hl-0-8"> 8&lt;/a>
&lt;/span>&lt;span class="lnt" id="hl-0-9">&lt;a class="lnlinks" href="#hl-0-9"> 9&lt;/a>
&lt;/span>&lt;span class="lnt" id="hl-0-10">&lt;a class="lnlinks" href="#hl-0-10">10&lt;/a>
&lt;/span>&lt;span class="lnt" id="hl-0-11">&lt;a class="lnlinks" href="#hl-0-11">11&lt;/a>
&lt;/span>&lt;span class="lnt" id="hl-0-12">&lt;a class="lnlinks" href="#hl-0-12">12&lt;/a>
&lt;/span>&lt;span class="lnt" id="hl-0-13">&lt;a class="lnlinks" href="#hl-0-13">13&lt;/a>
&lt;/span>&lt;span class="lnt" id="hl-0-14">&lt;a class="lnlinks" href="#hl-0-14">14&lt;/a>
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-js" data-lang="js">&lt;span class="line">&lt;span class="cl">&lt;span class="kd">function&lt;/span> &lt;span class="nx">debounce&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="nx">fn&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="nx">delay&lt;/span>&lt;span class="p">)&lt;/span> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="kd">let&lt;/span> &lt;span class="nx">timer&lt;/span>&lt;span class="p">;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">return&lt;/span> &lt;span class="kd">function&lt;/span> &lt;span class="p">(...&lt;/span>&lt;span class="nx">args&lt;/span>&lt;span class="p">)&lt;/span> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">timer&lt;/span> &lt;span class="o">&amp;amp;&amp;amp;&lt;/span> &lt;span class="nx">clearTimeout&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="nx">timer&lt;/span>&lt;span class="p">);&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">timer&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="nx">setTimeout&lt;/span>&lt;span class="p">(()&lt;/span> &lt;span class="p">=&amp;gt;&lt;/span> &lt;span class="nx">fn&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">apply&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="k">this&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="nx">args&lt;/span>&lt;span class="p">),&lt;/span> &lt;span class="nx">delay&lt;/span>&lt;span class="p">);&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">};&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">// 测试
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">&lt;/span>&lt;span class="kd">function&lt;/span> &lt;span class="nx">task&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="nx">arg&lt;/span>&lt;span class="p">)&lt;/span> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">console&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">log&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s2">&amp;#34;run task&amp;#34;&lt;/span> &lt;span class="o">+&lt;/span> &lt;span class="nx">arg&lt;/span>&lt;span class="p">);&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="kr">const&lt;/span> &lt;span class="nx">debounceTask&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="nx">debounce&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="nx">task&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="mi">1000&lt;/span>&lt;span class="p">);&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="nb">window&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">addEventListener&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s2">&amp;#34;scroll&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="p">()&lt;/span> &lt;span class="p">=&amp;gt;&lt;/span> &lt;span class="nx">debounceTask&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="mi">11&lt;/span>&lt;span class="p">));&lt;/span>&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>
&lt;/div>
&lt;/div>
&lt;h2 id="节流" >节流
&lt;a hidden class="anchor" aria-hidden="true" href="#%e8%8a%82%e6%b5%81">#&lt;/a>
&lt;/h2>
&lt;div class="codeBlock">
&lt;details open>
&lt;summary>
&lt;div class="oper">&lt;div class="status">&lt;/div>&lt;/div>
&lt;div class="title">js&lt;/div>
&lt;div class="oper">&lt;button class="codeCopy">复制&lt;/button>&lt;/div>
&lt;/summary>
&lt;/details>
&lt;div class="codeBlockContent">
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt" id="hl-1-1">&lt;a class="lnlinks" href="#hl-1-1"> 1&lt;/a>
&lt;/span>&lt;span class="lnt" id="hl-1-2">&lt;a class="lnlinks" href="#hl-1-2"> 2&lt;/a>
&lt;/span>&lt;span class="lnt" id="hl-1-3">&lt;a class="lnlinks" href="#hl-1-3"> 3&lt;/a>
&lt;/span>&lt;span class="lnt" id="hl-1-4">&lt;a class="lnlinks" href="#hl-1-4"> 4&lt;/a>
&lt;/span>&lt;span class="lnt" id="hl-1-5">&lt;a class="lnlinks" href="#hl-1-5"> 5&lt;/a>
&lt;/span>&lt;span class="lnt" id="hl-1-6">&lt;a class="lnlinks" href="#hl-1-6"> 6&lt;/a>
&lt;/span>&lt;span class="lnt" id="hl-1-7">&lt;a class="lnlinks" href="#hl-1-7"> 7&lt;/a>
&lt;/span>&lt;span class="lnt" id="hl-1-8">&lt;a class="lnlinks" href="#hl-1-8"> 8&lt;/a>
&lt;/span>&lt;span class="lnt" id="hl-1-9">&lt;a class="lnlinks" href="#hl-1-9"> 9&lt;/a>
&lt;/span>&lt;span class="lnt" id="hl-1-10">&lt;a class="lnlinks" href="#hl-1-10">10&lt;/a>
&lt;/span>&lt;span class="lnt" id="hl-1-11">&lt;a class="lnlinks" href="#hl-1-11">11&lt;/a>
&lt;/span>&lt;span class="lnt" id="hl-1-12">&lt;a class="lnlinks" href="#hl-1-12">12&lt;/a>
&lt;/span>&lt;span class="lnt" id="hl-1-13">&lt;a class="lnlinks" href="#hl-1-13">13&lt;/a>
&lt;/span>&lt;span class="lnt" id="hl-1-14">&lt;a class="lnlinks" href="#hl-1-14">14&lt;/a>
&lt;/span>&lt;span class="lnt" id="hl-1-15">&lt;a class="lnlinks" href="#hl-1-15">15&lt;/a>
&lt;/span>&lt;span class="lnt" id="hl-1-16">&lt;a class="lnlinks" href="#hl-1-16">16&lt;/a>
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-js" data-lang="js">&lt;span class="line">&lt;span class="cl">&lt;span class="kd">function&lt;/span> &lt;span class="nx">throttle&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="nx">fn&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="nx">delay&lt;/span>&lt;span class="p">)&lt;/span> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="kd">let&lt;/span> &lt;span class="nx">last&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="mi">0&lt;/span>&lt;span class="p">;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">return&lt;/span> &lt;span class="kd">function&lt;/span> &lt;span class="p">(...&lt;/span>&lt;span class="nx">args&lt;/span>&lt;span class="p">)&lt;/span> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="kr">const&lt;/span> &lt;span class="nx">now&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="nb">Date&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">now&lt;/span>&lt;span class="p">();&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">if&lt;/span> &lt;span class="p">(&lt;/span>&lt;span class="nx">now&lt;/span> &lt;span class="o">-&lt;/span> &lt;span class="nx">last&lt;/span> &lt;span class="o">&amp;lt;&lt;/span> &lt;span class="nx">delay&lt;/span>&lt;span class="p">)&lt;/span> &lt;span class="k">return&lt;/span>&lt;span class="p">;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">last&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="nx">now&lt;/span>&lt;span class="p">;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">fn&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">apply&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="k">this&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="nx">args&lt;/span>&lt;span class="p">);&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">};&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">// 测试
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">&lt;/span>&lt;span class="kd">function&lt;/span> &lt;span class="nx">task&lt;/span>&lt;span class="p">()&lt;/span> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">console&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">log&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s2">&amp;#34;run task&amp;#34;&lt;/span>&lt;span class="p">);&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="kr">const&lt;/span> &lt;span class="nx">throttleTask&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="nx">throttle&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="nx">task&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="mi">1000&lt;/span>&lt;span class="p">);&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="nb">window&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">addEventListener&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s2">&amp;#34;scroll&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="nx">throttleTask&lt;/span>&lt;span class="p">);&lt;/span>&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>
&lt;/div>
&lt;/div></description></item><item><title>ES6 常用代码块</title><link>https://linlccc.com/pending/commonlyusedes6/</link><pubDate>Tue, 07 May 2024 16:28:47 +0800</pubDate><author>[Linlccc]</author><guid>https://linlccc.com/pending/commonlyusedes6/</guid><description>&lt;h2 id="es6-20-个经常使用的技巧" >ES6 20 个经常使用的技巧
&lt;a hidden class="anchor" aria-hidden="true" href="#es6-20-%e4%b8%aa%e7%bb%8f%e5%b8%b8%e4%bd%bf%e7%94%a8%e7%9a%84%e6%8a%80%e5%b7%a7">#&lt;/a>
&lt;/h2>
&lt;h3 id="打乱数组顺序" >打乱数组顺序
&lt;a hidden class="anchor" aria-hidden="true" href="#%e6%89%93%e4%b9%b1%e6%95%b0%e7%bb%84%e9%a1%ba%e5%ba%8f">#&lt;/a>
&lt;/h3>
&lt;div class="codeBlock">
&lt;details open>
&lt;summary>
&lt;div class="oper">&lt;div class="status">&lt;/div>&lt;/div>
&lt;div class="title">js&lt;/div>
&lt;div class="oper">&lt;button class="codeCopy">复制&lt;/button>&lt;/div>
&lt;/summary>
&lt;/details>
&lt;div class="codeBlockContent">
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt" id="hl-0-1">&lt;a class="lnlinks" href="#hl-0-1">1&lt;/a>
&lt;/span>&lt;span class="lnt" id="hl-0-2">&lt;a class="lnlinks" href="#hl-0-2">2&lt;/a>
&lt;/span>&lt;span class="lnt" id="hl-0-3">&lt;a class="lnlinks" href="#hl-0-3">3&lt;/a>
&lt;/span>&lt;span class="lnt" id="hl-0-4">&lt;a class="lnlinks" href="#hl-0-4">4&lt;/a>
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-js" data-lang="js">&lt;span class="line">&lt;span class="cl">&lt;span class="kd">let&lt;/span> &lt;span class="nx">arr&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="p">[&lt;/span>&lt;span class="s2">&amp;#34;😄&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="mi">67&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="kc">true&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="kc">false&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="s2">&amp;#34;55&amp;#34;&lt;/span>&lt;span class="p">];&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="nx">arr&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="nx">arr&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">sort&lt;/span>&lt;span class="p">(()&lt;/span> &lt;span class="p">=&amp;gt;&lt;/span> &lt;span class="mf">0.5&lt;/span> &lt;span class="o">-&lt;/span> &lt;span class="nb">Math&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">random&lt;/span>&lt;span class="p">());&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="nx">console&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">log&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="nx">arr&lt;/span>&lt;span class="p">);&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">// [ &amp;#39;😄&amp;#39;, &amp;#39;55&amp;#39;, 67, false, true ]
&lt;/span>&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>
&lt;/div>
&lt;/div>
&lt;h3 id="删除数字之外的所有字符" >删除数字之外的所有字符
&lt;a hidden class="anchor" aria-hidden="true" href="#%e5%88%a0%e9%99%a4%e6%95%b0%e5%ad%97%e4%b9%8b%e5%a4%96%e7%9a%84%e6%89%80%e6%9c%89%e5%ad%97%e7%ac%a6">#&lt;/a>
&lt;/h3>
&lt;div class="codeBlock">
&lt;details open>
&lt;summary>
&lt;div class="oper">&lt;div class="status">&lt;/div>&lt;/div>
&lt;div class="title">js&lt;/div>
&lt;div class="oper">&lt;button class="codeCopy">复制&lt;/button>&lt;/div>
&lt;/summary>
&lt;/details>
&lt;div class="codeBlockContent">
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt" id="hl-1-1">&lt;a class="lnlinks" href="#hl-1-1">1&lt;/a>
&lt;/span>&lt;span class="lnt" id="hl-1-2">&lt;a class="lnlinks" href="#hl-1-2">2&lt;/a>
&lt;/span>&lt;span class="lnt" id="hl-1-3">&lt;a class="lnlinks" href="#hl-1-3">3&lt;/a>
&lt;/span>&lt;span class="lnt" id="hl-1-4">&lt;a class="lnlinks" href="#hl-1-4">4&lt;/a>
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-js" data-lang="js">&lt;span class="line">&lt;span class="cl">&lt;span class="kr">const&lt;/span> &lt;span class="nx">str&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="s2">&amp;#34;xieyezi 23213 is 95994 so hansome 223333&amp;#34;&lt;/span>&lt;span class="p">;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="kr">const&lt;/span> &lt;span class="nx">numbers&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="nx">str&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">replace&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="sr">/\D/g&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="s2">&amp;#34;&amp;#34;&lt;/span>&lt;span class="p">);&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="nx">console&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">log&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="nx">numbers&lt;/span>&lt;span class="p">);&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">// 2321395994223333
&lt;/span>&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>
&lt;/div>
&lt;/div>
&lt;h3 id="反转字符串或者单词" >反转字符串或者单词
&lt;a hidden class="anchor" aria-hidden="true" href="#%e5%8f%8d%e8%bd%ac%e5%ad%97%e7%ac%a6%e4%b8%b2%e6%88%96%e8%80%85%e5%8d%95%e8%af%8d">#&lt;/a>
&lt;/h3>
&lt;div class="codeBlock">
&lt;details open>
&lt;summary>
&lt;div class="oper">&lt;div class="status">&lt;/div>&lt;/div>
&lt;div class="title">js&lt;/div>
&lt;div class="oper">&lt;button class="codeCopy">复制&lt;/button>&lt;/div>
&lt;/summary>
&lt;/details>
&lt;div class="codeBlockContent">
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt" id="hl-2-1">&lt;a class="lnlinks" href="#hl-2-1"> 1&lt;/a>
&lt;/span>&lt;span class="lnt" id="hl-2-2">&lt;a class="lnlinks" href="#hl-2-2"> 2&lt;/a>
&lt;/span>&lt;span class="lnt" id="hl-2-3">&lt;a class="lnlinks" href="#hl-2-3"> 3&lt;/a>
&lt;/span>&lt;span class="lnt" id="hl-2-4">&lt;a class="lnlinks" href="#hl-2-4"> 4&lt;/a>
&lt;/span>&lt;span class="lnt" id="hl-2-5">&lt;a class="lnlinks" href="#hl-2-5"> 5&lt;/a>
&lt;/span>&lt;span class="lnt" id="hl-2-6">&lt;a class="lnlinks" href="#hl-2-6"> 6&lt;/a>
&lt;/span>&lt;span class="lnt" id="hl-2-7">&lt;a class="lnlinks" href="#hl-2-7"> 7&lt;/a>
&lt;/span>&lt;span class="lnt" id="hl-2-8">&lt;a class="lnlinks" href="#hl-2-8"> 8&lt;/a>
&lt;/span>&lt;span class="lnt" id="hl-2-9">&lt;a class="lnlinks" href="#hl-2-9"> 9&lt;/a>
&lt;/span>&lt;span class="lnt" id="hl-2-10">&lt;a class="lnlinks" href="#hl-2-10">10&lt;/a>
&lt;/span>&lt;span class="lnt" id="hl-2-11">&lt;a class="lnlinks" href="#hl-2-11">11&lt;/a>
&lt;/span>&lt;span class="lnt" id="hl-2-12">&lt;a class="lnlinks" href="#hl-2-12">12&lt;/a>
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-js" data-lang="js">&lt;span class="line">&lt;span class="cl">&lt;span class="kr">const&lt;/span> &lt;span class="nx">sentence&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="s2">&amp;#34;xieyezi js so handsome, lol.&amp;#34;&lt;/span>&lt;span class="p">;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="kr">const&lt;/span> &lt;span class="nx">reverseSentence&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="nx">reverseBySeparator&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="nx">sentence&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="s2">&amp;#34;&amp;#34;&lt;/span>&lt;span class="p">);&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="nx">console&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">log&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="nx">reverseSentence&lt;/span>&lt;span class="p">);&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">// .lol ,emosdnah os sj izeyeix
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="kr">const&lt;/span> &lt;span class="nx">reverseEachWord&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="nx">reverseBySeparator&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="nx">reverseSentence&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="s2">&amp;#34; &amp;#34;&lt;/span>&lt;span class="p">);&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="nx">console&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">log&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="nx">reverseEachWord&lt;/span>&lt;span class="p">);&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">// izeyeix sj os ,emosdnah .lol
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="kd">function&lt;/span> &lt;span class="nx">reverseBySeparator&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="nx">string&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="nx">separator&lt;/span>&lt;span class="p">)&lt;/span> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">return&lt;/span> &lt;span class="nx">string&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">split&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="nx">separator&lt;/span>&lt;span class="p">).&lt;/span>&lt;span class="nx">reverse&lt;/span>&lt;span class="p">().&lt;/span>&lt;span class="nx">join&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="nx">separator&lt;/span>&lt;span class="p">);&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="p">}&lt;/span>&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>
&lt;/div>
&lt;/div>
&lt;h3 id="将十进制转换为二进制文件或十六进制数" >将十进制转换为二进制文件或十六进制数
&lt;a hidden class="anchor" aria-hidden="true" href="#%e5%b0%86%e5%8d%81%e8%bf%9b%e5%88%b6%e8%bd%ac%e6%8d%a2%e4%b8%ba%e4%ba%8c%e8%bf%9b%e5%88%b6%e6%96%87%e4%bb%b6%e6%88%96%e5%8d%81%e5%85%ad%e8%bf%9b%e5%88%b6%e6%95%b0">#&lt;/a>
&lt;/h3>
&lt;div class="codeBlock">
&lt;details open>
&lt;summary>
&lt;div class="oper">&lt;div class="status">&lt;/div>&lt;/div>
&lt;div class="title">js&lt;/div>
&lt;div class="oper">&lt;button class="codeCopy">复制&lt;/button>&lt;/div>
&lt;/summary>
&lt;/details>
&lt;div class="codeBlockContent">
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt" id="hl-3-1">&lt;a class="lnlinks" href="#hl-3-1">1&lt;/a>
&lt;/span>&lt;span class="lnt" id="hl-3-2">&lt;a class="lnlinks" href="#hl-3-2">2&lt;/a>
&lt;/span>&lt;span class="lnt" id="hl-3-3">&lt;a class="lnlinks" href="#hl-3-3">3&lt;/a>
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-js" data-lang="js">&lt;span class="line">&lt;span class="cl">&lt;span class="kr">const&lt;/span> &lt;span class="nx">num&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="mi">45&lt;/span>&lt;span class="p">;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="nx">num&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">toString&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="mi">2&lt;/span>&lt;span class="p">);&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="nx">num&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">tostring&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="mi">16&lt;/span>&lt;span class="p">);&lt;/span>&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>
&lt;/div>
&lt;/div>
&lt;h3 id="合并多个对象" >合并多个对象
&lt;a hidden class="anchor" aria-hidden="true" href="#%e5%90%88%e5%b9%b6%e5%a4%9a%e4%b8%aa%e5%af%b9%e8%b1%a1">#&lt;/a>
&lt;/h3>
&lt;div class="codeBlock">
&lt;details open>
&lt;summary>
&lt;div class="oper">&lt;div class="status">&lt;/div>&lt;/div>
&lt;div class="title">js&lt;/div>
&lt;div class="oper">&lt;button class="codeCopy">复制&lt;/button>&lt;/div>
&lt;/summary>
&lt;/details>
&lt;div class="codeBlockContent">
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt" id="hl-4-1">&lt;a class="lnlinks" href="#hl-4-1"> 1&lt;/a>
&lt;/span>&lt;span class="lnt" id="hl-4-2">&lt;a class="lnlinks" href="#hl-4-2"> 2&lt;/a>
&lt;/span>&lt;span class="lnt" id="hl-4-3">&lt;a class="lnlinks" href="#hl-4-3"> 3&lt;/a>
&lt;/span>&lt;span class="lnt" id="hl-4-4">&lt;a class="lnlinks" href="#hl-4-4"> 4&lt;/a>
&lt;/span>&lt;span class="lnt" id="hl-4-5">&lt;a class="lnlinks" href="#hl-4-5"> 5&lt;/a>
&lt;/span>&lt;span class="lnt" id="hl-4-6">&lt;a class="lnlinks" href="#hl-4-6"> 6&lt;/a>
&lt;/span>&lt;span class="lnt" id="hl-4-7">&lt;a class="lnlinks" href="#hl-4-7"> 7&lt;/a>
&lt;/span>&lt;span class="lnt" id="hl-4-8">&lt;a class="lnlinks" href="#hl-4-8"> 8&lt;/a>
&lt;/span>&lt;span class="lnt" id="hl-4-9">&lt;a class="lnlinks" href="#hl-4-9"> 9&lt;/a>
&lt;/span>&lt;span class="lnt" id="hl-4-10">&lt;a class="lnlinks" href="#hl-4-10">10&lt;/a>
&lt;/span>&lt;span class="lnt" id="hl-4-11">&lt;a class="lnlinks" href="#hl-4-11">11&lt;/a>
&lt;/span>&lt;span class="lnt" id="hl-4-12">&lt;a class="lnlinks" href="#hl-4-12">12&lt;/a>
&lt;/span>&lt;span class="lnt" id="hl-4-13">&lt;a class="lnlinks" href="#hl-4-13">13&lt;/a>
&lt;/span>&lt;span class="lnt" id="hl-4-14">&lt;a class="lnlinks" href="#hl-4-14">14&lt;/a>
&lt;/span>&lt;span class="lnt" id="hl-4-15">&lt;a class="lnlinks" href="#hl-4-15">15&lt;/a>
&lt;/span>&lt;span class="lnt" id="hl-4-16">&lt;a class="lnlinks" href="#hl-4-16">16&lt;/a>
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-js" data-lang="js">&lt;span class="line">&lt;span class="cl">&lt;span class="kr">const&lt;/span> &lt;span class="nx">city&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">name&lt;/span>&lt;span class="o">:&lt;/span> &lt;span class="s2">&amp;#34;Chongqing&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">population&lt;/span>&lt;span class="o">:&lt;/span> &lt;span class="s2">&amp;#34;1,234,567,890&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="p">};&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="kr">const&lt;/span> &lt;span class="nx">location&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">longitude&lt;/span>&lt;span class="o">:&lt;/span> &lt;span class="s2">&amp;#34;116.4&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">latitude&lt;/span>&lt;span class="o">:&lt;/span> &lt;span class="s2">&amp;#34;39.9&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="p">};&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="kr">const&lt;/span> &lt;span class="nx">fullCity&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="p">{&lt;/span> &lt;span class="p">...&lt;/span>&lt;span class="nx">city&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="p">...&lt;/span>&lt;span class="nx">location&lt;/span> &lt;span class="p">};&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="nx">console&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">log&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="nx">fullCity&lt;/span>&lt;span class="p">);&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">// {
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">// name: &amp;#39;Chongqing&amp;#39;,
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">// population: &amp;#39;1,234,567,890&amp;#39;,
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">// longitude: &amp;#39;116.4&amp;#39;,
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">// latitude: &amp;#39;39.9&amp;#39;
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">// }
&lt;/span>&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>
&lt;/div>
&lt;/div>
&lt;h3 id="-和--的区别" >&lt;code>===&lt;/code> 和 &lt;code>==&lt;/code> 的区别
&lt;a hidden class="anchor" aria-hidden="true" href="#-%e5%92%8c--%e7%9a%84%e5%8c%ba%e5%88%ab">#&lt;/a>
&lt;/h3>
&lt;div class="codeBlock">
&lt;details open>
&lt;summary>
&lt;div class="oper">&lt;div class="status">&lt;/div>&lt;/div>
&lt;div class="title">js&lt;/div>
&lt;div class="oper">&lt;button class="codeCopy">复制&lt;/button>&lt;/div>
&lt;/summary>
&lt;/details>
&lt;div class="codeBlockContent">
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt" id="hl-5-1">&lt;a class="lnlinks" href="#hl-5-1">1&lt;/a>
&lt;/span>&lt;span class="lnt" id="hl-5-2">&lt;a class="lnlinks" href="#hl-5-2">2&lt;/a>
&lt;/span>&lt;span class="lnt" id="hl-5-3">&lt;a class="lnlinks" href="#hl-5-3">3&lt;/a>
&lt;/span>&lt;span class="lnt" id="hl-5-4">&lt;a class="lnlinks" href="#hl-5-4">4&lt;/a>
&lt;/span>&lt;span class="lnt" id="hl-5-5">&lt;a class="lnlinks" href="#hl-5-5">5&lt;/a>
&lt;/span>&lt;span class="lnt" id="hl-5-6">&lt;a class="lnlinks" href="#hl-5-6">6&lt;/a>
&lt;/span>&lt;span class="lnt" id="hl-5-7">&lt;a class="lnlinks" href="#hl-5-7">7&lt;/a>
&lt;/span>&lt;span class="lnt" id="hl-5-8">&lt;a class="lnlinks" href="#hl-5-8">8&lt;/a>
&lt;/span>&lt;span class="lnt" id="hl-5-9">&lt;a class="lnlinks" href="#hl-5-9">9&lt;/a>
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-js" data-lang="js">&lt;span class="line">&lt;span class="cl">&lt;span class="c1">// == -&amp;gt; 类型转换 (浅比较)
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">// === -&amp;gt; 无类型转换 (严格比较)
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="mi">0&lt;/span> &lt;span class="o">==&lt;/span> &lt;span class="kc">false&lt;/span>&lt;span class="p">;&lt;/span> &lt;span class="c1">// true
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">&lt;/span>&lt;span class="mi">0&lt;/span> &lt;span class="o">===&lt;/span> &lt;span class="kc">false&lt;/span>&lt;span class="p">;&lt;/span> &lt;span class="c1">// false
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">&lt;/span>&lt;span class="mi">1&lt;/span> &lt;span class="o">==&lt;/span> &lt;span class="s2">&amp;#34;1&amp;#34;&lt;/span>&lt;span class="p">;&lt;/span> &lt;span class="c1">// true
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">&lt;/span>&lt;span class="mi">1&lt;/span> &lt;span class="o">===&lt;/span> &lt;span class="s2">&amp;#34;1&amp;#34;&lt;/span>&lt;span class="p">;&lt;/span> &lt;span class="c1">// false
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">&lt;/span>&lt;span class="kc">null&lt;/span> &lt;span class="o">==&lt;/span> &lt;span class="kc">undefined&lt;/span>&lt;span class="p">;&lt;/span> &lt;span class="c1">// true
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">&lt;/span>&lt;span class="kc">null&lt;/span> &lt;span class="o">===&lt;/span> &lt;span class="kc">undefined&lt;/span>&lt;span class="p">;&lt;/span> &lt;span class="c1">// false
&lt;/span>&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>
&lt;/div>
&lt;/div>
&lt;h3 id="解构赋值" >解构赋值
&lt;a hidden class="anchor" aria-hidden="true" href="#%e8%a7%a3%e6%9e%84%e8%b5%8b%e5%80%bc">#&lt;/a>
&lt;/h3>
&lt;div class="codeBlock">
&lt;details open>
&lt;summary>
&lt;div class="oper">&lt;div class="status">&lt;/div>&lt;/div>
&lt;div class="title">js&lt;/div>
&lt;div class="oper">&lt;button class="codeCopy">复制&lt;/button>&lt;/div>
&lt;/summary>
&lt;/details>
&lt;div class="codeBlockContent">
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt" id="hl-6-1">&lt;a class="lnlinks" href="#hl-6-1"> 1&lt;/a>
&lt;/span>&lt;span class="lnt" id="hl-6-2">&lt;a class="lnlinks" href="#hl-6-2"> 2&lt;/a>
&lt;/span>&lt;span class="lnt" id="hl-6-3">&lt;a class="lnlinks" href="#hl-6-3"> 3&lt;/a>
&lt;/span>&lt;span class="lnt" id="hl-6-4">&lt;a class="lnlinks" href="#hl-6-4"> 4&lt;/a>
&lt;/span>&lt;span class="lnt" id="hl-6-5">&lt;a class="lnlinks" href="#hl-6-5"> 5&lt;/a>
&lt;/span>&lt;span class="lnt" id="hl-6-6">&lt;a class="lnlinks" href="#hl-6-6"> 6&lt;/a>
&lt;/span>&lt;span class="lnt" id="hl-6-7">&lt;a class="lnlinks" href="#hl-6-7"> 7&lt;/a>
&lt;/span>&lt;span class="lnt" id="hl-6-8">&lt;a class="lnlinks" href="#hl-6-8"> 8&lt;/a>
&lt;/span>&lt;span class="lnt" id="hl-6-9">&lt;a class="lnlinks" href="#hl-6-9"> 9&lt;/a>
&lt;/span>&lt;span class="lnt" id="hl-6-10">&lt;a class="lnlinks" href="#hl-6-10">10&lt;/a>
&lt;/span>&lt;span class="lnt" id="hl-6-11">&lt;a class="lnlinks" href="#hl-6-11">11&lt;/a>
&lt;/span>&lt;span class="lnt" id="hl-6-12">&lt;a class="lnlinks" href="#hl-6-12">12&lt;/a>
&lt;/span>&lt;span class="lnt" id="hl-6-13">&lt;a class="lnlinks" href="#hl-6-13">13&lt;/a>
&lt;/span>&lt;span class="lnt" id="hl-6-14">&lt;a class="lnlinks" href="#hl-6-14">14&lt;/a>
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-js" data-lang="js">&lt;span class="line">&lt;span class="cl">&lt;span class="kr">const&lt;/span> &lt;span class="nx">forest&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">location&lt;/span>&lt;span class="o">:&lt;/span> &lt;span class="s2">&amp;#34;Sweden&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">animals&lt;/span>&lt;span class="o">:&lt;/span> &lt;span class="mi">3&lt;/span>&lt;span class="p">,&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">animalsTypes&lt;/span>&lt;span class="o">:&lt;/span> &lt;span class="p">[&lt;/span>&lt;span class="s2">&amp;#34;Lions&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="s2">&amp;#34;Tigers&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="s2">&amp;#34;Bears&amp;#34;&lt;/span>&lt;span class="p">],&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="p">};&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="kr">const&lt;/span> &lt;span class="p">{&lt;/span> &lt;span class="nx">location&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="nx">animals&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="nx">animalsTypes&lt;/span> &lt;span class="p">}&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="nx">forest&lt;/span>&lt;span class="p">;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="kr">const&lt;/span> &lt;span class="p">[&lt;/span>&lt;span class="nx">lions&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="nx">tigers&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="nx">bears&lt;/span>&lt;span class="p">]&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="nx">animalsTypes&lt;/span>&lt;span class="p">;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="nx">console&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">log&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="nx">location&lt;/span>&lt;span class="p">);&lt;/span> &lt;span class="c1">// Sweden
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">&lt;/span>&lt;span class="nx">console&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">log&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="nx">animals&lt;/span>&lt;span class="p">);&lt;/span> &lt;span class="c1">// 3
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">&lt;/span>&lt;span class="nx">console&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">log&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="nx">lions&lt;/span>&lt;span class="p">);&lt;/span> &lt;span class="c1">// Lions
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">&lt;/span>&lt;span class="nx">console&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">log&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="nx">tigers&lt;/span>&lt;span class="p">);&lt;/span> &lt;span class="c1">// Tigers
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">&lt;/span>&lt;span class="nx">console&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">log&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="nx">bears&lt;/span>&lt;span class="p">);&lt;/span> &lt;span class="c1">// Bears
&lt;/span>&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>
&lt;/div>
&lt;/div>
&lt;h3 id="交换变量的值" >交换变量的值
&lt;a hidden class="anchor" aria-hidden="true" href="#%e4%ba%a4%e6%8d%a2%e5%8f%98%e9%87%8f%e7%9a%84%e5%80%bc">#&lt;/a>
&lt;/h3>
&lt;div class="codeBlock">
&lt;details open>
&lt;summary>
&lt;div class="oper">&lt;div class="status">&lt;/div>&lt;/div>
&lt;div class="title">js&lt;/div>
&lt;div class="oper">&lt;button class="codeCopy">复制&lt;/button>&lt;/div>
&lt;/summary>
&lt;/details>
&lt;div class="codeBlockContent">
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt" id="hl-7-1">&lt;a class="lnlinks" href="#hl-7-1">1&lt;/a>
&lt;/span>&lt;span class="lnt" id="hl-7-2">&lt;a class="lnlinks" href="#hl-7-2">2&lt;/a>
&lt;/span>&lt;span class="lnt" id="hl-7-3">&lt;a class="lnlinks" href="#hl-7-3">3&lt;/a>
&lt;/span>&lt;span class="lnt" id="hl-7-4">&lt;a class="lnlinks" href="#hl-7-4">4&lt;/a>
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-js" data-lang="js">&lt;span class="line">&lt;span class="cl">&lt;span class="kd">let&lt;/span> &lt;span class="nx">bears&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="s2">&amp;#34;bears&amp;#34;&lt;/span>&lt;span class="p">;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="kd">let&lt;/span> &lt;span class="nx">tigers&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="p">(&lt;/span>&lt;span class="s2">&amp;#34;tigers&amp;#34;&lt;/span>&lt;span class="p">[(&lt;/span>&lt;span class="nx">bears&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="nx">tigers&lt;/span>&lt;span class="p">)]&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="p">[&lt;/span>&lt;span class="nx">tigers&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="nx">bears&lt;/span>&lt;span class="p">]);&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="nx">console&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">log&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="nx">bears&lt;/span>&lt;span class="p">);&lt;/span> &lt;span class="c1">// tigers
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">&lt;/span>&lt;span class="nx">console&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">log&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="nx">tribes&lt;/span>&lt;span class="p">);&lt;/span> &lt;span class="c1">// bears
&lt;/span>&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>
&lt;/div>
&lt;/div>
&lt;h3 id="判断回文字符串" >判断回文字符串
&lt;a hidden class="anchor" aria-hidden="true" href="#%e5%88%a4%e6%96%ad%e5%9b%9e%e6%96%87%e5%ad%97%e7%ac%a6%e4%b8%b2">#&lt;/a>
&lt;/h3>
&lt;div class="codeBlock">
&lt;details open>
&lt;summary>
&lt;div class="oper">&lt;div class="status">&lt;/div>&lt;/div>
&lt;div class="title">js&lt;/div>
&lt;div class="oper">&lt;button class="codeCopy">复制&lt;/button>&lt;/div>
&lt;/summary>
&lt;/details>
&lt;div class="codeBlockContent">
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt" id="hl-8-1">&lt;a class="lnlinks" href="#hl-8-1">1&lt;/a>
&lt;/span>&lt;span class="lnt" id="hl-8-2">&lt;a class="lnlinks" href="#hl-8-2">2&lt;/a>
&lt;/span>&lt;span class="lnt" id="hl-8-3">&lt;a class="lnlinks" href="#hl-8-3">3&lt;/a>
&lt;/span>&lt;span class="lnt" id="hl-8-4">&lt;a class="lnlinks" href="#hl-8-4">4&lt;/a>
&lt;/span>&lt;span class="lnt" id="hl-8-5">&lt;a class="lnlinks" href="#hl-8-5">5&lt;/a>
&lt;/span>&lt;span class="lnt" id="hl-8-6">&lt;a class="lnlinks" href="#hl-8-6">6&lt;/a>
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-js" data-lang="js">&lt;span class="line">&lt;span class="cl">&lt;span class="kr">const&lt;/span> &lt;span class="nx">isRevervse&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="p">(&lt;/span>&lt;span class="nx">str1&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="nx">str2&lt;/span>&lt;span class="p">)&lt;/span> &lt;span class="p">=&amp;gt;&lt;/span> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="kr">const&lt;/span> &lt;span class="nx">normalize&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="p">(&lt;/span>&lt;span class="nx">str&lt;/span>&lt;span class="p">)&lt;/span> &lt;span class="p">=&amp;gt;&lt;/span> &lt;span class="nx">str&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">toLowerCase&lt;/span>&lt;span class="p">().&lt;/span>&lt;span class="nx">normalize&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s2">&amp;#34;NFD&amp;#34;&lt;/span>&lt;span class="p">).&lt;/span>&lt;span class="nx">split&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s2">&amp;#34;&amp;#34;&lt;/span>&lt;span class="p">).&lt;/span>&lt;span class="nx">reverse&lt;/span>&lt;span class="p">().&lt;/span>&lt;span class="nx">join&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s2">&amp;#34;&amp;#34;&lt;/span>&lt;span class="p">);&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">return&lt;/span> &lt;span class="nx">normalize&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="nx">str1&lt;/span>&lt;span class="p">)&lt;/span> &lt;span class="o">===&lt;/span> &lt;span class="nx">str2&lt;/span>&lt;span class="p">;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="p">};&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="nx">console&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">log&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="nx">isRevervse&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s2">&amp;#34;anagram&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="s2">&amp;#34;margana&amp;#34;&lt;/span>&lt;span class="p">));&lt;/span> &lt;span class="c1">// true
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">&lt;/span>&lt;span class="nx">console&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">log&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="nx">isRevervse&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s2">&amp;#34;rac&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="s2">&amp;#34;car&amp;#34;&lt;/span>&lt;span class="p">));&lt;/span> &lt;span class="c1">// true
&lt;/span>&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>
&lt;/div>
&lt;/div>
&lt;blockquote>
&lt;p>回文字符串: 正着写和反着写都一样的字符串 (特别感谢
&lt;a href="https://juejin.cn/user/3998255455678968" rel="external">
@浮生阁阁主
&lt;/a>
勘误)&lt;/p></description></item></channel></rss>